{"version":3,"sources":["pages/Tutor/Profile/DataList.jsx","pages/Tutor/Profile/_RenderCertifications.jsx","pages/Tutor/Profile/_RenderEditCertifications.jsx","pages/Tutor/Profile/Certifications.jsx"],"names":["StyledHeading","styled","Heading","StyledRow","HeadingExtra","baseStyles","greyColor","token","localStorage","getItem","DataList","title","description","download","extra","loading","active","paragraph","rows","type","justify","xs","lg","reverse","content","subheader","style","textAlign","mobile","href","serverBaseUrl","target","rel","icon","marginRight","align","level","RenderCertifications","userCertifications","unauthorizedUser","length","map","name","issuer","issuedDate","relativePath","stringifiedDate","String","slice","key","FieldRow","div","Drag","RenderEditCertifications","yearList","loadingUpload","i18n","handlers","props","localFile","isAdding","certifications","handleDelete","handleUpdateCert","handleAddNewField","setEditMode","handleSave","handleUploadCert","handleUploadToLocal","handleCancel","data-index","onSubmit","initialValues","validationSchema","handleSubmit","layout","file","actual","showIcon","message","block","marginBottom","onClick","beforeUpload","multiple","listType","TextInput","placeholder","_","label","gutter","SelectInput","options","size","item","idx","pvid","Number","onConfirm","yup","shape","required","withI18n","onEditMode","onCertifications","fetchUser","editMode","useState","setUserCertifications","setIsAdding","setLocalFile","yearListFrom1980","value","useMutation","mutateAddCertification","client","profileClient","onCompleted","success","onError","err","renderError","addCertification","MUTATE_UPDATE_CERTIFICATE","newClient","updateCertification","mutateUploadCertification","resourceClient","data","prev","uploadCertification","path","mutateDeleteCertification","deleteCertification","useEffect","paddingHorizontal","noPadding","variables","values","setSubmitting","finally","certs","reader","FileReader","onloadend","imagePreview","result","readAsDataURL"],"mappings":"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","file":"static/js/49.0c7c404b.chunk.js","sourcesContent":["import React from \"react\"\nimport { Heading, ButtonLink } from \"components\"\nimport { Row, Col, Skeleton } from \"antd\"\nimport styled from \"styled-components\"\nimport { mobile, serverBaseUrl } from \"helpers\"\nimport { baseStyles } from \"styles/base\"\nimport { Trans } from \"@lingui/macro\"\n\nconst StyledHeading = styled(Heading)`\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tpadding-bottom: 1em;\n\t}\n`\n\nconst StyledRow = styled(Row)`\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tmargin-bottom: 1em;\n\t}\n`\n\nconst HeadingExtra = styled(Heading)`\n\t&& {\n\t\th4 {\n\t\t\tfont-size: 1em;\n\t\t\tcolor: ${baseStyles.greyColor};\n\t\t}\n\t}\n`\n\nconst token = localStorage.getItem(\"token\")\n\nexport default function DataList({ title = \"\", description = \"\", download = \"\", extra = \"\", loading }) {\n\tif (download) {\n\t\treturn (\n\t\t\t<Skeleton loading={loading} active paragraph={{ rows: 1 }}>\n\t\t\t\t<StyledRow type=\"flex\" justify=\"space-between\">\n\t\t\t\t\t<Col xs={24} lg={12}>\n\t\t\t\t\t\t<Heading reverse content={title} subheader={description} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={24} lg={12} style={{ textAlign: mobile ? \"left\" : \"right\" }}>\n\t\t\t\t\t\t{token && (\n\t\t\t\t\t\t\t<a href={serverBaseUrl + download} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t\t<ButtonLink icon=\"eye\" style={{ marginRight: 0 }}>\n\t\t\t\t\t\t\t\t\t&nbsp; <Trans>View</Trans>\n\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Col>\n\t\t\t\t</StyledRow>\n\t\t\t</Skeleton>\n\t\t)\n\t}\n\n\tif (extra)\n\t\treturn (\n\t\t\t<Skeleton loading={loading} active paragraph={{ rows: 1 }}>\n\t\t\t\t<StyledRow type=\"flex\" justify=\"space-between\" align=\"middle\">\n\t\t\t\t\t<Col xs={24} lg={12}>\n\t\t\t\t\t\t<Heading reverse content={title} subheader={description} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={24} lg={12} style={{ textAlign: mobile ? \"left\" : \"right\" }}>\n\t\t\t\t\t\t<HeadingExtra content={extra} level={4} />\n\t\t\t\t\t</Col>\n\t\t\t\t</StyledRow>\n\t\t\t</Skeleton>\n\t\t)\n\n\treturn (\n\t\t<Skeleton loading={loading} active paragraph={{ rows: 1 }}>\n\t\t\t<StyledHeading reverse content={title} subheader={description} />\n\t\t</Skeleton>\n\t)\n}\n","import React from \"react\"\nimport { Empty } from \"components\"\nimport { Trans } from \"@lingui/macro\"\nimport DataList from \"./DataList\"\n\nexport default function RenderCertifications({ userCertifications, unauthorizedUser, loading }) {\n\tconst renderCertifications = () => {\n\t\tif (userCertifications.length === 0) {\n\t\t\treturn (\n\t\t\t\t<Empty\n\t\t\t\t\tdescription={\n\t\t\t\t\t\tunauthorizedUser ? (\n\t\t\t\t\t\t\t<Trans>This tutor didn't specify any certifications yet</Trans>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Trans>You haven't set any certifications yet</Trans>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn userCertifications.map(({ name, issuer, issuedDate, relativePath }) => {\n\t\t\tconst stringifiedDate = String(issuedDate)\n\t\t\tconst title = `${name} (${stringifiedDate.slice(0, 4)})`\n\n\t\t\treturn (\n\t\t\t\t<DataList\n\t\t\t\t\tdownload={relativePath}\n\t\t\t\t\tkey={name}\n\t\t\t\t\tloading={loading}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\tdescription={issuer}\n\t\t\t\t\tunauthorizedUser={unauthorizedUser}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t}\n\n\treturn <div>{renderCertifications()}</div>\n}\n","import React from \"react\"\nimport { Formik } from \"formik\"\nimport { Form, Row, Col, Popconfirm, Divider, Icon } from \"antd\"\nimport TextInput from \"components/forms/TextInput\"\nimport { Trans, t } from \"@lingui/macro\"\nimport SelectInput from \"components/forms/SelectInput\"\nimport { SubmitButton } from \"formik-antd\"\nimport { ButtonLink, Button, Upload, Heading, Alert } from \"components\"\nimport styled from \"styled-components\"\nimport * as yup from \"yup\"\n\nconst FieldRow = styled.div`\n\tposition: relative;\n\t&:hover {\n\t\t.delete {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n\t.delete {\n\t\tdisplay: none;\n\t\tcursor: pointer;\n\t\tvisibility: hidden;\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tborder-radius: 50%;\n\t\twidth: 25px;\n\t\tcolor: #ff9d00;\n\t\theight: 25px;\n\t\tz-index: 99;\n\t\t&:hover {\n\t\t\tbackground: #eee;\n\t\t}\n\t}\n`\n\nconst Drag = styled.div`\n\ttext-align: center;\n\tdisplay: block;\n\tpadding: 2em;\n\tbackground: #f3f3f3;\n\tborder-radius: 8px;\n\tmargin-bottom: 2em;\n\th4 {\n\t\tfont-size: 1.2em;\n\t}\n\t> p {\n\t\tfont-size: 4em;\n\t}\n`\n\nexport default function RenderEditCertifications({ yearList, loadingUpload, i18n, handlers, ...props }) {\n\tconst { localFile, isAdding, certifications } = props\n\tconst {\n\t\thandleDelete,\n\t\thandleUpdateCert,\n\t\thandleAddNewField,\n\t\tsetEditMode,\n\t\thandleSave,\n\t\thandleUploadCert,\n\t\thandleUploadToLocal,\n\t\thandleCancel\n\t} = handlers\n\n\tconst renderCert = () => {\n\t\tif (!isAdding) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{certifications.map((item, idx) => {\n\t\t\t\t\t\tconst { name, issuer, issuedDate, pvid } = item\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\t\t\tonSubmit={handleUpdateCert}\n\t\t\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\tissuer,\n\t\t\t\t\t\t\t\t\t\tpvid: Number(pvid),\n\t\t\t\t\t\t\t\t\t\tissuedDate\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{({ handleSubmit }) => (\n\t\t\t\t\t\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit} style={{ marginBottom: \"2em\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Name of certification\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Name of certification</Trans>}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Col lg={16}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"issuer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Issuer\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Issuer</Trans>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Col lg={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"issuedDate\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Year issued\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={yearList}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Year issued</Trans>}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t\t\t\t\t<SubmitButton type=\"primary\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Trans>Update certificate</Trans>\n\t\t\t\t\t\t\t\t\t\t\t\t</SubmitButton>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t&nbsp;{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={<Trans>Delete this certificate?</Trans>}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonConfirm={() => handleDelete(item.pvid)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ButtonLink icon=\"close\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t&nbsp; <Trans>Delete</Trans>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</Formik>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tblock\n\t\t\t\t\t\ttype=\"dashed\"\n\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\ticon=\"plus\"\n\t\t\t\t\t\tonClick={handleAddNewField}\n\t\t\t\t\t\tstyle={{ marginBottom: \"2em\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t&nbsp; <Trans>Add a new certificate</Trans>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<ButtonLink block icon=\"close\" onClick={() => setEditMode(false)}>\n\t\t\t\t\t\t&nbsp; <Trans>Cancel</Trans>\n\t\t\t\t\t</ButtonLink>\n\t\t\t\t</>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Formik\n\t\t\t\tonSubmit={handleSave}\n\t\t\t\tinitialValues={{ name: \"\", issuer: \"\" }}\n\t\t\t\tvalidationSchema={validationSchema(i18n)}\n\t\t\t>\n\t\t\t\t{({ handleSubmit }) => (\n\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t{localFile.file ? (\n\t\t\t\t\t\t\t\tlocalFile.actual ? (\n\t\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\t\tshowIcon\n\t\t\t\t\t\t\t\t\t\ttype=\"success\"\n\t\t\t\t\t\t\t\t\t\tmessage={\n\t\t\t\t\t\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\t\t\t\t\t\tYour certificate is uploaded. Now please fill in the details of the\n\t\t\t\t\t\t\t\t\t\t\t\tcertificate.\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"2em\" }}\n\t\t\t\t\t\t\t\t\t\ttype=\"dashed\"\n\t\t\t\t\t\t\t\t\t\ticon=\"upload\"\n\t\t\t\t\t\t\t\t\t\tloading={loadingUpload}\n\t\t\t\t\t\t\t\t\t\tonClick={handleUploadCert}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t&nbsp; <Trans>Upload this certificate now</Trans>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Upload\n\t\t\t\t\t\t\t\t\tbeforeUpload={handleUploadToLocal}\n\t\t\t\t\t\t\t\t\tmultiple={false}\n\t\t\t\t\t\t\t\t\tlistType=\"picture\"\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: \"2em\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Drag>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<Icon type=\"inbox\" />\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\t\t\t\t\tcontent={<Trans>Click or drag and drop your certification</Trans>}\n\t\t\t\t\t\t\t\t\t\t\tsubheader={\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans>Supported formats: .pdf, .doc, .docx, .png, .jpg, .jpeg</Trans>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tlevel={4}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Drag>\n\t\t\t\t\t\t\t\t</Upload>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Name of certification`)}\n\t\t\t\t\t\t\t\tlabel={<Trans>Name of certification</Trans>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t\t\t<Col lg={16}>\n\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\tname=\"issuer\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Issuer`)}\n\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Issuer</Trans>}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col lg={8}>\n\t\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\t\tname=\"issuedDate\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Year issued`)}\n\t\t\t\t\t\t\t\t\t\toptions={yearList}\n\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Year issued</Trans>}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<SubmitButton type=\"primary\" size=\"large\">\n\t\t\t\t\t\t\t<Trans>Save changes</Trans>\n\t\t\t\t\t\t</SubmitButton>{\" \"}\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<ButtonLink size=\"large\" onClick={handleCancel}>\n\t\t\t\t\t\t\t<Trans>Cancel</Trans>\n\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t</Form>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t)\n\t}\n\n\treturn <div data-index=\"cert\">{renderCert()}</div>\n}\n\nconst validationSchema = i18n =>\n\tyup.object().shape({\n\t\tname: yup.string().required(i18n._(t`You have to tell the name of the certificate`)),\n\t\tissuer: yup.string().required(i18n._(t`You have to tell the issuer`)),\n\t\tissuedDate: yup.string().required(i18n._(t`You have to tell when the certificate is issued`))\n\t})\n","import React, { useState, useEffect } from \"react\"\nimport { Section } from \"components\"\nimport { message } from \"antd\"\nimport { useMutation } from \"react-apollo\"\nimport { t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\n\nimport { MUTATE_UPDATE_CERTIFICATE } from \"queries/profile\"\nimport { yearListFrom1980 } from \"dummy\"\nimport RenderCertifications from \"./_RenderCertifications\"\nimport { mutateAddCertification, mutateUploadCertification, mutateDeleteCertification } from \"queries/profile\"\nimport { client, mobile, renderError, newClient } from \"helpers\"\nimport RenderEditCertifications from \"./_RenderEditCertifications\"\n\nfunction Certifications({ onEditMode, onCertifications, unauthorizedUser, fetchUser, loading, i18n }) {\n\tconst { editMode, setEditMode } = onEditMode\n\tconst { certifications } = onCertifications\n\tconst [userCertifications, setUserCertifications] = useState([])\n\tconst [isAdding, setIsAdding] = useState(false)\n\tconst [localFile, setLocalFile] = useState({})\n\n\tconst yearList = yearListFrom1980.map(item => ({ value: item, label: item }))\n\n\tconst [addCertification] = useMutation(mutateAddCertification, {\n\t\tclient: client.profileClient,\n\t\tonCompleted: () => {\n\t\t\tsetIsAdding(false)\n\t\t\tsetEditMode(\"\")\n\t\t\tfetchUser()\n\t\t\tmessage.success(i18n._(t`Certificate has been added`))\n\t\t},\n\t\tonError: err => renderError(err)\n\t})\n\n\tconst [updateCertification] = useMutation(MUTATE_UPDATE_CERTIFICATE, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => {\n\t\t\tsetEditMode(\"\")\n\t\t\tsetIsAdding(false)\n\t\t\tfetchUser()\n\t\t\tmessage.success(i18n._(t`Certificate details has been updated`))\n\t\t},\n\t\tonError: err => renderError()\n\t})\n\n\tconst [uploadCertification, { loading: loadingUpload }] = useMutation(mutateUploadCertification, {\n\t\tclient: client.resourceClient,\n\t\tonCompleted: data => {\n\t\t\tsetLocalFile(prev => ({ ...prev, actual: (data.uploadCertification || {}).path }))\n\t\t}\n\t})\n\n\tconst [deleteCertification] = useMutation(mutateDeleteCertification, {\n\t\tclient: client.profileClient,\n\t\tonCompleted: () => {\n\t\t\tsetIsAdding(false)\n\t\t\tsetEditMode(\"\")\n\t\t\tfetchUser()\n\t\t\tmessage.success(i18n._(t`Certificate has been deleted`))\n\t\t},\n\t\tonError: err => renderError(err)\n\t})\n\n\tconst handleDelete = pvid => deleteCertification({ variables: { pvid: Number(pvid) } })\n\n\tconst handleSave = (values, { setSubmitting }) => {\n\t\tvalues = {\n\t\t\t...values,\n\t\t\trelativePath: localFile.actual || \"\",\n\t\t\tissuedDate: values.issuedDate + \"/01/01\"\n\t\t}\n\t\taddCertification({ variables: values }).finally(() => setSubmitting(false))\n\t}\n\n\tconst handleAddNewField = () => {\n\t\tsetUserCertifications(certs => [...certs, { name: \"\", issuer: \"\", issuedDate: 2019 }])\n\t\tsetIsAdding(true)\n\t}\n\n\tconst handleCancel = () => {\n\t\tsetEditMode(\"\")\n\t\tsetIsAdding(false)\n\t\tsetLocalFile({})\n\t\tsetUserCertifications(certifications)\n\t}\n\n\tconst handleUploadToLocal = file => {\n\t\tconst reader = new FileReader()\n\t\treader.onloadend = () => setLocalFile(prev => ({ ...prev, file, imagePreview: reader.result }))\n\n\t\treader.readAsDataURL(file)\n\t\treturn false\n\t}\n\n\tconst handleUpdateCert = (values, { setSubmitting }) => {\n\t\tupdateCertification({ variables: values }).finally(() => setSubmitting(false))\n\t}\n\n\tconst handleUploadCert = () => uploadCertification({ variables: { file: localFile.file } })\n\n\tuseEffect(() => {\n\t\tsetUserCertifications(certifications)\n\t}, [certifications])\n\n\t// if (loading) return <Loading />\n\n\treturn (\n\t\t<Section paddingHorizontal={0} noPadding={mobile} marginBottom={0}>\n\t\t\t{editMode === \"certifications\" ? (\n\t\t\t\t<RenderEditCertifications\n\t\t\t\t\tisAdding={isAdding}\n\t\t\t\t\tlocalFile={localFile}\n\t\t\t\t\tcertifications={userCertifications}\n\t\t\t\t\tyearList={yearList}\n\t\t\t\t\tloadingUpload={loadingUpload}\n\t\t\t\t\ti18n={i18n}\n\t\t\t\t\thandlers={{\n\t\t\t\t\t\thandleDelete,\n\t\t\t\t\t\thandleUpdateCert,\n\t\t\t\t\t\thandleAddNewField,\n\t\t\t\t\t\tsetEditMode,\n\t\t\t\t\t\thandleSave,\n\t\t\t\t\t\thandleUploadCert,\n\t\t\t\t\t\thandleUploadToLocal,\n\t\t\t\t\t\thandleCancel\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<RenderCertifications\n\t\t\t\t\tunauthorizedUser={unauthorizedUser}\n\t\t\t\t\tloading={loading}\n\t\t\t\t\tuserCertifications={userCertifications}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Section>\n\t)\n}\n\nexport default withI18n()(Certifications)\n"],"sourceRoot":""}