(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[31],{1373:function(e,t,a){var n=a(1378),r=a(1379);e.exports=function(e,t,a){var i=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var l=0;l<16;++l)t[i+l]=c[l];return t||r(c)}},1378:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1379:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=a;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},1383:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));a(303);var n=a(103),r=(a(97),a(25)),i=(a(91),a(37)),c=a(5),l=a(9),o=a(0),u=a.n(o),s=a(42),m=a(15),d=a(16),b=a(46),f=a(48);function v(){var e=Object(c.a)(["\n\t&& {\n\t\th4 {\n\t\t\tfont-size: 1em;\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return v=function(){return e},e}function p(){var e=Object(c.a)(["\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tmargin-bottom: 1em;\n\t}\n"]);return p=function(){return e},e}function E(){var e=Object(c.a)(["\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tpadding-bottom: 1em;\n\t}\n"]);return E=function(){return e},e}var j=Object(m.b)(s.l)(E()),g=Object(m.b)(i.a)(p()),h=Object(m.b)(s.l)(v(),b.a.greyColor),y=localStorage.getItem("token");function x(e){var t=e.title,a=void 0===t?"":t,i=e.description,c=void 0===i?"":i,o=e.download,m=void 0===o?"":o,b=e.extra,v=void 0===b?"":b,p=e.loading;return m?u.a.createElement(n.a,{loading:p,active:!0,paragraph:{rows:1}},u.a.createElement(g,{type:"flex",justify:"space-between"},u.a.createElement(r.a,{xs:24,lg:12},u.a.createElement(s.l,{reverse:!0,content:a,subheader:c})),u.a.createElement(r.a,{xs:24,lg:12,style:{textAlign:d.j?"left":"right"}},y&&u.a.createElement("a",{href:f.f+m,target:"_blank",rel:"noopener noreferrer"},u.a.createElement(s.e,{icon:"eye",style:{marginRight:0}},"\xa0 ",u.a.createElement(l.Trans,{id:"View"})))))):v?u.a.createElement(n.a,{loading:p,active:!0,paragraph:{rows:1}},u.a.createElement(g,{type:"flex",justify:"space-between",align:"middle"},u.a.createElement(r.a,{xs:24,lg:12},u.a.createElement(s.l,{reverse:!0,content:a,subheader:c})),u.a.createElement(r.a,{xs:24,lg:12,style:{textAlign:d.j?"left":"right"}},u.a.createElement(h,{content:v,level:4})))):u.a.createElement(n.a,{loading:p,active:!0,paragraph:{rows:1}},u.a.createElement(j,{reverse:!0,content:a,subheader:c}))}},1659:function(e,t,a){"use strict";a.r(t);a(188);var n=a(67),r=(a(418),a(181)),i=(a(667),a(420)),c=(a(210),a(83)),l=(a(91),a(37)),o=(a(97),a(25)),u=(a(671),a(309)),s=a(19),m=a(157),d=(a(156),a(62)),b=a(28),f=a(23),v=a(0),p=a.n(v),E=a(42),j=a(1353),g=a(1373),h=a.n(g),y=a(1383),x=a(38),T=a.n(x),D=a(55),O=a(80),P=a(16),S=a(212),k=a(45),w=a(131),C=a(1707),M=a(1343),A=a(669),N=a(9),Y=a(419),_=a(222);function I(e){var t=e.isAdding,a=e.i18n,u=e.data,s=e.handlers,m=e.loading,d=s.handleSave,b=s.handleCancel,f=s.handleDelete,v=s.handleAddNewField,j=s.setEditMode,g=s.handleDeleteLocalLevels,h=u.userExperiences,y=u.userExperiencesNonAcademic,x=u.activeKey,D=u.options,O="non-academic"===x?y:h;return m?p.a.createElement(_.a,null):t?p.a.createElement(k.b,{onSubmit:d,validationSchema:"non-academic"===x?null:q(a),initialValues:{isPresent:!1,isPrivateTutor:!1}},(function(e){var t=e.handleSubmit,n=e.values;return p.a.createElement(c.a,{layout:"vertical",onSubmit:t},p.a.createElement(l.a,{gutter:16,type:"flex"},p.a.createElement(o.a,{lg:"non-academic"===x?16:8,xs:24},p.a.createElement(w.a,{name:"institution",placeholder:a._({id:"Tuition's name"}),label:p.a.createElement(N.Trans,{id:"Tuition's name"}),disabled:n.isPrivateTutor})),p.a.createElement(o.a,{lg:8,xs:12},p.a.createElement(S.a,{cascader:"non-academic"===x,name:"subject",label:p.a.createElement(N.Trans,{id:"Subject"}),placeholder:a._({id:"Subject"}),options:D.subjects})),"academic"===x&&p.a.createElement(o.a,{lg:8,xs:12},p.a.createElement(S.a,{name:"curriculum",mode:"multiple",label:p.a.createElement(N.Trans,{id:"Curriculum"}),placeholder:a._({id:"Curriculum"}),options:D.levels}))),p.a.createElement(l.a,{gutter:16,type:"flex",align:"middle",style:{marginBottom:"2em"}},p.a.createElement(o.a,{lg:6,xs:12,className:"mb2em-mobile"},p.a.createElement(C.a.MonthPicker,{name:"fromDate",label:p.a.createElement(N.Trans,{id:"Date joined"}),placeholder:a._({id:"Date joined"}),style:{width:"100%"},disabledDate:function(e){return e&&e>T()()}})),p.a.createElement(o.a,{lg:6,xs:12,className:"mb2em-mobile"},p.a.createElement(C.a.MonthPicker,{name:"toDate",label:p.a.createElement(N.Trans,{id:"Date resigned"}),placeholder:a._({id:"Date resigned"}),style:{width:"100%"},disabledDate:function(e){return e&&e>T()()},disabled:n.isPresent})),p.a.createElement(o.a,{lg:6,xs:24},p.a.createElement(A.a,{name:"isPrivateTutor",className:"mb0"},p.a.createElement(N.Trans,{id:"I was a private tutor"}))),p.a.createElement(o.a,{lg:6,xs:24},p.a.createElement(A.a,{name:"isPresent",className:"mb0"},p.a.createElement(N.Trans,{id:"I'm currently working here"})))),p.a.createElement(M.a,{block:!0},p.a.createElement(N.Trans,{id:"Save this experience"}))," ","\xa0"," ",p.a.createElement(E.e,{block:!0,onClick:b},p.a.createElement(N.Trans,{id:"Cancel"})))})):p.a.createElement(p.a.Fragment,null,(O||[]).map((function(e,t){var n=e.subject,u=void 0===n?{}:n,s=u.level&&u.level[0],m=function(){var e,a,n,r=(null===(e=O[t])||void 0===e?void 0:e.subject.name.split(" > "))||"",i=(null===(a=D.subjects)||void 0===a?void 0:a.find((function(e){return e.label===r[0]})))||{},c=(null===i||void 0===i||null===(n=i.children)||void 0===n?void 0:n.find((function(e){return e.label===r[1]})))||{};return"non-academic"===x?[i.label,c.label]:u.name};return p.a.createElement(k.b,{enableReinitialize:!0,key:t,onSubmit:d,initialValues:{pvid:s.pvid||"",subject:m(),initialSubject:m(),institution:s.institution,fromDate:s.fromDate,toDate:s.toDate,isPresent:s.isPresent,isPrivateTutor:s.isPrivateTutor,curriculum:(u.level||[]).map((function(e){return e.curriculum}))}},(function(e){var t=e.handleSubmit,n=e.values;return p.a.createElement(c.a,{layout:"vertical",onSubmit:t,className:"mb2em"},p.a.createElement(l.a,{gutter:16},p.a.createElement(o.a,{lg:8},p.a.createElement(w.a,{name:"institution",label:p.a.createElement(N.Trans,{id:"Tuition's name"}),placeholder:a._({id:"Tuition's name"}),disabled:n.isPrivateTutor})),p.a.createElement(o.a,{lg:8},p.a.createElement(S.a,{cascader:"non-academic"===x,name:"subject",label:p.a.createElement(N.Trans,{id:"Subject"}),placeholder:a._({id:"Subject"}),options:D.subjects})),"academic"===x&&p.a.createElement(o.a,{lg:8},p.a.createElement(S.a,{name:"curriculum",mode:"multiple",label:p.a.createElement(N.Trans,{id:"Curriculum"}),placeholder:a._({id:"Curriculum"}),options:D.levels,onDeselect:g(u.name)}))),p.a.createElement(l.a,{gutter:16,type:"flex",align:"middle",style:{marginBottom:"2em"}},p.a.createElement(o.a,{lg:6,xs:12,className:"mb2em-mobile"},p.a.createElement(C.a.MonthPicker,{name:"fromDate",label:p.a.createElement(N.Trans,{id:"Date joined"}),placeholder:a._({id:"Date joined"}),style:{width:"100%"},disabledDate:function(e){return e&&e>T()()}})),p.a.createElement(o.a,{lg:6,xs:12,className:"mb2em-mobile"},p.a.createElement(C.a.MonthPicker,{name:"toDate",label:p.a.createElement(N.Trans,{id:"Date resigned"}),placeholder:a._({id:"Date resigned"}),disabled:n.isPresent,style:{width:"100%"},disabledDate:function(e){return e&&e>T()()}})),p.a.createElement(o.a,{lg:6,xs:24},p.a.createElement(A.a,{name:"isPrivateTutor",className:"mb0"},p.a.createElement(N.Trans,{id:"I was a private tutor"}))),p.a.createElement(o.a,{lg:6,xs:24},p.a.createElement(A.a,{name:"isPresent",className:"mb0"},p.a.createElement(N.Trans,{id:"I'm currently working here"})))),p.a.createElement(M.a,{type:"primary"},p.a.createElement(N.Trans,{id:"Update"}))," ","\xa0"," ",p.a.createElement(i.a,{title:p.a.createElement(N.Trans,{id:"Delete this experience?"}),onConfirm:function(){return f(u.name)}},p.a.createElement(E.e,{icon:"close"},"\xa0 ",p.a.createElement(N.Trans,{id:"Delete"}))),p.a.createElement(r.a,null))}))})),p.a.createElement(n.a,{block:!0,type:"dashed",size:"medium",icon:"plus",onClick:v,style:{marginBottom:"2em"}},"\xa0 ",p.a.createElement(N.Trans,{id:"Add a new experience"})),p.a.createElement(E.e,{block:!0,icon:"close",onClick:function(){return j(!1)}},"\xa0 ",p.a.createElement(N.Trans,{id:"Cancel"})))}var q=function(e){return j.object().shape({curriculum:j.string().required(e._({id:"You have to fill in your curriculum"})),subject:j.string().required(e._({id:"You have to fill in your subject"}))})};t.default=Object(N.withI18n)()((function(e){var t=e.onEditMode,a=e.onExperiences,n=e.unauthorizedUser,r=e.i18n,i=(e.userData,Object(f.a)(e,["onEditMode","onExperiences","unauthorizedUser","i18n","userData"])),c=i.fetchUser,l=i.loading,o=t.editMode,j=t.setEditMode,g=a.experiences,x=a.experiencesNonAcademic,S=Object(v.useState)([]),k=Object(b.a)(S,2),w=k[0],C=k[1],M=Object(v.useState)([]),A=Object(b.a)(M,2),_=A[0],q=A[1],V=Object(v.useState)([]),z=Object(b.a)(V,2),L=z[0],R=z[1],B=Object(v.useState)(!1),F=Object(b.a)(B,2),U=F[0],K=F[1],J=Object(v.useState)("academic"),H=Object(b.a)(J,2),G=H[0],Q=H[1],W=Object(Y.c)({isNonAcademic:"non-academic"===G,useLabelForValue:!0}).options,X=Object(D.b)(O.I,{client:Object(P.k)(),onCompleted:function(){c().then((function(){return d.a.success(r._({id:"The experience item has been updated"}),2)})).finally((function(){K(!1),j("")}))},onError:function(e){return Object(P.q)(e)}}),Z=Object(b.a)(X,2),$=Z[0],ee=Z[1].loading,te=Object(D.b)(O.q,{client:Object(P.k)(),onCompleted:function(){c(),K(!1),j("")},onError:function(e){return Object(P.q)(e)}}),ae=Object(b.a)(te,1)[0],ne=Object(D.b)(O.a,{client:Object(P.k)(),onCompleted:function(){j(""),K(!1),c().then((function(){return d.a.success(r._({id:"The experience item has been deleted"}),2)}))},onError:function(e){return Object(P.q)(e)}}),re=Object(b.a)(ne,1)[0],ie=Object(D.b)(O.b,{client:Object(P.k)(),onCompleted:function(){return R([])},onError:function(e){return Object(P.q)(e)}}),ce=Object(b.a)(ie,1)[0],le=Object(D.b)(O.c,{client:Object(P.k)(),onCompleted:function(){j(""),K(!1),c().then((function(){return d.a.success(r._({id:"The experience item has been deleted"}),2)}))},onError:function(e){return Object(P.q)(e)}}),oe=Object(b.a)(le,1)[0],ue=function(e){var t,a,n,r,i,c=e.subject,l=void 0===c?{}:c,o=e.isPrivateTutor,u=l.level&&l.level[0]||{},s=null===(t=u.fromDate)||void 0===t?void 0:t.split("-")[1],m=null===(a=u.fromDate)||void 0===a?void 0:a.split("-")[0],d=null===(n=u.toDate)||void 0===n?void 0:n.split("-")[1],b=null===(r=u.toDate)||void 0===r?void 0:r.split("-")[0],f=T()("".concat(b," ").concat(d)).diff(T()("".concat(m," ").concat(s)),"months"),v=Number((f/12).toFixed(1));return p.a.createElement("section",null,null===(i=l.level)||void 0===i?void 0:i.map((function(e,t){return p.a.createElement("p",{key:t},e.curriculum," ",p.a.createElement("span",{style:{color:"#999"}},o?p.a.createElement(N.Trans,{id:"Private tutor"}):e.institution))})),p.a.createElement("p",{style:{marginBottom:0}},T()(s).format("MMM")," ",m," - ",T()(d).format("MMM")," ",b," \xb7"," ",p.a.createElement("span",{style:{color:"#999"}},p.a.createElement(N.Trans,{id:"{totalExp}y experience",values:{totalExp:v}}))))};return Object(v.useEffect)((function(){C(g),q(x)}),[g,x]),p.a.createElement(E.u,{paddingHorizontal:0,noPadding:P.j},"experiences"===o?p.a.createElement(I,{i18n:r,isAdding:U,loading:ee,data:{userExperiences:w,userExperiencesNonAcademic:_,activeKey:G,options:W},handlers:{handleAddNewField:function(){K(!0),C((function(e){return[].concat(Object(m.a)(e),[{id:h()(),isPrivateTutor:!1,isPresent:!1,institution:"",level:p.a.createElement(N.Trans,{id:"Select your level"}),subject:p.a.createElement(N.Trans,{id:"Select your subject"}),fromDate:"2019-01",toDate:"2019-01"}])}))},handleCancel:function(){C(g),j(""),K(!1)},handleDelete:function(e){("non-academic"===G?oe:re)({variables:{subject:e}})},handleSave:function(e,t){var a=t.setSubmitting,n=e.hasOwnProperty("pvid"),r=T()(e.fromDate).format("YYYY-MM-DD"),i=e.isPresent?T()().format("YYYY-MM-DD"):T()(e.toDate).format("YYYY-MM-DD"),c=e.isPrivateTutor?"-":e.institution||"-";if("non-academic"===G)e={subject:Array.isArray(e.subject)?e.subject.join(" > "):e.subject,isNonAcademic:!0,isStore:!n,level:[{pvid:e.pvid||"",fromDate:r,toDate:i,institution:c,isPrivateTutor:e.isPrivateTutor,isPresent:e.isPresent,curriculum:""}]};else{var l=e,o=(l.subject,l.initialSubject,Object(f.a)(l,["subject","initialSubject"])),u=e.curriculum.map((function(t){var a,n,l,u=w.findIndex((function(t){return t.subject.name===e.initialSubject})),m=(null===(a=w[u])||void 0===a||null===(n=a.subject)||void 0===n||null===(l=n.level)||void 0===l?void 0:l.find((function(e){return e.curriculum===t})))||{};return Object(s.a)({},o,{pvid:m.pvid||"",curriculum:t,fromDate:r,toDate:i,institution:c})}));e={subject:e.subject,isNonAcademic:!1,isStore:!n,level:u}}if(n){var m=e,d=(m.source,Object(f.a)(m,["source"]));e=d}if(L.length>0){var b=L.map((function(e){return e.pvid})).filter((function(e){return Boolean(e)}));ce({variables:{pvidList:b}})}("non-academic"===G?ae:$)({variables:{list:e}}).finally((function(){return a(!1)}))},setEditMode:j,handleDeleteLocalLevels:function(e){return function(t){var a,n,r=w.findIndex((function(t){return t.subject.name===e})),i=(null===(a=w[r].subject)||void 0===a||null===(n=a.level)||void 0===n?void 0:n.find((function(e){return e.curriculum===t})))||{};R((function(e){return[].concat(Object(m.a)(e),[i])}))}}}}):p.a.createElement(u.a,{onChange:function(e){return Q(e)},defaultActiveKey:G},p.a.createElement(u.a.TabPane,{key:"academic",tab:"Academic"},0===w.length&&!l&&p.a.createElement(E.j,{description:n?p.a.createElement(N.Trans,{id:"This tutor didn't set any tutoring experiences yet"}):p.a.createElement(N.Trans,{id:"You haven't set any tutoring experiences yet"})}),w.length>0&&w.map((function(e,t){var a=e.subject;return p.a.createElement(y.a,{key:t,loading:l,title:"".concat(a.name),description:ue(e)})}))),p.a.createElement(u.a.TabPane,{key:"non-academic",tab:"Non-academic"},0===_.length&&!l&&p.a.createElement(E.j,{description:n?p.a.createElement(N.Trans,{id:"This tutor didn't set any tutoring experiences yet"}):p.a.createElement(N.Trans,{id:"You haven't set any tutoring experiences yet"})}),_.length>0&&_.map((function(e,t){var a=e.subject;return p.a.createElement(y.a,{key:t,loading:l,title:"".concat(a.name),description:ue(e)})})))))}))}}]);
//# sourceMappingURL=31.ec32b073.chunk.js.map