(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[52],{1415:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return p}));var a=n(5),r=n(70),i=n.n(r);function o(){var t=Object(a.a)(["\n\tmutation MUTATE_ADD_CONVERSATION(\n\t\t$chatRoomPvid: Int!\n\t\t$message: String!\n\t\t$senderName: String!\n\t\t$isFirstTime: Boolean!\n\t\t$studyCenterPvid: Int\n\t) {\n\t\taddConversation(\n\t\t\tchatRoomPvid: $chatRoomPvid\n\t\t\tmessage: $message\n\t\t\tsenderName: $senderName\n\t\t\tisFirstTime: $isFirstTime\n\t\t\tstudyCenterPvid: $studyCenterPvid\n\t\t) {\n\t\t\tchatRoomPvid\n\t\t\tname\n\t\t\tmessage\n\t\t\tcreatedAt\n\t\t\tuserPvid\n\t\t}\n\t}\n"]);return o=function(){return t},t}function c(){var t=Object(a.a)(["\n\tquery QUERY_LIST_CONVERSATION($receiverId: Int!) {\n\t\tconversationList(receiverId: $receiverId) {\n\t\t\tchatRoomPvid\n\t\t\tconversations {\n\t\t\t\tuserPvid\n\t\t\t\tname\n\t\t\t\tmessage\n\t\t\t\tcreatedAt\n\t\t\t}\n\t\t}\n\t}\n"]);return c=function(){return t},t}function s(){var t=Object(a.a)(["\n\tquery QUERY_LIST_CHAT_ROOM($roleUser: Int!) {\n\t\tlistChatRoom(roleUser: $roleUser) {\n\t\t\tchatRoomPvid\n\t\t\tuserPvid\n\t\t\tfirstName\n\t\t\tlastName\n\t\t\tresource {\n\t\t\t\tpath\n\t\t\t}\n\t\t\tcreatedAt\n\t\t}\n\t}\n"]);return s=function(){return t},t}function l(){var t=Object(a.a)(["\n\tmutation MUTATE_ADD_CHAT_SESSION($receiver_id: Int!) {\n\t\taddChatRoom(receiver_id: $receiver_id) {\n\t\t\ttext\n\t\t\tsuccess\n\t\t\tchatParentId\n\t\t}\n\t}\n"]);return l=function(){return t},t}var u=i()(l()),d=i()(s()),m=i()(c()),p=i()(o())},1653:function(t,e,n){"use strict";n.r(e);n(156);var a=n(62),r=n(19),i=n(28),o=n(23),c=n(5),s=n(0),l=n.n(s),u=n(15),d=n(42),m=n(1654),p=n.n(m),f=n(55),h=n(80),b=n(16),v=n(9),g=n(1415),O=n(27),E=n(32),j=n(48);function C(){var t=Object(c.a)(["\n\t&& {\n\t\ttext-align: center;\n\t\tdisplay: block;\n\t\toverflow-x: hidden;\n\t\tmax-width: 200px;\n\t\ttext-overflow: ellipsis;\n\t\tmargin: 0 auto;\n\t}\n"]);return C=function(){return t},t}function w(){var t=Object(c.a)(["\n\t/* height: 200px; */\n\twidth: 100%;\n"]);return w=function(){return t},t}function y(){var t=Object(c.a)(['\n\twidth: 100%;\n\topacity: 0;\n\tvisibility: hidden;\n\tposition: absolute;\n\ttop: 45%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tinput[type="file"] {\n\t\twidth: 0.1px;\n\t\theight: 0.1px;\n\t\topacity: 0;\n\t\toverflow: hidden;\n\t\tz-index: -1;\n\t\t+ label {\n\t\t\tbackground: #fff;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\ttransition: all 0.3s ease;\n\t\t\tspan {\n\t\t\t\tfont-size: 1.2em;\n\t\t\t}\n\t\t\t&:hover {\n\t\t\t\tbox-shadow: 1px 3px 9px rgba(0, 0, 0, 0.25);\n\t\t\t}\n\t\t}\n\t}\n']);return y=function(){return t},t}function x(){var t=Object(c.a)(["\n\tposition: absolute;\n\tbottom: -10%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n"]);return x=function(){return t},t}function S(){var t=Object(c.a)(["\n\tposition: relative;\n\t.change-picture {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\ttop: 45%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.ant-card-cover {\n\t\tbackground-color: #f3f3f3;\n\t\theight: 240px;\n\t\tmax-height: 300px;\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\tborder-radius: 8px 8px 0 0;\n\t\t> img {\n\t\t\theight: 100%;\n\t\t\tobject-fit: cover;\n\t\t}\n\t}\n\t.ant-card-body {\n\t\tpadding: 2.5em 1.5em;\n\t\ttext-align: center;\n\t\t.ant-card-meta-detail {\n\t\t\t.ant-card-meta-title {\n\t\t\t\tfont-weight: 700;\n\t\t\t}\n\t\t}\n\t}\n\t&:hover {\n\t\t.upload-zone {\n\t\t\topacity: 1;\n\t\t\tvisibility: visible;\n\t\t}\n\t}\n"]);return S=function(){return t},t}var T=Object(u.b)(d.g)(S()),N=u.b.span(x()),P=u.b.span(y()),I=u.b.div(w()),U=Object(u.b)(d.e)(C()),_=Object(b.k)("chat");e.default=Object(v.withI18n)()((function(t){var e=t.data,n=t.unauthorizedUser,c=t.onShareModal,u=t.i18n,m=t.onChatWindow,C=t.onUploadImage,w=t.loading,y=t.onSettings,x=t.onLocalFile,S=t.fetchUser,$=(Object(o.a)(t,["data","unauthorizedUser","onShareModal","i18n","onChatWindow","onUploadImage","loading","onSettings","onLocalFile","fetchUser"]),e.userData),k=void 0===$?{}:$,R=e.theTotal,A=e.userDetails,D=e.teachingDate,z=x.localFile,F=x.setLocalFile,L=(c.shareModal,c.setShareModal),M=y.pictureSettings,W=y.setPictureSettings,q=(m.chatWindow,m.setChatWindow,Object(s.useState)([])),B=Object(i.a)(q,2),H=(B[0],B[1]),J=Object(s.useState)(!1),Q=Object(i.a)(J,2),V=(Q[0],Q[1],Object(s.useState)("schedule")),Y=Object(i.a)(V,2),Z=(Y[0],Y[1],localStorage.getItem("token")),G=Object(O.g)().push,K=Object(f.b)(h.P,{client:b.d.resourceClient,onCompleted:function(t){return F({})},onError:function(t){return Object(b.q)(t)}}),X=Object(i.a)(K,1)[0],tt=Object(f.b)(g.a,{client:_,variables:{receiver_id:Number(k.pvid)}});Object(i.a)(tt,1)[0],Object(f.c)(g.d,{client:_,variables:{receiverId:Number(k.pvid)},onCompleted:function(t){t=t.conversationList.conversations,H(t)}});var et=k.avatar||[],nt=k.address?l.a.createElement("a",{href:"https://www.google.com/maps/dir/?api=1&destination=".concat(k.address),target:"_blank",rel:"noreferrer noopener"},k.address," \xa0 \u2197"):l.a.createElement(v.Trans,{id:"No location specified"}),at="0.0"===R||0===R?l.a.createElement(v.Trans,{id:"No experience yet"}):l.a.createElement(v.Trans,{id:"{0}y exp",values:{0:parseFloat(R)}}),rt=l.a.createElement("span",{className:"info-detail"},l.a.createElement("p",{css:" margin-bottom: 0; "},nt)," ",at),it=z.actual?j.f+z.actual:z.imagePreview||"",ot=et.length>0?it:j.f+b.a;return w?l.a.createElement(d.g,null,l.a.createElement(d.o,null)):l.a.createElement(T,{height:"auto",src:ot,title:"".concat(k.firstName," ").concat(k.initialName||""),description:rt,id:"avatar"},!n&&l.a.createElement(I,null,z.file&&z.imagePreview?l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{image:z.imagePreview,crop:M.crop,zoom:M.zoom,aspect:M.aspect,onCropChange:function(t){return W((function(e){return Object(r.a)({},e,{crop:t})}))},onCropComplete:function(t,e){},onZoomChange:function(t){return W((function(e){return Object(r.a)({},e,{zoom:t})}))},restrictPosition:!1}),l.a.createElement(N,{className:"upload-buttons"},l.a.createElement(d.d,{type:"primary",icon:"image",onClick:function(){X({variables:{file:z.file}}).then((function(){a.a.loading(u._({id:"Please wait..."})).then((function(){return S()}))}))}},l.a.createElement(v.Trans,{id:"Upload profile picture"}))," ","\xa0"," ",l.a.createElement(d.e,{size:"large",onClick:function(){return F("")}},l.a.createElement(v.Trans,{id:"Cancel"})))):l.a.createElement(P,{className:"upload-zone",onClick:function(){return F((function(t){return Object(r.a)({},t,{isAvatar:!0})}))}},l.a.createElement("input",{type:"file",name:"picture",accept:"image/*",id:"picture",placeholder:u._({id:"Upload..."}),onChange:C}),l.a.createElement("label",{htmlFor:"picture"},l.a.createElement("span",{role:"img","aria-label":"cowboy"},"\ud83e\udd20")," ",l.a.createElement(v.Trans,{id:"Change profile picture"})))),A.token&&"STDN"===A.role.code&&l.a.createElement(d.c,{userData:k,userDetails:A,fetchUser:S,unauthorizedUser:n,teachingDate:D}),!z.file&&!z.imagePreview&&l.a.createElement(l.a.Fragment,null,l.a.createElement(d.d,{type:"primary",icon:"mail",onClick:function(){G(Z?{pathname:"/".concat(E.d,"/chats"),state:{userData:k}}:"/".concat(E.d,"/login"))},style:{marginBottom:"1em"}},"\xa0 ",l.a.createElement(v.Trans,{id:"Send message"})),l.a.createElement(U,{icon:"share-alt",onClick:function(){return L(!0)}},"\xa0 ",l.a.createElement(v.Trans,{id:"Share {0}'s profile",values:{0:k.firstName}}))))}))}}]);
//# sourceMappingURL=52.432cc0da.chunk.js.map