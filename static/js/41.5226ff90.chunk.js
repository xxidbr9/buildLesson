(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[41],{1354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1355);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=a,e&&e.__esModule?e:{default:e}).default;var e}})},1355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),i=(a=l)&&a.__esModule?a:{default:a};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){var e,n,a;c(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={maxIsVisible:0},o(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this,t=i.default.Children.count(this.props.children),n=0;this.interval=setInterval((function(){++n>t&&clearInterval(e.interval),e.setState({maxIsVisible:n})}),this.delay)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this,t=this.transitionDuration;return i.default.createElement("div",{className:this.props.className},i.default.Children.map(this.props.children,(function(n,a){return i.default.createElement("div",{style:{transition:"opacity "+t+"ms, top "+t+"ms",position:"relative",top:e.state.maxIsVisible>a?0:20,opacity:e.state.maxIsVisible>a?1:0}},n)})))}},{key:"delay",get:function(){return this.props.delay||50}},{key:"transitionDuration",get:function(){return this.props.transitionDuration||400}}]),t}(l.Component);t.default=s},1712:function(e,t,n){"use strict";n.r(t);n(158);var a=n(72),r=(n(92),n(8)),l=(n(418),n(181)),i=(n(210),n(83)),c=(n(91),n(37)),o=n(19),s=(n(156),n(62)),m=n(28),u=(n(97),n(25)),d=(n(685),n(542)),f=(n(417),n(111)),p=(n(422),n(184)),b=n(5),g=n(0),h=n.n(g),v=n(15),E=n(45),y=n(1343),j=n(3),O=n(67),k=function(e){var t=e.children,n=e.onClick,a=Object(j.e)(e,["children","onClick"]);return g.createElement(E.a,null,(function(e){var r=e.form,l=r.resetForm,i=r.dirty;return g.createElement(O.a,Object.assign({onClick:function(e){l(),n&&n(e)},disabled:!i,type:"dashed"},a),t)}))},x=n(38),w=n.n(x),N=n(55),C=n(1354),S=n.n(C),_=n(163),I=n(42),T=n(131),D=n(16),z=n(46),P=n(23),R=n(9),V=n(48);function M(){var e=Object(b.a)(["\n\t\t.ant-modal-content {\n\t\t\t.ant-avatar {\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t\tline-height: 60px;\n\t\t\t}\n\t\t}\n\t"]);return M=function(){return e},e}function Y(){var e=Object(b.a)(["\n\t.ant-modal-content {\n\t\tpadding: 2em 1em;\n\t\t.ant-avatar {\n\t\t\twidth: 80px;\n\t\t\theight: 80px;\n\t\t\tline-height: 80px;\n\t\t\tfont-size: 20px;\n\t\t}\n\t\t.ant-row:first-child {\n\t\t\tmargin-bottom: 3em;\n\t\t}\n\t\th4.ant-typography {\n\t\t\tfont-size: 1em;\n\t\t\tmargin-bottom: 1em;\n\t\t\t.datetime {\n\t\t\t\tcolor: ",";\n\t\t\t}\n\t\t}\n\t}\n\n\t","\n"]);return Y=function(){return e},e}var F=Object(v.b)(I.q)(Y(),z.a.greyColor,D.i.mobile(M()));var L=Object(R.withI18n)()(h.a.forwardRef((function(e,t){var n=e.data,a=void 0===n?{}:n,r=e.avatar,l=e.handlers,s=e.i18n,m=Object(P.a)(e,["data","avatar","handlers","i18n"]),d=a.firstName,f=void 0===d?"":d,p=a.lastName,b=void 0===p?"":p,v=a.comment,j=void 0===v?"":v,O=a.postedDate,k=void 0===O?"":O,x=l.addReply,N=l.setSelectedItem,C=f&&b?"".concat(f[0]).concat(b[0]):f.slice(0,2).toUpperCase(),S=h.a.createElement("span",null,f," ",b," \xb7 ",h.a.createElement("span",{className:"datetime"},w()(k).fromNow())),_=h.a.createRef(null);return Object(g.useEffect)((function(){_.current&&_.current.focus()}),[_]),h.a.createElement(F,Object.assign({},m,{onCancel:function(){N({})},centered:!0,footer:!1,width:650}),h.a.createElement(c.a,{gutter:32},h.a.createElement(u.a,{lg:5,xs:6},h.a.createElement(I.b,{src:V.f+a.avatar,size:D.j?"default":"large"},C)),h.a.createElement(u.a,{lg:19,xs:18},h.a.createElement(I.l,{content:S,subheader:j,level:4}))),h.a.createElement(c.a,{gutter:32},h.a.createElement(u.a,{lg:5,xs:6},h.a.createElement(I.b,{src:r,size:"default"},C)),h.a.createElement(u.a,{lg:19,xs:18},h.a.createElement(E.b,{onSubmit:function(e,t){var n=t.setSubmitting,r=t.resetForm;e=Object(o.a)({},e,{feedCommentPvid:a.pvid}),x({variables:Object(o.a)({},e)}).then((function(){n(!1),r({})}))},initialValues:{comment:""}},(function(e){var n=e.handleSubmit,a=e.values;e.setValues;return h.a.createElement(i.a,{layout:"vertical",onSubmit:n,onKeyDown:function(e){e.metaKey&&"Enter"===e.key&&n()}},h.a.createElement("p",{className:"grey"},h.a.createElement(R.Trans,{id:"Replying to <0>{firstName} {lastName}</0>",values:{firstName:f,lastName:b},components:[h.a.createElement("strong",null)]})),h.a.createElement(T.a,{transparent:!0,ref:t,textarea:!0,rows:2,name:"comment",placeholder:s._({id:"Write your reply..."}),helpText:a.comment&&h.a.createElement(R.Trans,{id:"Cmd + Enter (or Ctrl + Enter in Windows) to submit"})}),h.a.createElement(y.a,{type:"primary",icon:"plus"},"\xa0 ",h.a.createElement(R.Trans,{id:"Reply"})))})))))}))),H=n(552),J=n(69),U=n(444),W=n(51),A=n(27),B=n(32),K=n(80);function q(){var e=Object(b.a)(["\n\t> p {\n\t\tfont-size: 12px;\n\t}\n"]);return q=function(){return e},e}function G(){var e=Object(b.a)(["\n\tpadding: 2em;\n\tbackground-color: #fff;\n\tborder-radius: 10px;\n\tmargin-bottom: 1.5em;\n\tbox-shadow: ",";\n\ttransition: all 0.2s ease;\n\t.ant-comment-inner {\n\t\tpadding: 0;\n\t\tmargin-bottom: ",";\n\t\t.ant-comment-content-author-time {\n\t\t\tcolor: ",";\n\t\t}\n\t\t+ .ant-comment-nested {\n\t\t\t> div:last-child {\n\t\t\t\t.ant-row {\n\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.ant-row {\n\t\tmargin-bottom: 1em;\n\t}\n\t&:hover {\n\t\tbox-shadow: ",";\n\t}\n"]);return G=function(){return e},e}function Q(){var e=Object(b.a)(["\n\t\t&& {\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 0;\n\t\t}\n\t"]);return Q=function(){return e},e}function X(){var e=Object(b.a)(["\n\t&& {\n\t\tpadding-left: 4em;\n\t\tpadding-right: 4em;\n\t\tmax-height: 100vh;\n\t\toverflow-y: scroll;\n\t}\n\n\t","\n"]);return X=function(){return e},e}function Z(){var e=Object(b.a)(["\n\tmargin-right: 1.4em;\n"]);return Z=function(){return e},e}function $(){var e=Object(b.a)(["\n\t\t&& {\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 0;\n\t\t}\n\t"]);return $=function(){return e},e}function ee(){var e=Object(b.a)(["\n\t&& {\n\t\tpadding-left: 4em;\n\t\tpadding-right: 4em;\n\t\tmargin-bottom: 2em;\n\t\tbackground-color: transparent;\n\t\tborder-color: transparent;\n\t\t.ant-card-body {\n\t\t\tpadding: 0;\n\t\t}\n\t}\n\n\t","\n"]);return ee=function(){return e},e}var te=Object(v.b)(p.a).attrs({autoHeight:!0})(ee(),D.i.mobile($())),ne=v.b.span(Z()),ae=Object(v.b)(f.a)(X(),D.i.mobile(Q())),re=Object(v.b)(d.a)(G(),z.a.boxShadow.main,(function(e){return e.comments.length>0&&"2em"}),z.a.greyColor,z.a.boxShadow.hover),le=Object(v.b)(u.a)(q()),ie=Object(D.k)("feeds");t.default=Object(R.withI18n)()((function(e){e.data;var t=e.i18n,n=Object(g.useState)(""),d=Object(m.a)(n,2),f=d[0],p=(d[1],Object(g.useState)({})),b=Object(m.a)(p,2),v=b[0],j=b[1],O=Object(g.useState)([]),x=Object(m.a)(O,2),C=x[0],z=x[1],P=Object(g.useState)({}),M=Object(m.a)(P,2),Y=M[0],F=M[1],q=Object(A.g)().push,G=(JSON.parse(localStorage.getItem("userDetails")),(Y.avatar||[])[0]||{}),Q=Object(H.a)(G.path),X=Y.avatar&&V.f+(Y.avatar[Y.avatar.length-1]||{}).path,Z=(Y.avatar||[]).length>1?X:Q,$=Object(N.b)(K.l,{client:Object(D.k)(),onCompleted:function(e){e=e.getProfile||{},F(e)}}),ee=Object(m.a)($,1)[0],ce=Object(N.b)(_.e,{client:ie,onCompleted:function(e){e=(e.getFeeds||{}).list,z(e)}}),oe=Object(m.a)(ce,1)[0],se=Object(N.b)(_.c,{client:ie,onCompleted:function(){oe({variables:{startIndex:0,length:10}}).then((function(){s.a.success(t._({id:"Your comment has been added"}))}))}}),me=Object(m.a)(se,1)[0],ue=Object(N.b)(_.h,{client:ie,onCompleted:function(e){var n=e.addVote,a=(void 0===n?{}:n).vote;oe({variables:{startIndex:0,length:15}}).then((function(){s.a.success(t._({id:"You've {0} this comment",values:{0:1===a?"liked":"disliked"}}))}))}}),de=Object(m.a)(ue,1)[0],fe=Object(N.b)(_.d,{client:ie,onCompleted:function(){j({}),oe({variables:{startIndex:0,length:15}}).then((function(){s.a.success(t._({id:"Reply has been sent"}))}))}}),pe=Object(m.a)(fe,1)[0],be=function(e,t){de({variables:{feedCommentPvid:e,vote:"likes"===t?1:-1}})};return Object(g.useEffect)((function(){localStorage.getItem("token")&&(oe({variables:{startIndex:0,length:15}}),ee())}),[oe,ee]),localStorage.getItem("token")?h.a.createElement(I.n,null,h.a.createElement(J.a,null,h.a.createElement(c.a,{gutter:32,type:"flex",justify:"center"},h.a.createElement(L,{data:v,avatar:Z,handlers:{addReply:pe,setSelectedItem:j},visible:Object.keys(v).length>0}),h.a.createElement(u.a,{lg:14,xs:24},h.a.createElement(I.l,{content:h.a.createElement(R.Trans,{id:"Feeds"}),level:4,marginBottom:"3em"}),h.a.createElement(te,null,h.a.createElement(c.a,{gutter:16},h.a.createElement(u.a,{lg:4,xs:4},h.a.createElement(I.b,{src:Z,size:"large"})),h.a.createElement(u.a,{lg:20,xs:20},h.a.createElement(E.b,{onSubmit:function(e,t){var n=t.setSubmitting,a=t.resetForm;me({variables:Object(o.a)({},e)}).finally((function(){a({}),n(!1)}))},initialValues:{comment:""}},(function(e){var n=e.handleSubmit,a=e.dirty;return h.a.createElement(i.a,{layout:"vertical",onSubmit:n},h.a.createElement(T.a,{textarea:!0,rows:4,name:"comment",placeholder:t._({id:"Any thought on mind?"})}),h.a.createElement(y.a,{disabled:!a,type:"primary",size:"large",icon:"plus"},"\xa0 ",h.a.createElement(R.Trans,{id:"Send feed"}))," ","\xa0"," ",h.a.createElement(k,{size:"large",type:"link"},h.a.createElement(R.Trans,{id:"Reset"})))}))))),h.a.createElement(l.a,null),h.a.createElement(I.l,{content:h.a.createElement(R.Trans,{id:"Your feeds"}),level:4,className:"px4em px0__mobile"}),h.a.createElement(ae,{className:"comment-list",header:h.a.createElement(R.Trans,{id:"{0} entries",values:{0:C.length}}),itemLayout:"horizontal",dataSource:C,locale:{emptyText:h.a.createElement(I.j,{boxImage:!0,description:h.a.createElement(R.Trans,{id:"No feed entries found"})})},renderItem:function(e){var t=e.firstName?e.firstName+" "+e.lastName:"No name",n=e.avatar?V.f+e.avatar:V.f+D.a;return h.a.createElement(S.a,{key:e.pvid},h.a.createElement("li",null,h.a.createElement(re,{actions:[h.a.createElement(ne,{key:"comment-basic-like"},h.a.createElement(a.a,{title:h.a.createElement(R.Trans,{id:"Like"})},h.a.createElement(r.a,{type:"like",theme:"liked"===f?"filled":"outlined",onClick:function(){return be(e.pvid,"likes")}})),h.a.createElement("span",{style:{paddingLeft:5,cursor:"auto"}},e.totalUpVoted)),h.a.createElement(ne,{key:"comment-basic-dislike"},h.a.createElement(a.a,{title:h.a.createElement(R.Trans,{id:"Dislike"})},h.a.createElement(r.a,{type:"dislike",theme:"disliked"===f?"filled":"outlined",onClick:function(){return be(e.pvid,"dislikes")}})),h.a.createElement("span",{style:{paddingLeft:5,cursor:"auto"}},e.totalDownVoted)),h.a.createElement(ne,{key:"comment-basic-reply-to",onClick:function(){return function(e){return j(e)}(e)}},h.a.createElement(R.Trans,{id:"Reply to"}))],comments:e.list,author:h.a.createElement("a",null,t),avatar:h.a.createElement(I.b,{src:n,alt:"".concat(e.firstName," ").concat(e.lastName),size:"large"}),content:h.a.createElement("p",null,e.comment),datetime:h.a.createElement(a.a,{title:w()(e.postedDate).format("dddd, DD MMM YYYY HH:mm:ss")},h.a.createElement("span",null,w()(e.postedDate).fromNow()))},(e.list||[]).length>0?e.list.map((function(e){return h.a.createElement(S.a,{key:e.pvid},h.a.createElement(c.a,{gutter:32},h.a.createElement(u.a,{lg:4,xs:4},h.a.createElement(I.b,{src:n,size:"large"})),h.a.createElement(le,{lg:20,xs:20},h.a.createElement("p",null,e.firstName," ",e.lastName," \xa0",h.a.createElement("span",{className:"grey"},w()(e.postedDate).fromNow())),h.a.createElement("p",null,e.comment))))})):null)))}}))))):h.a.createElement(I.n,null,h.a.createElement(J.a,null,h.a.createElement(c.a,{gutter:32,type:"flex",justify:"center"},h.a.createElement(u.a,{lg:14,xs:24},h.a.createElement(I.l,{content:h.a.createElement(R.Trans,{id:"Feeds"}),level:4,marginBottom:"3em"}),h.a.createElement(U.a,{title:h.a.createElement(I.l,{level:4,content:h.a.createElement(R.Trans,{id:"Oops! You are not logged in"}),subheader:h.a.createElement(h.a.Fragment,null,h.a.createElement("br",null),h.a.createElement(W.a,{type:"primary",onClick:function(){return q("/".concat(B.d,"/login"))}},h.a.createElement(R.Trans,{id:"Login first"})))})})))))}))}}]);
//# sourceMappingURL=41.5226ff90.chunk.js.map