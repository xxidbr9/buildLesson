{"version":3,"sources":["../../src/index.ts","../node_modules/react-intersection-observer/node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/react-intersection-observer/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/react-intersection-observer/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/react-intersection-observer/dist/react-intersection-observer.esm.js","../node_modules/react-intersection-observer/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../node_modules/react-intersection-observer/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../src/LazyImageFull.tsx","../../src/LazyImage.tsx","pages/StudyPlaces/PlaceCard.jsx","components/common/CategoryList.jsx","helpers/hooks/useInternational.js","../node_modules/react-use/esm/useGeolocation.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_assertThisInitialized","self","ReferenceError","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","INSTANCE_MAP","Map","OBSERVER_MAP","observe","element","callback","options","rootId","invariant","has","threshold","_options","root","rootMargin","observerId","toString","observerInstance","get","IntersectionObserver","onChange","set","instance","visible","observer","undefined","unobserve","itemsLeft","forEach","item","disconnect","delete","changes","intersection","isIntersecting","intersectionRatio","_inView","Array","isArray","some","InView","_React$Component","subClass","superClass","_this","_len","args","_key","concat","inView","node","observeNode","setState","props","create","constructor","__proto__","_proto","componentDidMount","process","componentDidUpdate","prevProps","prevState","state","triggerOnce","componentWillUnmount","_this$props","handleChange","render","_this$props2","children","tag","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","_this$state","renderMethod","ref","handleNode","createElement","Component","ImageState","LazyImageFullState","unionize","NotAsked","Buffering","Loading","LoadSuccess","LoadError","ofType","Action","ViewChanged","BufferingEnded","getLoadingCmd","imageProps","experimentalDecode","loadingPromise","makeCancelable","loadImage","promise","then","update","catch","e","isCanceled","msg","promiseCache","loading","cancelBufferingCmd","buffering","cancel","_super","initialState","bind","tslib_1.__extends","LazyImageFull","action","match","_a","src","debounceDurationMs","nextState","cmd","durationMs","bufferingPromise","delayedPromise","default","debugActions","console","warn","log","loadEagerly","observerProps","imageState","React","Observer","srcSet","alt","sizes","Promise","resolve","reject","image","Image","srcset","decode","err","onload","onerror","ms","setTimeout","hasCanceled_","val","error","LazyImage","actual","placeholder","rest","displayName","StyledCard","styled","motion","div","attrs","whileTap","scale","whileHover","baseStyles","boxShadow","main","connect","photo","place","data","photoData","photos","thePhoto","getPhotoUrl","reference","placeholderImage","className","name","width","level","content","subheader","type","justify","lg","userRatingTotal","allowHalf","disabled","defaultValue","rating","TypeSection","section","greyColor","hover","primaryColor","media","mobile","typeSectionVariants","transition","staggerChildren","when","hidden","typeSectionItems","opacity","y","CategoryList","onClick","currentType","variants","animate","initial","map","label","useInternational","useState","userLocation","setUserLocation","fetchUserLocation","a","Axios","res","ipAddress","useEffect","countryCode","country_code","countryName","country_name","isInternational","useGeolocation","watchId","accuracy","altitude","altitudeAccuracy","heading","latitude","longitude","speed","timestamp","Date","now","mounted","onEvent","event","coords","onEventError","oldState","__assign","navigator","geolocation","getCurrentPosition","watchPosition","clearWatch"],"mappings":"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","file":"static/js/8.3a9e6fde.chunk.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction unionize(record, config) {\n    var _a = config || {}, _b = _a.value, valProp = _b === void 0 ? undefined : _b, _c = _a.tag, tagProp = _c === void 0 ? 'tag' : _c;\n    var creators = {};\n    var _loop_1 = function (tag) {\n        creators[tag] = (function (value) {\n            var _a, _b;\n            if (value === void 0) { value = {}; }\n            return valProp ? (_a = {}, _a[tagProp] = tag, _a[valProp] = value, _a) : __assign({}, value, (_b = {}, _b[tagProp] = tag, _b));\n        });\n    };\n    for (var tag in record) {\n        _loop_1(tag);\n    }\n    var is = {};\n    var _loop_2 = function (tag) {\n        is[tag] = (function (variant) { return variant[tagProp] === tag; });\n    };\n    for (var tag in record) {\n        _loop_2(tag);\n    }\n    function evalMatch(variant, cases, defaultCase) {\n        if (defaultCase === void 0) { defaultCase = cases.default; }\n        var handler = cases[variant[tagProp]];\n        return handler ? handler(valProp ? variant[valProp] : variant) : defaultCase(variant);\n    }\n    var match = function (first, second) {\n        return second ? evalMatch(first, second) : function (variant) { return evalMatch(variant, first); };\n    };\n    var identity = function (x) { return x; };\n    var transform = function (first, second) {\n        return second\n            ? evalMatch(first, second, identity)\n            : function (variant) { return evalMatch(variant, first, identity); };\n    };\n    var as = {};\n    var _loop_3 = function (expectedTag) {\n        var _a;\n        as[expectedTag] = match((_a = {},\n            _a[expectedTag] = function (x) { return x; },\n            _a.default = function (val) {\n                throw new Error(\"Attempted to cast \" + val[tagProp] + \" as \" + expectedTag);\n            },\n            _a));\n    };\n    for (var expectedTag in record) {\n        _loop_3(expectedTag);\n    }\n    return Object.assign({\n        is: is,\n        as: as,\n        match: match,\n        transform: transform,\n        _Record: record,\n    }, creators);\n}\nexports.unionize = unionize;\n/**\n * Creates a pseudo-witness of a given type. That is, it pretends to return a value of\n * type `T` for any `T`, but it's really just returning `undefined`. This white lie\n * allows convenient expression of the value types in the record you pass to `unionize`.\n */\nexports.ofType = function () { return undefined; };\nexports.default = unionize;\n//# sourceMappingURL=index.js.map","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { useState, useEffect, createElement, Component } from 'react';\nimport invariant from 'invariant';\n\nvar INSTANCE_MAP = new Map();\nvar OBSERVER_MAP = new Map();\n/**\n * Monitor element, and trigger callback when element becomes visible\n * @param element {HTMLElement}\n * @param callback {Function} Called with inView\n * @param options {Object} InterSection observer options\n * @param options.threshold {Number} Number between 0 and 1, indicating how much of the element should be visible before triggering\n * @param options.root {HTMLElement} It should have a unique id or data-intersection-id in order for the Observer to reused.\n * @param options.rootMargin {String} The CSS margin to apply to the root element.\n * @param rootId {String} Unique identifier for the root element, to enable reusing the IntersectionObserver\n */\n\nfunction observe(element, callback, options, rootId) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // Validate that the element is not being used in another <Observer />\n  invariant(!INSTANCE_MAP.has(element), \"react-intersection-observer: Trying to observe %s, but it's already being observed by another instance.\\nMake sure the `ref` is only used by a single <Observer /> instance.\\n\\n%s\", element); // IntersectionObserver needs a threshold to trigger, so set it to 0 if it's not defined.\n  // Modify the options object, since it's used in the onChange handler.\n\n  if (!options.threshold) options.threshold = 0;\n  var _options = options,\n      root = _options.root,\n      rootMargin = _options.rootMargin,\n      threshold = _options.threshold;\n  if (!element || !callback) return;\n  var observerId = rootMargin ? threshold.toString() + \"_\" + rootMargin : threshold.toString();\n\n  if (root) {\n    observerId = rootId ? rootId + \"_\" + observerId : null;\n  }\n\n  var observerInstance = observerId ? OBSERVER_MAP.get(observerId) : null;\n\n  if (!observerInstance) {\n    observerInstance = new IntersectionObserver(onChange, options);\n    if (observerId) OBSERVER_MAP.set(observerId, observerInstance);\n  }\n\n  var instance = {\n    callback: callback,\n    visible: false,\n    options: options,\n    observerId: observerId,\n    observer: !observerId ? observerInstance : undefined\n  };\n  INSTANCE_MAP.set(element, instance);\n  observerInstance.observe(element);\n  return instance;\n}\n/**\n * Stop observing an element. If an element is removed from the DOM or otherwise destroyed,\n * make sure to call this method.\n * @param element {HTMLElement}\n */\n\nfunction unobserve(element) {\n  if (!element) return;\n  var instance = INSTANCE_MAP.get(element);\n\n  if (instance) {\n    var observerId = instance.observerId,\n        observer = instance.observer;\n    var observerInstance = observerId ? OBSERVER_MAP.get(observerId) : observer;\n\n    if (observerInstance) {\n      observerInstance.unobserve(element);\n    } // Check if we are still observing any elements with the same threshold.\n\n\n    var itemsLeft = false;\n\n    if (observerId) {\n      INSTANCE_MAP.forEach(function (item, key) {\n        if (item && item.observerId === observerId && key !== element) {\n          itemsLeft = true;\n        }\n      });\n    }\n\n    if (observerInstance && !itemsLeft) {\n      // No more elements to observe for threshold, disconnect observer\n      observerInstance.disconnect();\n      OBSERVER_MAP.delete(observerId);\n    } // Remove reference to element\n\n\n    INSTANCE_MAP.delete(element);\n  }\n}\n\nfunction onChange(changes) {\n  changes.forEach(function (intersection) {\n    var isIntersecting = intersection.isIntersecting,\n        intersectionRatio = intersection.intersectionRatio,\n        target = intersection.target;\n    var instance = INSTANCE_MAP.get(target); // Firefox can report a negative intersectionRatio when scrolling.\n\n    if (instance && intersectionRatio >= 0) {\n      var options = instance.options;\n      var _inView = false;\n\n      if (Array.isArray(options.threshold)) {\n        // If threshold is an array, check if any of them intersects. This just triggers the onChange event multiple times.\n        _inView = options.threshold.some(function (threshold) {\n          return instance.visible ? intersectionRatio > threshold : intersectionRatio >= threshold;\n        });\n      } else if (options.threshold !== undefined) {\n        // Trigger on 0 ratio only when not visible. This is fallback for browsers without isIntersecting support\n        _inView = instance.visible ? intersectionRatio > options.threshold : intersectionRatio >= options.threshold;\n      }\n\n      if (isIntersecting !== undefined) {\n        // If isIntersecting is defined, ensure that the element is actually intersecting.\n        // Otherwise it reports a threshold of 0\n        _inView = _inView && isIntersecting;\n      }\n\n      instance.visible = _inView;\n      instance.callback(_inView, intersectionRatio);\n    }\n  });\n}\n\nfunction useInView(ref, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // $FlowFixMe - useState is not exposed in React Flow lib yet\n  var _React$useState = useState(false),\n      isInView = _React$useState[0],\n      setInView = _React$useState[1]; // $FlowFixMe - useEffect is not exposed in React Flow lib yet\n\n\n  useEffect(function () {\n    if (ref.current) {\n      observe(ref.current, function (inView) {\n        setInView(inView);\n\n        if (inView && options.triggerOnce) {\n          // If it should only trigger once, unobserve the element after it's inView\n          unobserve(ref.current);\n        }\n      }, {\n        threshold: options.threshold,\n        root: options.root,\n        rootMargin: options.rootMargin\n      }, options.rootId);\n    }\n\n    return function () {\n      unobserve(ref.current);\n    };\n  }, [options.threshold, options.root, options.rootMargin, options.rootId]);\n  return isInView;\n}\n\n/**\n * Monitors scroll, and triggers the children function with updated props\n *\n <InView>\n {({inView, ref}) => (\n   <h1 ref={ref}>{`${inView}`}</h1>\n )}\n </InView>\n */\nvar InView =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InView, _React$Component);\n\n  function InView() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      inView: false,\n      intersectionRatio: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"node\", null);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleNode\", function (node) {\n      if (_this.node) unobserve(_this.node);\n      _this.node = node;\n\n      _this.observeNode();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleChange\", function (inView, intersectionRatio) {\n      _this.setState({\n        inView: inView,\n        intersectionRatio: intersectionRatio\n      });\n\n      if (_this.props.onChange) {\n        _this.props.onChange(inView, intersectionRatio);\n      }\n    });\n\n    return _this;\n  }\n\n  var _proto = InView.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.hasOwnProperty('render')) {\n        console.warn(\"react-intersection-observer: \\\"render\\\" is deprecated, and should be replaced with \\\"children\\\"\", this.node);\n      }\n\n      invariant(this.node, \"react-intersection-observer: No DOM node found. Make sure you forward \\\"ref\\\" to the root DOM element you want to observe.\");\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // If a IntersectionObserver option changed, reinit the observer\n    if (prevProps.rootMargin !== this.props.rootMargin || prevProps.root !== this.props.root || prevProps.threshold !== this.props.threshold) {\n      unobserve(this.node);\n      this.observeNode();\n    }\n\n    if (prevState.inView !== this.state.inView) {\n      if (this.state.inView && this.props.triggerOnce) {\n        unobserve(this.node);\n        this.node = null;\n      }\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.node) {\n      unobserve(this.node);\n      this.node = null;\n    }\n  };\n\n  _proto.observeNode = function observeNode() {\n    if (!this.node) return;\n    var _this$props = this.props,\n        threshold = _this$props.threshold,\n        root = _this$props.root,\n        rootMargin = _this$props.rootMargin,\n        rootId = _this$props.rootId;\n    observe(this.node, this.handleChange, {\n      threshold: threshold,\n      root: root,\n      rootMargin: rootMargin\n    }, rootId);\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        render = _this$props2.render,\n        tag = _this$props2.tag,\n        triggerOnce = _this$props2.triggerOnce,\n        threshold = _this$props2.threshold,\n        root = _this$props2.root,\n        rootId = _this$props2.rootId,\n        rootMargin = _this$props2.rootMargin,\n        props = _objectWithoutPropertiesLoose(_this$props2, [\"children\", \"render\", \"tag\", \"triggerOnce\", \"threshold\", \"root\", \"rootId\", \"rootMargin\"]);\n\n    var _this$state = this.state,\n        inView = _this$state.inView,\n        intersectionRatio = _this$state.intersectionRatio;\n    var renderMethod = children || render;\n\n    if (typeof renderMethod === 'function') {\n      return renderMethod({\n        inView: inView,\n        intersectionRatio: intersectionRatio,\n        ref: this.handleNode\n      });\n    }\n\n    return createElement(tag || 'div', _extends({\n      ref: this.handleNode\n    }, props), children);\n  };\n\n  return InView;\n}(Component);\n\n_defineProperty(InView, \"defaultProps\", {\n  threshold: 0,\n  triggerOnce: false\n});\n\nexport default InView;\nexport { InView, useInView };\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from \"react\";\nimport Observer from \"react-intersection-observer\";\nimport { unionize, ofType, UnionOf } from \"unionize\";\n\n/**\n * Valid props for LazyImage components\n */\nexport type CommonLazyImageProps = ImageProps & {\n  // NOTE: if you add props here, remember to destructure them out of being\n  // passed to the children, in the render() callback.\n\n  /** Whether to skip checking for viewport and always show the 'actual' component\n   * @see https://github.com/fpapado/react-lazy-images/#eager-loading--server-side-rendering-ssr\n   */\n  loadEagerly?: boolean;\n\n  /** Subset of props for the IntersectionObserver\n   * @see https://github.com/thebuilder/react-intersection-observer#props\n   */\n  observerProps?: ObserverProps;\n\n  /** Use the Image Decode API;\n   * The call to a new HTML <img> element’s decode() function returns a promise, which,\n   * when fulfilled, ensures that the image can be appended to the DOM without causing\n   * a decoding delay on the next frame.\n   *  @see: https://www.chromestatus.com/feature/5637156160667648\n   */\n  experimentalDecode?: boolean;\n\n  /** Whether to log out internal state transitions for the component */\n  debugActions?: boolean;\n\n  /** Delay a certain duration before starting to load, in ms.\n   * This can help avoid loading images while the user scrolls quickly past them.\n   * TODO: naming things.\n   */\n  debounceDurationMs?: number;\n};\n\n/** Valid props for LazyImageFull */\nexport interface LazyImageFullProps extends CommonLazyImageProps {\n  /** Children should be either a function or a node */\n  children: (args: RenderCallbackArgs) => React.ReactNode;\n}\n\n/** Values that the render props take */\nexport interface RenderCallbackArgs {\n  imageState: ImageState;\n  imageProps: ImageProps;\n  /** When not loading eagerly, a ref to bind to the DOM element. This is needed for the intersection calculation to work. */\n  ref?: React.RefObject<any>;\n}\n\nexport interface ImageProps {\n  /** The source of the image to load */\n  src: string;\n\n  /** The source set of the image to load */\n  srcSet?: string;\n\n  /** The alt text description of the image you are loading */\n  alt?: string;\n\n  /** Sizes descriptor */\n  sizes?: string;\n}\n\n/** Subset of react-intersection-observer's props */\nexport interface ObserverProps {\n  /**\n   * Margin around the root that expands the area for intersection.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin\n   * @default \"50px 0px\"\n   * @example Declaration same as CSS margin:\n   *  `\"10px 20px 30px 40px\"` (top, right, bottom, left).\n   */\n  rootMargin?: string;\n\n  /** Number between 0 and 1 indicating the the percentage that should be\n   * visible before triggering.\n   * @default `0.01`\n   */\n  threshold?: number;\n}\n\n/** States that the image loading can be in.\n * Used together with LazyImageFull render props.\n * External representation of the internal state.\n * */\nexport enum ImageState {\n  NotAsked = \"NotAsked\",\n  Loading = \"Loading\",\n  LoadSuccess = \"LoadSuccess\",\n  LoadError = \"LoadError\"\n}\n\n/** The component's state */\nconst LazyImageFullState = unionize({\n  NotAsked: {},\n  Buffering: {},\n  // Could try to make it Promise<HTMLImageElement>,\n  // but we don't use the element anyway, and we cache promises\n  Loading: {},\n  LoadSuccess: {},\n  LoadError: ofType<{ msg: string }>()\n});\n\ntype LazyImageFullState = UnionOf<typeof LazyImageFullState>;\n\n/** Actions that change the component's state.\n * These are not unlike Actions in Redux or, the ones I'm inspired by,\n * Msg in Elm.\n */\nconst Action = unionize({\n  ViewChanged: ofType<{ inView: boolean }>(),\n  BufferingEnded: {},\n  // MAYBE: Load: {},\n  LoadSuccess: {},\n  LoadError: ofType<{ msg: string }>()\n});\n\ntype Action = UnionOf<typeof Action>;\n\n/** Commands (Cmd) describe side-effects as functions that take the instance */\n// FUTURE: These should be tied to giving back a Msg / asynchronoulsy giving a Msg with conditions\ntype Cmd = (instance: LazyImageFull) => void;\n\n/** The output from a reducer is the next state and maybe a command */\ntype ReducerResult = {\n  nextState: LazyImageFullState;\n  cmd?: Cmd;\n};\n\n///// Commands, things that perform side-effects /////\n/** Get a command that sets a buffering Promise */\nconst getBufferingCmd = (durationMs: number): Cmd => instance => {\n  // Make cancelable buffering Promise\n  const bufferingPromise = makeCancelable(delayedPromise(durationMs));\n\n  // Kick off promise chain\n  bufferingPromise.promise\n    .then(() => instance.update(Action.BufferingEnded()))\n    .catch(\n      _reason => {}\n      //console.log({ isCanceled: _reason.isCanceled })\n    );\n\n  // Side-effect; set the promise in the cache\n  instance.promiseCache.buffering = bufferingPromise;\n};\n\n/** Get a command that sets an image loading Promise */\nconst getLoadingCmd = (\n  imageProps: ImageProps,\n  experimentalDecode?: boolean\n): Cmd => instance => {\n  // Make cancelable loading Promise\n  const loadingPromise = makeCancelable(\n    loadImage(imageProps, experimentalDecode)\n  );\n\n  // Kick off request for Image and attach listeners for response\n  loadingPromise.promise\n    .then(_res => instance.update(Action.LoadSuccess({})))\n    .catch(e => {\n      // If the Loading Promise was canceled, it means we have stopped\n      // loading due to unmount, rather than an error.\n      if (!e.isCanceled) {\n        // TODO: think more about the error here\n        instance.update(Action.LoadError({ msg: \"Failed to load\" }));\n      }\n    });\n\n  // Side-effect; set the promise in the cache\n  instance.promiseCache.loading = loadingPromise;\n};\n\n/** Command that cancels the buffering Promise */\nconst cancelBufferingCmd: Cmd = instance => {\n  // Side-effect; cancel the promise in the cache\n  // We know this exists if we are in a Buffering state\n  instance.promiseCache.buffering.cancel();\n};\n\n/**\n * Component that preloads the image once it is in the viewport,\n * and then swaps it in. Takes a render prop that allows to specify\n * what is rendered based on the loading state.\n */\nexport class LazyImageFull extends React.Component<\n  LazyImageFullProps,\n  LazyImageFullState\n> {\n  static displayName = \"LazyImageFull\";\n\n  /** A central place to store promises.\n   * A bit silly, but passing promsises directly in the state\n   * was giving me weird timing issues. This way we can keep\n   * the promises in check, and pick them up from the respective methods.\n   * FUTURE: Could pass the relevant key in Buffering and Loading, so\n   * that at least we know where they are from a single source.\n   */\n  promiseCache: {\n    [key: string]: CancelablePromise;\n  } = {};\n\n  initialState = LazyImageFullState.NotAsked();\n\n  /** Emit the next state based on actions.\n   *  This is the core of the component!\n   */\n  static reducer(\n    action: Action,\n    prevState: LazyImageFullState,\n    props: LazyImageFullProps\n  ): ReducerResult {\n    return Action.match(action, {\n      ViewChanged: ({ inView }) => {\n        if (inView === true) {\n          // If src is not specified, then there is nothing to preload; skip to Loaded state\n          if (!props.src) {\n            return { nextState: LazyImageFullState.LoadSuccess() }; // Error wtf\n          } else {\n            // If in view, only load something if NotAsked, otherwise leave untouched\n            return LazyImageFullState.match(prevState, {\n              NotAsked: () => {\n                // If debounce is specified, then start buffering\n                if (!!props.debounceDurationMs) {\n                  return {\n                    nextState: LazyImageFullState.Buffering(),\n                    cmd: getBufferingCmd(props.debounceDurationMs)\n                  };\n                } else {\n                  // If no debounce is specified, then start loading immediately\n                  return {\n                    nextState: LazyImageFullState.Loading(),\n                    cmd: getLoadingCmd(props, props.experimentalDecode)\n                  };\n                }\n              },\n              // Do nothing in other states\n              default: () => ({ nextState: prevState })\n            });\n          }\n        } else {\n          // If out of view, cancel if Buffering, otherwise leave untouched\n          return LazyImageFullState.match(prevState, {\n            Buffering: () => ({\n              nextState: LazyImageFullState.NotAsked(),\n              cmd: cancelBufferingCmd\n            }),\n            // Do nothing in other states\n            default: () => ({ nextState: prevState })\n          });\n        }\n      },\n      // Buffering has ended/succeeded, kick off request for image\n      BufferingEnded: () => ({\n        nextState: LazyImageFullState.Loading(),\n        cmd: getLoadingCmd(props, props.experimentalDecode)\n      }),\n      // Loading the image succeeded, simple\n      LoadSuccess: () => ({ nextState: LazyImageFullState.LoadSuccess() }),\n      // Loading the image failed, simple\n      LoadError: e => ({ nextState: LazyImageFullState.LoadError(e) })\n    });\n  }\n\n  constructor(props: LazyImageFullProps) {\n    super(props);\n    this.state = this.initialState;\n\n    // Bind methods\n    this.update = this.update.bind(this);\n  }\n\n  update(action: Action) {\n    // Get the next state and any effects\n    const { nextState, cmd } = LazyImageFull.reducer(\n      action,\n      this.state,\n      this.props\n    );\n\n    // Debugging\n    if (this.props.debugActions) {\n      if (process.env.NODE_ENV === \"production\") {\n        console.warn(\n          'You are running LazyImage with debugActions=\"true\" in production. This might have performance implications.'\n        );\n      }\n      console.log({ action, prevState: this.state, nextState });\n    }\n\n    // Actually set the state, and kick off any effects after that\n    this.setState(nextState, () => cmd && cmd(this));\n  }\n\n  componentWillUnmount() {\n    // Clear the Promise Cache\n    if (this.promiseCache.loading) {\n      // NOTE: This does not cancel the request, only the callback.\n      // We weould need fetch() and an AbortHandler for that.\n      this.promiseCache.loading.cancel();\n    }\n    if (this.promiseCache.buffering) {\n      this.promiseCache.buffering.cancel();\n    }\n    this.promiseCache = {};\n  }\n\n  // Render function\n  render() {\n    // This destructuring is silly\n    const {\n      children,\n      loadEagerly,\n      observerProps,\n      experimentalDecode,\n      debounceDurationMs,\n      debugActions,\n      ...imageProps\n    } = this.props;\n\n    if (loadEagerly) {\n      // If eager, skip the observer and view changing stuff; resolve the imageState as loaded.\n      return children({\n        // We know that the state tags and the enum match up\n        imageState: LazyImageFullState.LoadSuccess().tag as ImageState,\n        imageProps\n      });\n    } else {\n      return (\n        <Observer\n          rootMargin=\"50px 0px\"\n          // TODO: reconsider threshold\n          threshold={0.01}\n          {...observerProps}\n          onChange={inView => this.update(Action.ViewChanged({ inView }))}\n        >\n          {({ ref }) =>\n            children({\n              // We know that the state tags and the enum match up, apart\n              // from Buffering not being exposed\n              imageState:\n                this.state.tag === \"Buffering\"\n                  ? ImageState.Loading\n                  : (this.state.tag as ImageState),\n              imageProps,\n              ref\n            })\n          }\n        </Observer>\n      );\n    }\n  }\n}\n\n///// Utilities /////\n\n/** Promise constructor for loading an image */\nconst loadImage = (\n  { src, srcSet, alt, sizes }: ImageProps,\n  experimentalDecode = false\n) =>\n  new Promise((resolve, reject) => {\n    const image = new Image();\n    if (srcSet) {\n      image.srcset = srcSet;\n    }\n    if (alt) {\n      image.alt = alt;\n    }\n    if (sizes) {\n      image.sizes = sizes;\n    }\n    image.src = src;\n\n    /** @see: https://www.chromestatus.com/feature/5637156160667648 */\n    if (experimentalDecode && \"decode\" in image) {\n      return (\n        image\n          // NOTE: .decode() is not in the TS defs yet\n          // TODO: consider writing the .decode() definition and sending a PR\n          //@ts-ignore\n          .decode()\n          .then((image: HTMLImageElement) => resolve(image))\n          .catch((err: any) => reject(err))\n      );\n    }\n\n    image.onload = resolve;\n    image.onerror = reject;\n  });\n\n/** Promise that resolves after a specified number of ms */\nconst delayedPromise = (ms: number) =>\n  new Promise(resolve => setTimeout(resolve, ms));\n\ninterface CancelablePromise {\n  promise: Promise<{}>;\n  cancel: () => void;\n}\n\n/** Make a Promise \"cancelable\".\n *\n * Rejects with {isCanceled: true} if canceled.\n *\n * The way this works is by wrapping it with internal hasCanceled_ state\n * and checking it before resolving.\n */\nconst makeCancelable = (promise: Promise<any>): CancelablePromise => {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise.then(\n      (val: any) => (hasCanceled_ ? reject({ isCanceled: true }) : resolve(val))\n    );\n    promise.catch(\n      (error: any) =>\n        hasCanceled_ ? reject({ isCanceled: true }) : reject(error)\n    );\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    }\n  };\n};\n","import React from \"react\";\nimport {\n  LazyImageFull,\n  CommonLazyImageProps,\n  ImageState,\n  ImageProps\n} from \"./LazyImageFull\";\n\n/**\n * Valid props for LazyImage\n */\nexport interface LazyImageRenderPropArgs {\n  imageProps: ImageProps;\n}\n\nexport interface RefArg {\n  /** When not loading eagerly, a ref to bind to the DOM element. This is needed for the intersection calculation to work. */\n  ref?: React.RefObject<any>;\n}\n\nexport interface LazyImageProps extends CommonLazyImageProps {\n  /** Component to display once image has loaded */\n  actual: (args: LazyImageRenderPropArgs) => React.ReactElement<{}>;\n\n  /** Component to display while image has not been requested\n   * @default: undefined\n   */\n  placeholder: (\n    args: LazyImageRenderPropArgs & RefArg\n  ) => React.ReactElement<{}>;\n\n  /** Component to display while the image is loading\n   * @default placeholder, if defined\n   */\n  loading?: () => React.ReactElement<{}>;\n\n  /** Component to display if the image fails to load\n   * @default actual (broken image)\n   */\n  error?: () => React.ReactElement<{}>;\n}\n\n/**\n * Component that preloads the image once it is in the viewport,\n * and then swaps it in. Has predefined rendering logic, but the\n * specifics are up to the caller.\n */\nexport const LazyImage: React.StatelessComponent<LazyImageProps> = ({\n  actual,\n  placeholder,\n  loading,\n  error,\n  ...rest\n}) => (\n  <LazyImageFull {...rest}>\n    {({ imageState, imageProps, ref }) => {\n      // Call the appropriate render callback based on the state\n      // and the props specified, passing on relevant props.\n      switch (imageState) {\n        case ImageState.NotAsked:\n          return !!placeholder && placeholder({ imageProps, ref });\n\n        case ImageState.Loading:\n          // Only render loading if specified, otherwise placeholder\n          return !!loading\n            ? loading()\n            : !!placeholder && placeholder({ imageProps, ref });\n\n        case ImageState.LoadSuccess:\n          return actual({ imageProps });\n\n        case ImageState.LoadError:\n          // Only render error if specified, otherwise actual (broken image)\n          return !!error ? error() : actual({ imageProps });\n      }\n    }}\n  </LazyImageFull>\n);\n\nLazyImage.displayName = \"LazyImage\";\n","import React from \"react\"\nimport { motion } from \"framer-motion\"\nimport styled from \"styled-components\"\nimport { Heading, Rating } from \"components\"\nimport { baseStyles } from \"styles/base\"\nimport { connect } from \"react-redux\"\nimport { getPhotoUrl, placeholderImage } from \"helpers\"\nimport { Row, Col } from \"antd\"\nimport { Trans } from \"@lingui/macro\"\nimport { LazyImage } from \"react-lazy-images\"\n\nconst StyledCard = styled(motion.div).attrs({\n\twhileTap: { scale: 0.94 },\n\twhileHover: { scale: 1.03 }\n})`\n\tborder-radius: 10px;\n\tbox-shadow: ${baseStyles.boxShadow.main};\n\tbackground-color: #fff;\n\theight: 300px;\n\tmax-height: 300px;\n\t.details {\n\t\ttext-align: center;\n\t\tpadding: 0;\n\t\tarticle.ant-typography {\n\t\t\twidth: 90%;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\th4 {\n\t\t\tfont-size: 1em;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow-x: hidden;\n\t\t\tmargin-bottom: 0.5em;\n\t\t}\n\t}\n\t.image-wrapper {\n\t\tmax-height: 200px;\n\t\toverflow-y: hidden;\n\t\tmargin-bottom: 1.8em;\n\t\t> img {\n\t\t\tmin-height: 200px;\n\t\t\tobject-fit: cover;\n\t\t\tborder-radius: 8px 8px 0 0;\n\t\t}\n\t}\n\t.rating-section,\n\t.price-section {\n\t\t.ant-rate-star {\n\t\t\tmargin: 0;\n\t\t}\n\t}\n\t.rating-section {\n\t\tfont-size: 0.8em;\n\t}\n`\n\nfunction PlaceCard({ data = {}, photo, ...props }) {\n\tconst photoData = data.photos || {}\n\tconst thePhoto = photoData ? getPhotoUrl(photoData.reference) : placeholderImage\n\n\treturn (\n\t\t<StyledCard {...props}>\n\t\t\t<section className=\"details\">\n\t\t\t\t<div className=\"image-wrapper\">\n\t\t\t\t\t<LazyImage\n\t\t\t\t\t\tsrc={thePhoto}\n\t\t\t\t\t\talt={data.name}\n\t\t\t\t\t\tplaceholder={({ imageProps, ref }) => <img ref={ref} src={placeholderImage} alt={imageProps.alt} />}\n\t\t\t\t\t\tactual={({ imageProps }) => <img {...imageProps} width=\"100%\" alt=\"\" />}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Heading\n\t\t\t\t\tlevel={4}\n\t\t\t\t\tcontent={data.name}\n\t\t\t\t\tsubheader={\n\t\t\t\t\t\t<Row type=\"flex\" justify=\"center\">\n\t\t\t\t\t\t\t<Col lg={20}>\n\t\t\t\t\t\t\t\t{data.userRatingTotal ? (\n\t\t\t\t\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t\t\t\t\t<Rating allowHalf disabled defaultValue={data.rating} />\n\t\t\t\t\t\t\t\t\t\t&nbsp; ({data.userRatingTotal})\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div className=\"rating-section\">\n\t\t\t\t\t\t\t\t\t\t<Trans>No rating yet</Trans>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{/* <div className=\"price-section\">\n                                    <Rating\n                                        color=\"primary\"\n                                        disabled\n                                        allowHalf\n                                        defaultValue={data.price_level}\n                                        character={<Icon type=\"dollar\" />}\n                                    />\n                                </div> */}\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</section>\n\t\t</StyledCard>\n\t)\n}\n\nconst mapState = ({ place }) => ({ photo: place.photo })\n\nexport default connect(mapState)(PlaceCard)\n","import React from \"react\"\nimport styled from \"styled-components\"\nimport { motion } from \"framer-motion\"\nimport { baseStyles } from \"styles/base\"\nimport { media } from \"helpers\"\n\nconst TypeSection = styled(motion.section)`\n\tdisplay: flex;\n\tpadding: 1em 0;\n\tmargin-bottom: 2em;\n\tflex-wrap: nowrap;\n\toverflow-x: scroll;\n\twidth: auto;\n\t-webkit-overflow-scrolling: touch;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n\t.type-button {\n\t\tcolor: ${baseStyles.greyColor};\n\t\tmargin-right: 1em;\n\t\tmin-width: 180px;\n\t\ttext-align: center;\n\t\tbackground-color: #fff;\n\t\tbox-shadow: ${baseStyles.boxShadow.hover};\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 1em;\n\t\tline-height: 1;\n\t\tborder-radius: 5px;\n\t\tcursor: pointer;\n\t\t&:hover,\n\t\t&.active {\n\t\t\tbackground-color: ${baseStyles.primaryColor};\n\t\t\tcolor: #fff;\n\t\t}\n\t}\n\n\t${media.mobile`\n        .type-button {\n            min-width: 120px;\n        }\n    `}\n`\n\nconst typeSectionVariants = {\n\tvisible: { transition: { staggerChildren: 0.1, when: \"beforeChildren\" } },\n\thidden: { transition: { when: \"afterChildren\" } }\n}\n\nconst typeSectionItems = {\n\tvisible: { opacity: 1, y: 0 },\n\thidden: { opacity: 0, y: -50 }\n}\n\nexport default function CategoryList({ options, onClick, type }) {\n\treturn (\n\t\t<TypeSection currentType={type} variants={typeSectionVariants} animate=\"visible\" initial=\"hidden\">\n\t\t\t{(options || []).map(item => (\n\t\t\t\t<motion.div\n\t\t\t\t\tkey={item.value}\n\t\t\t\t\tvalue={item.value}\n\t\t\t\t\tvariants={typeSectionItems}\n\t\t\t\t\twhileTap={{ scale: 0.95 }}\n\t\t\t\t\tclassName={type === item.value ? \"type-button active\" : \"type-button\"}\n\t\t\t\t\tonClick={() => onClick(item.value)}\n\t\t\t\t>\n\t\t\t\t\t{item.label}\n\t\t\t\t</motion.div>\n\t\t\t))}\n\t\t</TypeSection>\n\t)\n}\n","import { useEffect, useState } from \"react\"\nimport Axios from \"axios\"\n\nconst useInternational = () => {\n\tconst [userLocation, setUserLocation] = useState({})\n\n\tconst fetchUserLocation = async () => {\n\t\tconst ipAddress = await Axios.get(`https://json.geoiplookup.io/`).then(res => res.data)\n\t\tsetUserLocation(ipAddress)\n\t}\n\n\tuseEffect(() => {\n\t\tfetchUserLocation()\n\t}, [])\n\n\treturn {\n\t\tcountryCode: userLocation.country_code,\n\t\tcountryName: userLocation.country_name,\n\t\tisInternational: userLocation.country_code !== \"SG\" && userLocation.country_code !== \"ID\"\n\t}\n}\n\nexport default useInternational\n","import { __assign } from \"tslib\";\nimport { useEffect, useState } from 'react';\nvar useGeolocation = function (options) {\n    var _a = useState({\n        loading: true,\n        accuracy: null,\n        altitude: null,\n        altitudeAccuracy: null,\n        heading: null,\n        latitude: null,\n        longitude: null,\n        speed: null,\n        timestamp: Date.now(),\n    }), state = _a[0], setState = _a[1];\n    var mounted = true;\n    var watchId;\n    var onEvent = function (event) {\n        if (mounted) {\n            setState({\n                loading: false,\n                accuracy: event.coords.accuracy,\n                altitude: event.coords.altitude,\n                altitudeAccuracy: event.coords.altitudeAccuracy,\n                heading: event.coords.heading,\n                latitude: event.coords.latitude,\n                longitude: event.coords.longitude,\n                speed: event.coords.speed,\n                timestamp: event.timestamp,\n            });\n        }\n    };\n    var onEventError = function (error) {\n        return mounted && setState(function (oldState) { return (__assign(__assign({}, oldState), { loading: false, error: error })); });\n    };\n    useEffect(function () {\n        navigator.geolocation.getCurrentPosition(onEvent, onEventError, options);\n        watchId = navigator.geolocation.watchPosition(onEvent, onEventError, options);\n        return function () {\n            mounted = false;\n            navigator.geolocation.clearWatch(watchId);\n        };\n    }, []);\n    return state;\n};\nexport default useGeolocation;\n"],"sourceRoot":""}