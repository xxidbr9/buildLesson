{"version":3,"sources":["pages/Tutor/Profile/_CompleteProfileModal.jsx"],"names":["withI18n","section","userData","onModal","i18n","props","profileCompletionModal","setProfileCompletionModal","useMutation","mutateProfileCompletionRequest","client","newClient","onCompleted","data","success","_","onError","err","renderError","completionRequest","sectionIndex","profileSections","findIndex","item","value","initialValues","messages","isMale","gender","visible","footer","onCancel","style","paddingLeft","paddingRight","bold","level","marginBottom","content","subheader","firstName","onSubmit","values","setSubmitting","userPvid","Number","pvid","variables","finally","validate","errors","render","handleSubmit","layout","name","label","placeholder","options","textarea","rows","size","type","icon"],"mappings":"2QA+FeA,gCAjFf,YAAqF,IAApDC,EAAmD,EAAnDA,QAAmD,IAA1CC,gBAA0C,MAA/B,GAA+B,EAA3BC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,KAASC,EAAS,uDAC3EC,EAAsDH,EAAtDG,uBAAwBC,EAA8BJ,EAA9BI,0BADmD,EAGvDC,YAAYC,IAAgC,CACvEC,OAAQC,cACRC,YAAa,SAAAC,GACZN,GAA0B,GAC1B,IAAQO,QAAQV,EAAKW,EAAE,oDAExBC,QAAS,SAAAC,GAAG,OAAIC,YAAYD,MANtBE,EAH4E,oBAY7EC,EAAeC,IAAgBC,WAAU,SAAAC,GAAI,OAAIA,EAAKC,QAAUvB,KAEhEwB,EAAgB,CACrBxB,SAAUoB,IAAgBD,IAAiB,IAAII,OAAS,GACxDE,SAAUtB,EAAKW,EAAE,mNAIZY,EAA6B,MAApBzB,EAAS0B,QAAsC,MAApB1B,EAAS0B,OAOnD,OACC,kBAAC,IAAD,iBACKvB,EADL,CAECwB,QAASvB,EACTwB,QAAQ,EACRC,SAAU,kBAAMxB,GAA0B,MAE1C,kBAAC,IAAD,CAASyB,MAAO,CAAEC,YAAa,MAAOC,aAAc,QACnD,kBAAC,IAAD,CACCC,MAAI,EACJC,MAAO,EACPC,aAAa,MACbC,QAAS,kBAAC,QAAD,4BACTC,UACC,kBAAC,QAAD,sGACOrC,EAASsC,UADhB,EACuCb,EAAS,MAAQ,MADxD,EAEEA,EAAS,MAAQ,MAFnB,EAEuCA,EAAS,MAAQ,WAI1D,kBAAC,IAAD,CACCF,cAAeA,EACfgB,SA3BgC,SAACC,EAAD,GAAgC,IAArBC,EAAoB,EAApBA,cAC9CD,EAAM,eAAQA,EAAR,CAAgBE,SAAUC,OAAO3C,EAAS4C,QAChD3B,EAAkB,CAAE4B,UAAWL,IAAUM,SAAQ,kBAAML,GAAc,OA0BlEM,SAAU,SAAAP,GACT,IAAMQ,EAAS,GAEf,OADKR,EAAOzC,UAASiD,EAAOjD,QAAUG,EAAKW,EAAE,+CACtCmC,GAERC,OAAQ,gBAAGC,EAAH,EAAGA,aAAH,OACP,uBAAMC,OAAO,WAAWZ,SAAUW,GACjC,kBAAC,IAAD,CACCE,KAAK,UACLC,MAAO,kBAAC,QAAD,uBACPC,YAAapD,EAAKW,EAAE,8BACpB0C,QAASpC,MAEV,kBAAC,IAAD,CACCqC,UAAQ,EACRJ,KAAK,WACLK,KAAM,EACNJ,MAAO,kBAAC,QAAD,6BACPC,YAAapD,EAAKW,EAAE,sEAErB,kBAAC,IAAD,CAAc6C,KAAK,QAAQC,KAAK,UAAUC,KAAK,QAA/C,QACQ,kBAAC,QAAD","file":"static/js/73.d581c1db.chunk.js","sourcesContent":["import React from \"react\"\nimport { Modal, Heading, Section } from \"components\"\nimport { Formik } from \"formik\"\nimport { Form, message } from \"antd\"\nimport SelectInput from \"components/forms/SelectInput\"\nimport TextInput from \"components/forms/TextInput\"\nimport { SubmitButton } from \"formik-antd\"\nimport { profileSections } from \"dummy\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\nimport { useMutation } from \"react-apollo\"\nimport { mutateProfileCompletionRequest } from \"queries/profile\"\nimport { newClient, renderError } from \"helpers\"\n\nfunction _CompleteProfileModal({ section, userData = {}, onModal, i18n, ...props }) {\n\tconst { profileCompletionModal, setProfileCompletionModal } = onModal\n\n\tconst [completionRequest] = useMutation(mutateProfileCompletionRequest, {\n\t\tclient: newClient(),\n\t\tonCompleted: data => {\n\t\t\tsetProfileCompletionModal(false)\n\t\t\tmessage.success(i18n._(t`Your request has been sent. Thank you! :)`))\n\t\t},\n\t\tonError: err => renderError(err)\n\t})\n\n\tconst sectionIndex = profileSections.findIndex(item => item.value === section)\n\n\tconst initialValues = {\n\t\tsection: (profileSections[sectionIndex] || {}).value || \"\",\n\t\tmessages: i18n._(t`Hi, I really like your Profile. However, I'd like to see more from yours, and I think it's the time for\n\t\t\t\tyou to complete your profile, so that others can have a better insight about yourself as a tutor.`)\n\t}\n\n\tconst isMale = userData.gender === \"M\" || userData.gender === \"m\"\n\n\tconst handleSubmitCompleteProfile = (values, { setSubmitting }) => {\n\t\tvalues = { ...values, userPvid: Number(userData.pvid) }\n\t\tcompletionRequest({ variables: values }).finally(() => setSubmitting(false))\n\t}\n\n\treturn (\n\t\t<Modal\n\t\t\t{...props}\n\t\t\tvisible={profileCompletionModal}\n\t\t\tfooter={false}\n\t\t\tonCancel={() => setProfileCompletionModal(false)}\n\t\t>\n\t\t\t<Section style={{ paddingLeft: \"2em\", paddingRight: \"2em\" }}>\n\t\t\t\t<Heading\n\t\t\t\t\tbold\n\t\t\t\t\tlevel={4}\n\t\t\t\t\tmarginBottom=\"2em\"\n\t\t\t\t\tcontent={<Trans>Request to complete</Trans>}\n\t\t\t\t\tsubheader={\n\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\tHelp {userData.firstName} to improve {isMale ? \"his\" : \"her\"} Profile by requesting{\" \"}\n\t\t\t\t\t\t\t{isMale ? \"him\" : \"her\"} to complete {isMale ? \"his\" : \"her\"} Profile immediately\n\t\t\t\t\t\t</Trans>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={initialValues}\n\t\t\t\t\tonSubmit={handleSubmitCompleteProfile}\n\t\t\t\t\tvalidate={values => {\n\t\t\t\t\t\tconst errors = {}\n\t\t\t\t\t\tif (!values.section) errors.section = i18n._(t`You have to specify the section first`)\n\t\t\t\t\t\treturn errors\n\t\t\t\t\t}}\n\t\t\t\t\trender={({ handleSubmit }) => (\n\t\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\tname=\"section\"\n\t\t\t\t\t\t\t\tlabel={<Trans>Choose section</Trans>}\n\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Choose the section...`)}\n\t\t\t\t\t\t\t\toptions={profileSections}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\ttextarea\n\t\t\t\t\t\t\t\tname=\"messages\"\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\tlabel={<Trans>Your message to them</Trans>}\n\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Describe how important their Profile is once it's completed`)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<SubmitButton size=\"large\" type=\"primary\" icon=\"plus\">\n\t\t\t\t\t\t\t\t&nbsp; <Trans>Submit now</Trans>\n\t\t\t\t\t\t\t</SubmitButton>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</Section>\n\t\t</Modal>\n\t)\n}\n\nexport default withI18n()(_CompleteProfileModal)\n"],"sourceRoot":""}