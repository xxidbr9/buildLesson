(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[38],{1086:function(e,a,t){"use strict";t(282);var n=t(99),r=(t(569),t(1077)),l=t(19),c=t(3),o=t(0),i=t.n(o),s=t(1114),u=t(281),m=t(10);function d(){var e=Object(c.a)(["\n\t> label {\n\t\tdisplay: ",";\n\t}\n"]);return d=function(){return e},e}var b=Object(m.b)(s.a.Group)(d(),(function(e){return e.labelBlock&&"block"}));a.a=function(e){var a=e.options,t=e.name,c=e.label,o=e.independent,m=e.isButton,d=void 0===m||m,p=Object(l.a)(e,["options","name","label","independent","isButton"]);return o?i.a.createElement(n.a.Item,{name:t,label:c},i.a.createElement(r.a.Group,Object.assign({},p,{name:t,buttonStyle:"solid"}),a.map((function(e){return i.a.createElement(r.a.Button,{value:e.value,key:e.value},e.label)})))):i.a.createElement(u.a,{name:t,label:c},d?i.a.createElement(b,Object.assign({},p,{name:t,buttonStyle:"solid"}),a.map((function(e){return i.a.createElement(s.a.Button,{value:e.value,key:e.value},e.label)}))):i.a.createElement(b,Object.assign({},p,{options:a,name:t})))}},1106:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var n=t(19),r=t(0),l=t.n(r),c=t(281),o=t(1372);t(572);function i(e){var a=e.name,t=e.label,r=e.extra,i=Object(n.a)(e,["name","label","extra"]);return l.a.createElement(c.a,{name:a,label:t,extra:r},l.a.createElement(o.a,Object.assign({},i,{name:a})))}},1375:function(e,a,t){"use strict";t.r(a);t(282);var n=t(99),r=t(204),l=(t(91),t(34)),c=(t(98),t(23)),o=(t(154),t(61)),i=t(26),s=t(155),u=t(28),m=t(0),d=t.n(m),b=t(43),p=t(364),g=t(1087),E=t.n(g),f=t(27),v=t(368),j=t(1086),h=t(285),O=(t(1197),t(1340)),y=t(19);function S(e){e.field,e.form;var a=e.label,t=e.options,r=e.name,l=e.independent,c=Object(y.a)(e,["field","form","label","options","name","independent"]);if(l)return d.a.createElement(n.a.Item,{name:r,label:a},d.a.createElement(O.a,Object.assign({},c,{name:r}),(t||[]).map((function(e){return d.a.createElement(O.a.Option,{key:e.value,id:e.id,value:e.value},e.label)}))))}t(1199);var T=t(1201),P=t(281),w=t(1348);function x(e){var a=e.name,t=e.children,r=e.label,l=e.independent,c=Object(y.a)(e,["name","children","label","independent"]);return l?d.a.createElement(n.a.Item,{name:a,label:r},d.a.createElement(T.a,Object.assign({},c,{name:a}),t)):d.a.createElement(P.a,{name:a,label:r},d.a.createElement(w.a,Object.assign({},c,{name:a}),t))}var _=t(13),k=t(177),R=t(1106),C=t(80),I=t(66),B=t(82),J=t(1083),L=t(570),N=t(1096);N.setLocale({mixed:{default:"Eheheheh"}});var Y=N.object().shape({title:N.string().required("You have to fill in the title"),curriculumPvid:N.number().required("You have to choose one of the curriculum"),subjectPvid:N.number().required("You have to choose one of the subject"),priceRange:N.array().required("You have to set the price range"),tutorGender:N.number().required("You have to choose your tutor's preferred gender")}),q=t(5),A=t(73),G=t(29),H=t(100),z={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},F={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:8}}},M=null,V=Object(_.l)("posting_assignment"),D=Object(_.l)("programme");a.default=Object(q.withI18n)()((function(e){var a=e.i18n,t=Object(m.useState)(""),g=Object(u.a)(t,2),O=g[0],y=g[1],T=Object(m.useState)({}),P=Object(u.a)(T,2)[1],w=Object(m.useState)([]),N=Object(u.a)(w,2),U=N[0],K=N[1],Q=Object(m.useState)(!1),W=Object(u.a)(Q,2),X=W[0],Z=W[1],$=Object(f.g)(),ee=[{value:"> 1",label:d.a.createElement(q.Trans,{id:"> 1 year"})},{value:"> 2",label:d.a.createElement(q.Trans,{id:"> 2 year"})},{value:"> 3",label:d.a.createElement(q.Trans,{id:"> 3 year"})},{value:"> 5",label:d.a.createElement(q.Trans,{id:"> 5 year"})}],ae=JSON.parse(localStorage.getItem("userDetails"))||{},te=ae.country||"sg",ne=A.b[te].symbol,re=A.b[te].pricePerHourRange.range[1],le=A.b[te].pricePerHourRange.range[0],ce=A.b[te].assignmentSuggestionRange,oe=h.f.filter((function(e){return e.value.slice(0,2).toLowerCase()===te})),ie=[].concat([{value:"telegram",label:"Telegram"},{value:"tutorsms",label:"TutorSMS"}],Object(s.a)(oe)),se=Object(I.c)(v.b,{client:D,variables:{country:te}}).data,ue=void 0===se?{}:se,me=Object(I.c)(v.c,{client:D,variables:{country:te}}).data,de=void 0===me?{}:me,be=Object(I.a)(B.P,{client:V}),pe=Object(u.a)(be,1)[0],ge=Object(I.b)(B.o,{client:V,onError:function(e){return Object(_.q)(e)}}),Ee=Object(u.a)(ge,1)[0],fe=(ue.getProgrammeLevelList||[]).map((function(e){return{value:Number(e.pvid),label:e.name}})),ve=(de.getProgrammeSubjectList||[]).map((function(e){return{value:Number(e.pvid),label:e.name}})),je=function(){var e={types:[],componentRestrictions:{country:ae.country}};(M=new google.maps.places.Autocomplete(document.getElementById("location"),e)).addListener("place_changed",he)},he=function(){var e=M.getPlace();e.address_components&&(P({location:e.formatted_address}),y(e.formatted_address))},Oe=function(e){return K((function(a){return[].concat(Object(s.a)(a),[{userPvid:Number(e.id)}])}))};return Object(m.useEffect)((function(){ae.country!==G.d&&(Z(!0),o.a.error(d.a.createElement("span",null,a._({id:"You can only post an assignment in"})," ",A.b[te].name,d.a.createElement(b.e,{onClick:function(){return Object(G.f)(ae.country)}},a._({id:"Switch to {0}?",values:{0:A.b[te].name}}))),0)),localStorage.getItem("token")||$.push("/".concat(te,"/login"))}),[$.push]),d.a.createElement(b.n,null,d.a.createElement(b.u,{paddingHorizontal:0},d.a.createElement(l.a,{type:"flex",justify:"center"},d.a.createElement(c.a,{lg:14},d.a.createElement(l.a,{className:"pt2em mb2em"},d.a.createElement(c.a,{lg:2},d.a.createElement(H.a,{type:"icon-task",size:34})),d.a.createElement(c.a,{lg:20},d.a.createElement(b.l,{bold:!0,content:d.a.createElement(q.Trans,{id:"Post an assignment"}),subheader:d.a.createElement(q.Trans,{id:"Need to get tutors fast for your needs? Post an assignment, and they'll notice"}),marginBottom:"2em",level:4}))),d.a.createElement(C.c,{onSubmit:function(e,a){var t=a.setSubmitting,n=e,r=n.isJoin,l=n.priceRange,c=n.broadcast,o=[{startPrice:l[0],endPrice:l[1]}];e=Object(i.a)({},e,{location:O.trim(),joinStudent:U,isJoin:r?1:0,priceRange:o,notes:e.notes||"-",broadcast:c.map((function(e){return{remark:e}})),isActive:1}),Ee({variables:Object(i.a)({},e)}).then((function(){pe(),$.push("/".concat(te,"/assignments"))})).finally((function(){return t(!1)}))},initialValues:{priceRange:[ce[0],ce[1]],broadcast:["telegram"],tutorGender:1},validationSchema:Y},(function(e){var t,l=e.handleSubmit,c=e.values,o=e.isValid,i=e.touched;return d.a.createElement(n.a,Object.assign({},z,{onSubmit:l}),d.a.createElement(k.a,{name:"title",placeholder:a._({id:"E.g. Urgently need a mathematic tutor of Primary 4"}),label:d.a.createElement(q.Trans,{id:"Title of the assignment"})}),d.a.createElement(p.a,{name:"curriculumPvid",label:d.a.createElement(q.Trans,{id:"Select curriculum"}),placeholder:a._({id:"Select curriculum"}),options:fe}),d.a.createElement(p.a,{name:"subjectPvid",label:d.a.createElement(q.Trans,{id:"Select subject"}),placeholder:a._({id:"Select subject"}),options:ve}),d.a.createElement(R.a,{range:!0,name:"priceRange",label:d.a.createElement(q.Trans,{id:"Preferred price"}),extra:d.a.createElement("div",{className:"mb2em"},d.a.createElement(q.Trans,{id:"Suggestion price to set"}),":"," ",d.a.createElement("strong",null,ne," ",Object(_.n)(ce[0])," ")," ","-"," ",d.a.createElement("strong",null,ne," ",Object(_.n)(ce[1])," ")),marks:(t={},Object(r.a)(t,ce[0],ne+ce[0]),Object(r.a)(t,ce[1],ne+ce[1]),t),tipFormatter:function(e){return"".concat(ne).concat(Object(_.n)(e))},step:A.b[te].pricePerHourRange.step,min:le,max:re}),d.a.createElement(j.a,{group:!0,name:"tutorGender",label:d.a.createElement(q.Trans,{id:"Preferred gender"}),options:[{value:1,label:d.a.createElement(q.Trans,{id:"Male"})},{value:0,label:d.a.createElement(q.Trans,{id:"Female"})}]}),d.a.createElement(j.a,{group:!0,name:"tutorExperience",label:d.a.createElement(q.Trans,{id:"Tutor's experience"}),options:ee}),d.a.createElement(E.a,{url:_.h,onLoad:je}),d.a.createElement(k.a,{special:!0,allowClear:!0,id:"location",name:"address",placeholder:a._({id:"Choose your preferred location..."}),label:d.a.createElement(q.Trans,{id:"Preferred location"}),value:O,error:!O&&i.address&&d.a.createElement(q.Trans,{id:"You have to tell your preferred location"}),onChange:function(e){return y(e.target.value)}}),d.a.createElement(x,{name:"isJoin",label:d.a.createElement(q.Trans,{id:"Allow others to join"})},d.a.createElement(q.Trans,{id:"Allow heheh"})),d.a.createElement(S,{independent:!0,name:"joinStudent",label:" ",placeholder:a._({id:"Enter your friends' name"}),disabled:!c.isJoin,onSelect:Oe,options:h.g.map((function(e){var a=e.name;return{id:e.id,value:a,label:a}}))}),d.a.createElement(L.a,{group:!0,name:"broadcast",label:d.a.createElement(q.Trans,{id:"Post this assignment to"}),options:ie}),d.a.createElement(k.a,{textarea:!0,rows:4,name:"notes",placeholder:a._({id:"Some special notes regarding this assignment"}),label:d.a.createElement(q.Trans,{id:"Additional notes"})}),d.a.createElement(n.a.Item,F,d.a.createElement(J.a,{type:"primary",disabled:!o||!O||X},d.a.createElement(q.Trans,{id:"Post the assignment now"}))))}))))))}))}}]);