{"version":3,"sources":["pages/ForgotPassword/NewPassword.jsx"],"names":["validate","values","error","newPassword1","length","newPassword2","withI18n","withRouter","history","location","i18n","useMutation","mutateNewPassword","client","newClient","onCompleted","data","loading","then","push","pathname","country","state","success","onError","err","renderError","handleNewPassword","code","URLSearchParams","search","get","type","justify","align","lg","centered","to","alt","src","width","title","autoHeight","noHover","content","subheader","marginBottom","onSubmit","resetCode","variables","initialValues","handleSubmit","layout","password","name","placeholder","_","label","htmlType","theme"],"mappings":"yUA6FA,IAAMA,EAAW,SAAAC,GAChB,IAAMC,EAAQ,GAOd,OALKD,EAAOE,aACHF,EAAOE,aAAaC,OAAS,IAAGF,EAAMC,aAAe,yBADpCD,EAAMC,aAAe,wCAE1CF,EAAOI,aACHJ,EAAOI,eAAiBJ,EAAOE,eAAcD,EAAMG,aAAe,8BADjDH,EAAMG,aAAe,kCAGxCH,GAGOI,+BAAWC,aAxF1B,YAAmD,IAA5BC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,SAAUC,EAAQ,EAARA,KAAQ,EACrBC,YAAYC,IAAmB,CAC1DC,OAAQC,YAAU,WAClBC,YAAa,SAAAC,GACRA,GACH,IAAQC,QAAQ,kBAAC,QAAD,oCAA2CC,MAAK,WAC/DV,EAAQW,KAAK,CAAEC,SAAS,IAAD,OAAMC,IAAN,4BAAyCC,MAAO,CAAEC,SAAS,SAIrFC,QAAS,SAAAC,GACJA,GAAKC,YAAYD,MAVhBE,EAD0C,oBAgB3CC,EADS,IAAIC,gBAAgBpB,EAASqB,QACxBC,IAAI,SAAW,GAOnC,OACC,kBAAC,IAAD,KACC,uBAAKC,KAAK,OAAOC,QAAQ,SAASC,MAAM,UACvC,uBAAKC,GAAI,IACR,kBAAC,IAAD,CAASC,UAAQ,GAChB,kBAAC,IAAD,CAAMC,GAAE,WAAMhB,MACb,yBAAKiB,IAAI,GAAGC,IAAI,wCAAwCC,MAAM,UAGhE,kBAAC,IAAD,CAAMC,MAAM,GAAGC,YAAU,EAACC,SAAO,GAChC,kBAAC,IAAD,KACC,kBAAC,IAAD,CACCC,QAAS,kBAAC,QAAD,2BACTC,UAAW,kBAAC,QAAD,0EACXC,aAAa,QAEd,kBAAC,IAAD,CAAQC,SArBO,SAAA9C,GACpBA,EAAM,eAAQA,EAAR,CAAgB+C,UAAWpB,IACjCD,EAAkB,CAAEsB,UAAU,eAAMhD,MAmBCD,SAAUA,EAAUkD,cAAe,CAAE/C,aAAc,GAAIE,aAAc,MACnG,gBAAG8C,EAAH,EAAGA,aAAH,OACA,uBAAMJ,SAAUI,EAAcC,OAAO,YACpC,kBAAC,IAAD,CACCC,UAAQ,EACRC,KAAK,eACLtB,KAAK,WACLuB,YAAa7C,EAAK8C,EAAE,mCACpBC,MAAO,kBAAC,QAAD,uBAER,kBAAC,IAAD,CACCJ,UAAQ,EACRC,KAAK,eACLtB,KAAK,WACLuB,YAAa7C,EAAK8C,EAAE,gCACpBC,MAAO,kBAAC,QAAD,0BAER,kBAAC,IAAD,CAAQzB,KAAK,UAAU0B,SAAS,UAC/B,kBAAC,QAAD,kCAON,kBAAC,IAAD,CAAStB,UAAQ,GAChB,kBAAC,IAAD,CAAMC,GAAE,WAAMhB,MACb,kBAAC,QAAD,yCACC,uBAAMW,KAAK,OAAO2B,MAAM","file":"static/js/56.b98c1b53.chunk.js","sourcesContent":["import React from \"react\"\nimport { Link, withRouter } from \"react-router-dom\"\nimport Section from \"../../components/Section\"\nimport { Row, Col, Form, Icon, message } from \"antd\"\nimport Card from \"../../components/Card\"\nimport Heading from \"../../components/Heading\"\nimport { Formik } from \"formik\"\nimport TextInput from \"../../components/forms/TextInput\"\nimport Button from \"../../components/Button\"\nimport { useMutation } from \"@apollo/react-hooks\"\nimport { mutateNewPassword } from \"queries/auth\"\nimport { newClient, renderError } from \"helpers\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\nimport { country } from \"App\"\n\nfunction NewPassword({ history, location, i18n }) {\n\tconst [handleNewPassword] = useMutation(mutateNewPassword, {\n\t\tclient: newClient(\"account\"),\n\t\tonCompleted: data => {\n\t\t\tif (data) {\n\t\t\t\tmessage.loading(<Trans>Resetting your password...</Trans>).then(() => {\n\t\t\t\t\thistory.push({ pathname: `/${country}/forgot/password_changed`, state: { success: true } })\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonError: err => {\n\t\t\tif (err) renderError(err)\n\t\t}\n\t})\n\n\tconst params = new URLSearchParams(location.search)\n\tconst code = params.get(\"code\") || \"\"\n\n\tconst handleSubmit = values => {\n\t\tvalues = { ...values, resetCode: code }\n\t\thandleNewPassword({ variables: { ...values } })\n\t}\n\n\treturn (\n\t\t<Section>\n\t\t\t<Row type=\"flex\" justify=\"center\" align=\"middle\">\n\t\t\t\t<Col lg={12}>\n\t\t\t\t\t<Section centered>\n\t\t\t\t\t\t<Link to={`/${country}`}>\n\t\t\t\t\t\t\t<img alt=\"\" src=\"https://app.cudy.co/img/logo_live.png\" width=\"100\" />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Section>\n\t\t\t\t\t<Card title=\"\" autoHeight noHover>\n\t\t\t\t\t\t<Section>\n\t\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\t\tcontent={<Trans>Enter new password</Trans>}\n\t\t\t\t\t\t\t\tsubheader={<Trans>Now you can enter a new password. Please don't use your pet name.</Trans>}\n\t\t\t\t\t\t\t\tmarginBottom=\"2em\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Formik onSubmit={handleSubmit} validate={validate} initialValues={{ newPassword1: \"\", newPassword2: \"\" }}>\n\t\t\t\t\t\t\t\t{({ handleSubmit }) => (\n\t\t\t\t\t\t\t\t\t<Form onSubmit={handleSubmit} layout=\"vertical\">\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\t\t\t\tname=\"newPassword1\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Enter your new password...`)}\n\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>New password</Trans>}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\t\t\t\tname=\"newPassword2\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Repeat your password...`)}\n\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Repeat password</Trans>}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t\t\t\t\t\t<Trans>Change my password</Trans>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Formik>\n\t\t\t\t\t\t</Section>\n\t\t\t\t\t</Card>\n\t\t\t\t\t<Section centered>\n\t\t\t\t\t\t<Link to={`/${country}`}>\n\t\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\t\t<Icon type=\"home\" theme=\"filled\" /> &nbsp; Back to Home\n\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Section>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</Section>\n\t)\n}\n\nconst validate = values => {\n\tconst error = {}\n\n\tif (!values.newPassword1) error.newPassword1 = \"You have to provide your new password\"\n\telse if (values.newPassword1.length < 8) error.newPassword1 = \"At least 8 characters\"\n\tif (!values.newPassword2) error.newPassword2 = \"Please repeat your new password\"\n\telse if (values.newPassword2 !== values.newPassword1) error.newPassword2 = \"The password doesn't match\"\n\n\treturn error\n}\n\nexport default withI18n()(withRouter(NewPassword))\n"],"sourceRoot":""}