(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[39],{1088:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=n(1089))&&a.__esModule?a:{default:a}},1089:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!==typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=a?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(0));function r(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=i(this,c(e).call(this))).state={maxIsVisible:0},t}var n,r,l;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this,e=a.default.Children.count(this.props.children),n=0;this.interval=setInterval((function(){++n>e&&clearInterval(t.interval),t.setState({maxIsVisible:n})}),this.delay)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var t=this,e=this.transitionDuration;return a.default.createElement("div",{className:this.props.className},a.default.Children.map(this.props.children,(function(n,r){return a.default.createElement("div",{className:t.props.childClassName,style:{transition:"opacity ".concat(e,"ms, top ").concat(e,"ms"),position:"relative",top:t.state.maxIsVisible>r?0:20,opacity:t.state.maxIsVisible>r?1:0}},n)})))}},{key:"delay",get:function(){return this.props.delay||50}},{key:"transitionDuration",get:function(){return this.props.transitionDuration||400}}])&&o(n.prototype,r),l&&o(n,l),e}(a.Component);e.default=u},1377:function(t,e,n){"use strict";n.r(e);n(156);var a=n(75),r=(n(92),n(4)),l=(n(366),n(178)),o=(n(282),n(99)),i=(n(91),n(34)),c=n(26),s=(n(154),n(61)),u=n(28),m=(n(98),n(23)),d=(n(586),n(453)),f=(n(365),n(115)),p=(n(374),n(182)),b=n(3),g=n(0),v=n.n(g),h=n(10),y=n(80),E=n(1083),O=n(22),j=n(64),k=function(t){var e=t.children,n=t.onClick,a=Object(O.c)(t,["children","onClick"]);return g.createElement(y.b,null,(function(t){var r=t.form,l=r.resetForm,o=r.dirty;return g.createElement(j.a,Object.assign({onClick:function(t){l(),n&&n(t)},disabled:!o,type:"dashed"},a),e)}))},x=n(35),w=n.n(x),S=n(66),N=n(1088),C=n.n(N),_=n(188),I=n(43),T=n(177),D=n(13),P=n(45),z=n(19),M=n(5);function R(){var t=Object(b.a)(["\n\t\t.ant-modal-content {\n\t\t\t.ant-avatar {\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t\tline-height: 60px;\n\t\t\t}\n\t\t}\n\t"]);return R=function(){return t},t}function V(){var t=Object(b.a)(["\n\t.ant-modal-content {\n\t\tpadding: 2em 1em;\n\t\t.ant-avatar {\n\t\t\twidth: 80px;\n\t\t\theight: 80px;\n\t\t\tline-height: 80px;\n\t\t\tfont-size: 20px;\n\t\t}\n\t\t.ant-row:first-child {\n\t\t\tmargin-bottom: 3em;\n\t\t}\n\t\th4.ant-typography {\n\t\t\tfont-size: 1em;\n\t\t\tmargin-bottom: 1em;\n\t\t\t.datetime {\n\t\t\t\tcolor: ",";\n\t\t\t}\n\t\t}\n\t}\n\n\t","\n"]);return V=function(){return t},t}var Y=Object(h.b)(I.q)(V(),P.a.greyColor,D.j.mobile(R()));var F=Object(M.withI18n)()(v.a.forwardRef((function(t,e){var n=t.data,a=void 0===n?{}:n,r=t.avatar,l=t.handlers,s=t.i18n,u=Object(z.a)(t,["data","avatar","handlers","i18n"]),d=a.firstName,f=void 0===d?"":d,p=a.lastName,b=void 0===p?"":p,h=a.comment,O=void 0===h?"":h,j=a.postedDate,k=void 0===j?"":j,x=l.addReply,S=l.setSelectedItem,N=f&&b?"".concat(f[0]).concat(b[0]):f.slice(0,2).toUpperCase(),C=v.a.createElement("span",null,f," ",b," \xb7 ",v.a.createElement("span",{className:"datetime"},w()(k).fromNow())),_=v.a.createRef(null);return Object(g.useEffect)((function(){_.current&&_.current.focus()}),[_]),v.a.createElement(Y,Object.assign({},u,{onCancel:function(){S({})},centered:!0,footer:!1,width:650}),v.a.createElement(i.a,{gutter:32},v.a.createElement(m.a,{lg:5,xs:6},v.a.createElement(I.b,{src:D.r+a.avatar,size:D.k?"default":"large"},N)),v.a.createElement(m.a,{lg:19,xs:18},v.a.createElement(I.l,{content:C,subheader:O,level:4}))),v.a.createElement(i.a,{gutter:32},v.a.createElement(m.a,{lg:5,xs:6},v.a.createElement(I.b,{src:r,size:"default"},N)),v.a.createElement(m.a,{lg:19,xs:18},v.a.createElement(y.c,{onSubmit:function(t,e){var n=e.setSubmitting,r=e.resetForm;t=Object(c.a)({},t,{feedCommentPvid:a.pvid}),x({variables:Object(c.a)({},t)}).then((function(){n(!1),r({})}))},initialValues:{comment:""}},(function(t){var n=t.handleSubmit,a=t.values;t.setValues;return v.a.createElement(o.a,{layout:"vertical",onSubmit:n,onKeyDown:function(t){t.metaKey&&"Enter"===t.key&&n()}},v.a.createElement("p",{className:"grey"},v.a.createElement(M.Trans,{id:"Replying to <0>{firstName} {lastName}</0>",values:{firstName:f,lastName:b},components:[v.a.createElement("strong",null)]})),v.a.createElement(T.a,{transparent:!0,ref:e,textarea:!0,rows:2,name:"comment",placeholder:s._({id:"Write your reply..."}),helpText:a.comment&&v.a.createElement(M.Trans,{id:"Cmd + Enter (or Ctrl + Enter in Windows) to submit"})}),v.a.createElement(E.a,{type:"primary",icon:"plus"},"\xa0 ",v.a.createElement(M.Trans,{id:"Reply"})))})))))}))),L=n(463),W=n(69),H=n(394),J=n(50),U=n(27),B=n(29),K=n(82);function q(){var t=Object(b.a)(["\n\t> p {\n\t\tfont-size: 12px;\n\t}\n"]);return q=function(){return t},t}function A(){var t=Object(b.a)(["\n\tpadding: 2em;\n\tbackground-color: #fff;\n\tborder-radius: 10px;\n\tmargin-bottom: 1.5em;\n\tbox-shadow: ",";\n\ttransition: all 0.2s ease;\n\t.ant-comment-inner {\n\t\tpadding: 0;\n\t\tmargin-bottom: ",";\n\t\t.ant-comment-content-author-time {\n\t\t\tcolor: ",";\n\t\t}\n\t\t+ .ant-comment-nested {\n\t\t\t> div:last-child {\n\t\t\t\t.ant-row {\n\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.ant-row {\n\t\tmargin-bottom: 1em;\n\t}\n\t&:hover {\n\t\tbox-shadow: ",";\n\t}\n"]);return A=function(){return t},t}function G(){var t=Object(b.a)(["\n\t\t&& {\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 0;\n\t\t}\n\t"]);return G=function(){return t},t}function Q(){var t=Object(b.a)(["\n\t&& {\n\t\tpadding-left: 4em;\n\t\tpadding-right: 4em;\n\t\tmax-height: 100vh;\n\t\toverflow-y: scroll;\n\t}\n\n\t","\n"]);return Q=function(){return t},t}function X(){var t=Object(b.a)(["\n\tmargin-right: 1.4em;\n"]);return X=function(){return t},t}function Z(){var t=Object(b.a)(["\n\t\t&& {\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 0;\n\t\t}\n\t"]);return Z=function(){return t},t}function $(){var t=Object(b.a)(["\n\t&& {\n\t\tpadding-left: 4em;\n\t\tpadding-right: 4em;\n\t\tmargin-bottom: 2em;\n\t\tbackground-color: transparent;\n\t\tborder-color: transparent;\n\t\t.ant-card-body {\n\t\t\tpadding: 0;\n\t\t}\n\t}\n\n\t","\n"]);return $=function(){return t},t}var tt=Object(h.b)(p.a).attrs({autoHeight:!0})($(),D.j.mobile(Z())),et=h.b.span(X()),nt=Object(h.b)(f.a)(Q(),D.j.mobile(G())),at=Object(h.b)(d.a)(A(),P.a.boxShadow.main,(function(t){return t.comments.length>0&&"2em"}),P.a.greyColor,P.a.boxShadow.hover),rt=Object(h.b)(m.a)(q()),lt=Object(D.l)("feeds");e.default=Object(M.withI18n)()((function(t){t.data;var e=t.i18n,n=Object(g.useState)(""),d=Object(u.a)(n,2),f=d[0],p=(d[1],Object(g.useState)({})),b=Object(u.a)(p,2),h=b[0],O=b[1],j=Object(g.useState)([]),x=Object(u.a)(j,2),N=x[0],P=x[1],z=Object(g.useState)({}),R=Object(u.a)(z,2),V=R[0],Y=R[1],q=Object(U.g)().push,A=(JSON.parse(localStorage.getItem("userDetails")),(V.avatar||[])[0]||{}),G=Object(L.a)(A.path),Q=V.avatar&&D.r+(V.avatar[V.avatar.length-1]||{}).path,X=(V.avatar||[]).length>1?Q:G,Z=Object(S.b)(K.h,{client:Object(D.l)(),onCompleted:function(t){t=t.getProfile||{},Y(t)}}),$=Object(u.a)(Z,1)[0],ot=Object(S.b)(_.c,{client:lt,onCompleted:function(t){t=(t.getFeeds||{}).list,P(t)}}),it=Object(u.a)(ot,1)[0],ct=Object(S.b)(_.a,{client:lt,onCompleted:function(){it({variables:{startIndex:0,length:10}}).then((function(){s.a.success(e._({id:"Your comment has been added"}))}))}}),st=Object(u.a)(ct,1)[0],ut=Object(S.b)(_.f,{client:lt,onCompleted:function(t){var n=t.addVote,a=(void 0===n?{}:n).vote;it({variables:{startIndex:0,length:15}}).then((function(){s.a.success(e._({id:"You've {0} this comment",values:{0:1===a?"liked":"disliked"}}))}))}}),mt=Object(u.a)(ut,1)[0],dt=Object(S.b)(_.b,{client:lt,onCompleted:function(){O({}),it({variables:{startIndex:0,length:15}}).then((function(){s.a.success(e._({id:"Reply has been sent"}))}))}}),ft=Object(u.a)(dt,1)[0],pt=function(t,e){mt({variables:{feedCommentPvid:t,vote:"likes"===e?1:-1}})};return Object(g.useEffect)((function(){localStorage.getItem("token")&&(it({variables:{startIndex:0,length:15}}),$())}),[it,$]),localStorage.getItem("token")?v.a.createElement(I.n,null,v.a.createElement(W.a,null,v.a.createElement(i.a,{gutter:32,type:"flex",justify:"center"},v.a.createElement(F,{data:h,avatar:X,handlers:{addReply:ft,setSelectedItem:O},visible:Object.keys(h).length>0}),v.a.createElement(m.a,{lg:14,xs:24},v.a.createElement(I.l,{content:v.a.createElement(M.Trans,{id:"Feeds"}),level:4,marginBottom:"3em"}),v.a.createElement(tt,null,v.a.createElement(i.a,{gutter:16},v.a.createElement(m.a,{lg:4,xs:4},v.a.createElement(I.b,{src:X,size:"large"})),v.a.createElement(m.a,{lg:20,xs:20},v.a.createElement(y.c,{onSubmit:function(t,e){var n=e.setSubmitting,a=e.resetForm;st({variables:Object(c.a)({},t)}).finally((function(){a({}),n(!1)}))},initialValues:{comment:""}},(function(t){var n=t.handleSubmit,a=t.dirty;return v.a.createElement(o.a,{layout:"vertical",onSubmit:n},v.a.createElement(T.a,{textarea:!0,rows:4,name:"comment",placeholder:e._({id:"Any thought on mind?"})}),v.a.createElement(E.a,{disabled:!a,type:"primary",size:"large",icon:"plus"},"\xa0 ",v.a.createElement(M.Trans,{id:"Send feed"}))," ","\xa0"," ",v.a.createElement(k,{size:"large",type:"link"},v.a.createElement(M.Trans,{id:"Reset"})))}))))),v.a.createElement(l.a,null),v.a.createElement(I.l,{content:v.a.createElement(M.Trans,{id:"Your feeds"}),level:4,className:"px4em px0-mobile"}),v.a.createElement(nt,{className:"comment-list",header:v.a.createElement(M.Trans,{id:"{0} entries",values:{0:N.length}}),itemLayout:"horizontal",dataSource:N,locale:{emptyText:v.a.createElement(I.j,{boxImage:!0,description:v.a.createElement(M.Trans,{id:"No feed entries found"})})},renderItem:function(t){var e=t.firstName?t.firstName+" "+t.lastName:"No name",n=t.avatar?D.r+t.avatar:D.r+D.a;return v.a.createElement(C.a,{key:t.pvid},v.a.createElement("li",null,v.a.createElement(at,{actions:[v.a.createElement(et,{key:"comment-basic-like"},v.a.createElement(a.a,{title:v.a.createElement(M.Trans,{id:"Like"})},v.a.createElement(r.a,{type:"like",theme:"liked"===f?"filled":"outlined",onClick:function(){return pt(t.pvid,"likes")}})),v.a.createElement("span",{style:{paddingLeft:5,cursor:"auto"}},t.totalUpVoted)),v.a.createElement(et,{key:"comment-basic-dislike"},v.a.createElement(a.a,{title:v.a.createElement(M.Trans,{id:"Dislike"})},v.a.createElement(r.a,{type:"dislike",theme:"disliked"===f?"filled":"outlined",onClick:function(){return pt(t.pvid,"dislikes")}})),v.a.createElement("span",{style:{paddingLeft:5,cursor:"auto"}},t.totalDownVoted)),v.a.createElement(et,{key:"comment-basic-reply-to",onClick:function(){return function(t){return O(t)}(t)}},v.a.createElement(M.Trans,{id:"Reply to"}))],comments:t.list,author:v.a.createElement("a",null,e),avatar:v.a.createElement(I.b,{src:n,alt:"".concat(t.firstName," ").concat(t.lastName),size:"large"}),content:v.a.createElement("p",null,t.comment),datetime:v.a.createElement(a.a,{title:w()(t.postedDate).format("dddd, DD MMM YYYY HH:mm:ss")},v.a.createElement("span",null,w()(t.postedDate).fromNow()))},(t.list||[]).length>0?t.list.map((function(t){return v.a.createElement(C.a,{key:t.pvid},v.a.createElement(i.a,{gutter:32},v.a.createElement(m.a,{lg:4,xs:4},v.a.createElement(I.b,{src:n,size:"large"})),v.a.createElement(rt,{lg:20,xs:20},v.a.createElement("p",null,t.firstName," ",t.lastName," \xa0",v.a.createElement("span",{className:"grey"},w()(t.postedDate).fromNow())),v.a.createElement("p",null,t.comment))))})):null)))}}))))):v.a.createElement(I.n,null,v.a.createElement(W.a,null,v.a.createElement(i.a,{gutter:32,type:"flex",justify:"center"},v.a.createElement(m.a,{lg:14,xs:24},v.a.createElement(I.l,{content:v.a.createElement(M.Trans,{id:"Feeds"}),level:4,marginBottom:"3em"}),v.a.createElement(H.a,{title:v.a.createElement(I.l,{level:4,content:v.a.createElement(M.Trans,{id:"Oops! You are not logged in"}),subheader:v.a.createElement(v.a.Fragment,null,v.a.createElement("br",null),v.a.createElement(J.a,{type:"primary",onClick:function(){return q("/".concat(B.d,"/login"))}},v.a.createElement(M.Trans,{id:"Login first"})))})})))))}))}}]);
//# sourceMappingURL=39.90b26428.chunk.js.map