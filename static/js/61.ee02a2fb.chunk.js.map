{"version":3,"sources":["pages/OnboardingStudents/Curriculum.jsx"],"names":["withI18n","handlers","levelData","onData","fetchUser","i18n","handlePrev","setUserData","userData","history","useHistory","useMutation","mutateUpdateCurriculum","client","newClient","onCompleted","data","push","country","onError","err","renderError","updateCurriculum","loading","levelOptions","map","item","value","Number","pvid","label","name","curriculum","curriculumList","lg","xs","style","padding","content","subheader","level","marginBottom","onSubmit","values","setSubmitting","variables","list","finally","initialValues","programmeCurriculumPvid","source","enableReinitialize","handleSubmit","dirty","layout","placeholder","_","options","type","justify","align","size","htmllType","icon","onClick","textAlign","htmlType","disabled"],"mappings":"6QAsFeA,gCAzEf,YAA4E,IAAtDC,EAAqD,EAArDA,SAAqD,IAA3CC,iBAA2C,MAA/B,GAA+B,EAA3BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,UAAWC,EAAQ,EAARA,KAC1DC,EAAeL,EAAfK,WACAC,EAA+BJ,EAA/BI,YAFkE,EAEnCJ,EAAlBK,gBAFqD,MAE1C,GAF0C,EAGpEC,EAAUC,cAH0D,EAKlCC,YAAYC,IAAwB,CAC3EC,OAAQC,cACRC,YAAa,SAAAC,GACZZ,IACAG,EAAYS,GACZP,EAAQQ,KAAR,WAAiBC,IAAjB,4BAEDC,QAAS,SAAAC,GAAG,OAAIC,YAAYD,MAZ6C,mBAKnEE,EALmE,KAK/CC,EAL+C,KAK/CA,QAcrBC,EAAetB,EAAUuB,KAAI,SAAAC,GAAI,MAAK,CAAEC,MAAOC,OAAOF,EAAKG,MAAOC,MAAOJ,EAAKK,SAC9EC,GAAcxB,EAASyB,gBAAkB,IAAI,IAAM,GAEzD,OACC,uBAAKC,GAAI,GAAIC,GAAI,GAAIC,MAAO,CAAEC,QAAS,YACtC,kBAAC,IAAD,CACCC,QAAS,kBAAC,QAAD,kCACTC,UAAW,kBAAC,QAAD,uDACXC,MAAO,EACPC,aAAa,QAEd,kBAAC,IAAD,CACCC,SAhB4B,SAACC,EAAD,GAAgC,IAArBC,EAAoB,EAApBA,cACzCtB,EAAiB,CAAEuB,UAAW,CAAEC,KAAM,CAACH,MAAaI,SAAQ,kBAAMH,GAAc,OAgB9EI,cAAe,CAAEC,yBAA0BjB,EAAWkB,QAAU,IAAInB,KAAMF,KAAMG,EAAWH,MAC3FsB,oBAAkB,IAEjB,gBAAGC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,MAAjB,OACA,uBAAMC,OAAO,WAAWZ,SAAUU,GACjC,kBAAC,IAAD,CACCrB,KAAK,0BACLD,MAAO,kBAAC,QAAD,0BACPyB,YAAalD,EAAKmD,EAAE,6CACpBC,QAASjC,IAEV,6BACA,6BACA,uBAAKkC,KAAK,OAAOC,QAAQ,gBAAgBC,MAAM,UAC9C,uBAAK1B,GAAI,GACR,kBAAC,QAAD,8BACC,kBAAC,IAAD,CACC2B,KAAK,QACLC,UAAU,SACVC,KAAK,OACLC,QAAS,kBAAM1D,EAAW,gBAM7B,uBAAK4B,GAAI,EAAGE,MAAO,CAAE6B,UAAW,UAC/B,kBAAC,IAAD,CAAQP,KAAK,UAAUQ,SAAS,SAASC,UAAWd,EAAO9B,QAASA,GACnE,kBAAC,QAAD,8BACQ,uBAAMmC,KAAK","file":"static/js/61.ee02a2fb.chunk.js","sourcesContent":["import React from \"react\"\nimport { Row, Col, Form, Icon } from \"antd\"\nimport { Heading, Button, ButtonLink } from \"components\"\nimport { Formik } from \"formik\"\nimport { useHistory } from \"react-router\"\nimport SelectInput from \"components/forms/SelectInput\"\nimport { useMutation } from \"react-apollo\"\nimport { mutateUpdateCurriculum } from \"queries/profile\"\nimport { newClient, renderError } from \"helpers\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\nimport { country } from \"App\"\n\nfunction Curriculum({ handlers, levelData = [], onData, fetchUser, i18n }) {\n\tconst { handlePrev } = handlers\n\tconst { setUserData, userData = {} } = onData\n\tconst history = useHistory()\n\n\tconst [updateCurriculum, { loading }] = useMutation(mutateUpdateCurriculum, {\n\t\tclient: newClient(),\n\t\tonCompleted: data => {\n\t\t\tfetchUser()\n\t\t\tsetUserData(data)\n\t\t\thistory.push(`/${country}/profile/info/thankyou`)\n\t\t},\n\t\tonError: err => renderError(err)\n\t})\n\n\tconst handleSubmitCurriculum = (values, { setSubmitting }) => {\n\t\tupdateCurriculum({ variables: { list: [values] } }).finally(() => setSubmitting(false))\n\t}\n\n\tconst levelOptions = levelData.map(item => ({ value: Number(item.pvid), label: item.name }))\n\tconst curriculum = (userData.curriculumList || [])[0] || {}\n\n\treturn (\n\t\t<Col lg={16} xs={24} style={{ padding: \"2em 3em\" }}>\n\t\t\t<Heading\n\t\t\t\tcontent={<Trans>Your curriculum and level</Trans>}\n\t\t\t\tsubheader={<Trans>What curriculum and level are you currently on</Trans>}\n\t\t\t\tlevel={4}\n\t\t\t\tmarginBottom=\"2em\"\n\t\t\t/>\n\t\t\t<Formik\n\t\t\t\tonSubmit={handleSubmitCurriculum}\n\t\t\t\tinitialValues={{ programmeCurriculumPvid: (curriculum.source || {}).name, pvid: curriculum.pvid }}\n\t\t\t\tenableReinitialize\n\t\t\t>\n\t\t\t\t{({ handleSubmit, dirty }) => (\n\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\tname=\"programmeCurriculumPvid\"\n\t\t\t\t\t\t\tlabel={<Trans>Please choose one</Trans>}\n\t\t\t\t\t\t\tplaceholder={i18n._(t`Your current curriculum and level...`)}\n\t\t\t\t\t\t\toptions={levelOptions}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Row type=\"flex\" justify=\"space-between\" align=\"middle\">\n\t\t\t\t\t\t\t<Col lg={8}>\n\t\t\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\t\t\t<ButtonLink\n\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\thtmllType=\"button\"\n\t\t\t\t\t\t\t\t\t\ticon=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handlePrev(\"Basic\")}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col lg={8} style={{ textAlign: \"right\" }}>\n\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" disabled={!dirty} loading={loading}>\n\t\t\t\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\t\t\t\tFinish <Icon type=\"right\" />\n\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Form>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t</Col>\n\t)\n}\n\nexport default withI18n()(Curriculum)\n"],"sourceRoot":""}