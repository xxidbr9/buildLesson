(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[47],{1406:function(e,t,a){e.exports=a.p+"static/media/for-regis.ea07a65a.svg"},1677:function(e,t,a){"use strict";a.r(t);a(210);var r=a(83),n=(a(674),a(216)),c=(a(97),a(25)),o=a(23),l=a(19),s=a(28),i=(a(91),a(37)),m=a(5),u=a(0),d=a.n(u),p=a(27),g=a(40),b=a(45),f=a(15),E=a(1343),h=a(9),y=a(55),v=(a(1353),a(42)),j=a(131),w=a(16),O=a(421),k=a(80),N=a(32),_=a(1406),S=a.n(_),T=a(98),C=a(71),I=a(212),x=a(48);function z(){var e=Object(m.a)(["\n\tbackground-color: #fff;\n"]);return z=function(){return e},e}function P(){var e=Object(m.a)(["\n\tbackground-image: ",";\n\tbackground-size: 25em;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tposition: relative;\n\theight: 100vh;\n\timg {\n\t\tposition: absolute;\n\t\tleft: 30px;\n\t\ttop: 20px;\n\t\tcursor: pointer;\n\t}\n"]);return P=function(){return e},e}var B=f.b.div(P(),"url(".concat(S.a,")")),J=Object(f.b)(i.a)(z());t.default=Object(h.withI18n)()((function(e){var t=e.i18n,a=Object(u.useState)({}),m=Object(s.a)(a,2),f=m[0],_=m[1],S=Object(u.useState)(!1),z=Object(s.a)(S,2),P=z[0],R=z[1],L=Object(p.g)(),Y=Object(p.h)(),H=new URLSearchParams(Y.search),q=JSON.parse(localStorage.getItem("referral_code"))||{},U=window.location.pathname.split("/"),V=f.avatar,A=void 0===V?[]:V,D=H.get("referral")&&H.get("code")&&H.get("upline"),F=x.f+(A[0]||{}).path,G=N.d!==U[1]?U[1]:N.d,K=Object(y.b)(k.R,{client:Object(w.k)("profile"),onCompleted:function(e){e=e.getProfile,_(e)}}),M=Object(s.a)(K,1)[0],Q=Object(y.b)(O.e,{client:Object(w.k)("account"),onCompleted:function(e){e=e.register||{},L.push({pathname:"/".concat(N.d,"/register/success"),state:{success:!0,country:e.country,rolePvid:e.rolePvid}})},onError:function(e){return Object(w.q)(e)}}),W=Object(s.a)(Q,1)[0],X=d.a.createElement("span",null,d.a.createElement(h.Trans,{id:"You are being referred by"})," \xa0",d.a.createElement("a",{href:"/".concat(N.d,"/").concat(f.userCode,"-").concat(f.pvid,"-").concat(f.firstName,"-").concat(f.lastName),target:"_blank",rel:"noopener noreferrer"},d.a.createElement(v.b,{src:F,size:"small"})," ",f.firstName," ",f.lastName)),Z=function(e){Object(N.f)(e,(function(){window.location.replace(D?"/".concat(e,"/register?referral=").concat(q.referral,"&code=").concat(q.code,"&upline=").concat(q.upline):"/".concat(e,"/register"))}))};return Object(u.useEffect)((function(){if(localStorage.getItem("token")&&L.push("/".concat(N.d,"/404")),D){var e={code:H.get("code"),referral:H.get("referral"),upline:H.get("upline")};M({variables:{userPvid:Number(H.get("upline"))}}),localStorage.setItem("referral_code",JSON.stringify(e))}return function(){return localStorage.removeItem("referral_code")}}),[M,L,D]),d.a.createElement(J,null,!w.j&&d.a.createElement(c.a,{lg:12},d.a.createElement(B,null,d.a.createElement(v.p,{onClick:function(){return L.push("/".concat(N.d))}}))),d.a.createElement(c.a,{lg:12},w.j&&d.a.createElement(i.a,{type:"flex",justify:"center",className:"pt2em"},d.a.createElement(c.a,{lg:12},d.a.createElement(v.p,{onClick:function(){return L.push("/".concat(N.d))}}))),d.a.createElement(v.u,{className:"pt2em"},d.a.createElement(v.l,{bold:!0,level:4,content:d.a.createElement(h.Trans,{id:"Be counsellor in <0>Cudy</0> today",components:[d.a.createElement("strong",{className:"primary"})]}),subheader:d.a.createElement(h.Trans,{id:"Join our e-counselling platform to start giving advices to those who in needs"})})),D&&d.a.createElement(v.u,{style:{paddingTop:0,paddingBottom:0}},d.a.createElement(v.a,{type:"info",showIcon:!0,message:X})),d.a.createElement(v.u,{marginBottom:w.j?"very":0,style:{paddingBottom:!w.j&&0,paddingTop:0}},d.a.createElement(b.b,{onSubmit:function(e,t){var a=t.setSubmitting,r=e=Object(l.a)({},e,{firstName:"",lastName:"",description:"",address:"",dob:"",referralId:Number(H.get("referral"))||0,referralCode:H.get("code")||"",uplineId:Number(H.get("upline"))||0}),n=(r.checkboxes,r.date,r.tc,r.month,r.year,r.repeat_password,Object(o.a)(r,["checkboxes","date","tc","month","year","repeat_password"]));W({variables:Object(l.a)({},n,{referralLink:""})}).finally((function(){a(!1)}))},initialValues:{rolePvid:1,email:"",password:"",repeat_password:"",country:G}},(function(e){var a=e.handleSubmit,o=e.values;return d.a.createElement(r.a,{onSubmit:a,className:"mb4em",layout:"vertical"},d.a.createElement(i.a,{gutter:16},d.a.createElement(c.a,{lg:24},d.a.createElement(j.a,{label:d.a.createElement(h.Trans,{id:"Your email"}),type:"email",name:"email",placeholder:t._({id:"Enter your email"})}))),d.a.createElement(i.a,{gutter:16},d.a.createElement(c.a,{lg:12},d.a.createElement(j.a,{password:!0,label:d.a.createElement(h.Trans,{id:"Your password"}),name:"password",placeholder:t._({id:"Enter your password"})})),d.a.createElement(c.a,{lg:12},d.a.createElement(j.a,{password:!0,label:d.a.createElement(h.Trans,{id:"Repeat password"}),name:"repeat_password",placeholder:t._({id:"Repeat your password"})}))),d.a.createElement(v.u,{paddingHorizontal:0,className:"px0__mobile py0"},d.a.createElement(i.a,{gutter:16},d.a.createElement(c.a,{lg:12},d.a.createElement(v.l,{content:d.a.createElement(h.Trans,{id:"Select your country"}),level:4,subheader:d.a.createElement(h.Trans,{id:"Choose your preferred country"})}),d.a.createElement(I.a,{name:"country",onChange:Z,options:C.a.map((function(e){var t=e.key,a=e.name,r=e.icon;return{value:t,label:d.a.createElement("span",null,d.a.createElement(T.a,{type:r,size:16}),"\xa0 ",a)}}))})))),d.a.createElement(v.u,{paddingHorizontal:0,className:"px0__mobile"},d.a.createElement(n.a,{name:"tc",checked:P,onChange:function(){return R(!P)}})," \xa0"," ",d.a.createElement(h.Trans,{id:"<0>I have agreed to the <1>terms and conditions</1> and <2>privacy policy</2> of the site</0>",components:[d.a.createElement("span",null),d.a.createElement(g.b,{to:"/"}),d.a.createElement(g.b,{to:"/"})]})),d.a.createElement(i.a,{gutter:24},d.a.createElement(c.a,{lg:12,style:{marginBottom:w.j&&"1em"}},d.a.createElement(E.a,{block:!0,size:"large",type:"primary",className:"mb1em",disabled:!P||!o.email||!o.password||!o.repeat_password||o.password!==o.repeat_password},d.a.createElement(h.Trans,{id:"Create account"}))),d.a.createElement(c.a,{lg:12},d.a.createElement(v.d,{block:!0,type:"ghost",htmlType:"button",onClick:function(){return L.push("/".concat(N.d,"/login"))}},d.a.createElement(h.Trans,{id:"Login instead"})))))})))))}))}}]);
//# sourceMappingURL=47.772453d7.chunk.js.map