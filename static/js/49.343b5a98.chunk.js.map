{"version":3,"sources":["assets/images/for-login.svg","pages/Signin/index.jsx"],"names":["module","exports","BackgroundImage","styled","div","loginImage","StyledRow","validationSchema","i18n","yup","shape","email","required","_","password","withI18n","history","useHistory","location","useLocation","params","URLSearchParams","search","previousRoute","state","useState","theError","setError","useMutation","mutateLogin","authUserOptions","get","setLogin","loading","notLoggedInText","notLoggedIn","useEffect","localStorage","getItem","push","country","mobile","lg","onClick","type","justify","style","paddingTop","marginTop","marginBottom","content","subheader","showIcon","message","description","className","onSubmit","values","variables","initialValues","handleSubmit","layout","label","name","placeholder","code","paddingHorizontal","to","textAlign","gutter","htmlType","block","pathname","prepopulatedEmail"],"mappings":"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","file":"static/js/49.343b5a98.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/for-login.912d9008.svg\";","import React, { useEffect, useState } from \"react\"\nimport { Row, Col, Form } from \"antd\"\nimport { withRouter, Link, useHistory, useLocation } from \"react-router-dom\"\nimport { Formik } from \"formik\"\nimport styled from \"styled-components\"\nimport { useMutation } from \"@apollo/react-hooks\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\nimport * as yup from \"yup\"\n\nimport { Section, Heading, Button, Alert, Logo } from \"components\"\nimport TextInput from \"components/forms/TextInput\"\nimport { mutateLogin } from \"queries/auth\"\nimport { authUserOptions } from \"store/actions/authActions\"\nimport { mobile } from \"helpers\"\nimport { country } from \"App\"\nimport loginImage from \"assets/images/for-login.svg\"\n\nconst BackgroundImage = styled.div`\n\tbackground-image: ${`url(${loginImage})`};\n\tbackground-size: 25em;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tposition: relative;\n\theight: 100vh;\n\timg {\n\t\tposition: absolute;\n\t\tleft: 30px;\n\t\ttop: 20px;\n\t\tcursor: pointer;\n\t}\n`\n\nconst StyledRow = styled(Row)`\n\tbackground-color: #fff;\n`\n\nfunction Signin({ i18n }) {\n\tconst history = useHistory()\n\tconst location = useLocation()\n\tconst params = new URLSearchParams(location.search)\n\tconst previousRoute = (location.state || {}).previousRoute || \"\"\n\n\tconst [theError, setError] = useState(null)\n\tconst [setLogin, { loading }] = useMutation(mutateLogin, authUserOptions(setError, params.get(\"from\"), previousRoute))\n\n\tconst notLoggedInText = (location.state || {}).notLoggedIn\n\n\tconst handleLogin = (values) => {\n\t\tsetLogin({ variables: { ...values } })\n\t}\n\n\tuseEffect(() => {\n\t\tif (localStorage.getItem(\"token\")) {\n\t\t\thistory.push(`/${country}`)\n\t\t}\n\n\t\t// if ((location.state || {}).loggedout) {\n\t\t// \tmessage.error(\"Your session is expired. Please re-login to continue\")\n\t\t// }\n\t}, [history])\n\n\treturn (\n\t\t<StyledRow>\n\t\t\t{!mobile && (\n\t\t\t\t<Col lg={12}>\n\t\t\t\t\t<BackgroundImage>\n\t\t\t\t\t\t<Logo onClick={() => history.push(`/${country}`)} />\n\t\t\t\t\t</BackgroundImage>\n\t\t\t\t</Col>\n\t\t\t)}\n\t\t\t<Col lg={12}>\n\t\t\t\t{mobile && (\n\t\t\t\t\t<Row type=\"flex\" justify=\"center\" style={{ paddingTop: \"2em\" }}>\n\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t<Logo onClick={() => history.push(`/${country}`)} />\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t)}\n\t\t\t\t<Section style={{ marginTop: \"3em\", marginBottom: 0 }}>\n\t\t\t\t\t<Heading\n\t\t\t\t\t\tcontent={<Trans>Welcome back!</Trans>}\n\t\t\t\t\t\tsubheader={<Trans>Please login into your account to continue using Cudy</Trans>}\n\t\t\t\t\t/>\n\t\t\t\t</Section>\n\n\t\t\t\t{notLoggedInText && (\n\t\t\t\t\t<Section>\n\t\t\t\t\t\t<Alert type=\"warning\" showIcon message=\"Login first\" description={notLoggedInText} className=\"mb0\" />\n\t\t\t\t\t</Section>\n\t\t\t\t)}\n\n\t\t\t\t{/* <Section>\n                    <Row gutter={16}>\n                        <Col lg={12}>\n                            <Button block social=\"facebook\" icon=\"facebook\">\n                                Sign in with Facebook\n                            </Button>\n                        </Col>\n                        <Col lg={12}>\n                            <Button block social=\"google\" icon=\"google\">\n                                Sign in with Google\n                            </Button>\n                        </Col>\n                    </Row>\n                </Section>\n                <Section centered>OR</Section> */}\n\n\t\t\t\t<Section marginBottom={0}>\n\t\t\t\t\t<Formik onSubmit={handleLogin} validationSchema={validationSchema(i18n)} initialValues={{ email: \"\", password: \"\" }}>\n\t\t\t\t\t\t{({ handleSubmit, values }) => (\n\t\t\t\t\t\t\t<Form onSubmit={handleSubmit} layout=\"vertical\">\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tlabel={<Trans>Your email</Trans>}\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Enter your email`)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\tpassword\n\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\tlabel={<Trans>Your password</Trans>}\n\t\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Enter your password`)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{theError && theError.code === 10010 && (\n\t\t\t\t\t\t\t\t\t<Section paddingHorizontal={0}>\n\t\t\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\t\t\tmessage=\"Not verified\"\n\t\t\t\t\t\t\t\t\t\t\tdescription={\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tIt looks like your account is not verified yet.{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={`/${country}/account/resend_email`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSend me another email verification\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"error\"\n\t\t\t\t\t\t\t\t\t\t\tshowIcon\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Section paddingHorizontal={0} textAlign=\"right\" style={{ paddingTop: 0 }} marginBottom=\"very\">\n\t\t\t\t\t\t\t\t\t<Link to={`/${country}/forgot`}>\n\t\t\t\t\t\t\t\t\t\t<Trans>Forgot you password?</Trans>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t\t\t<Row gutter={24}>\n\t\t\t\t\t\t\t\t\t<Col lg={12} style={{ marginBottom: mobile && \"1em\" }}>\n\t\t\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" loading={loading} block>\n\t\t\t\t\t\t\t\t\t\t\t<Trans>Login now</Trans>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Col>{\" \"}\n\t\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\t\t\t\ttype=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\thtmlType=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\thistory.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\tpathname: `/${country}/register`,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate: { prepopulatedEmail: values.email }\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Trans>Sign up instead</Trans>\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t</Section>\n\t\t\t</Col>\n\t\t</StyledRow>\n\t)\n}\n\nconst validationSchema = (i18n) =>\n\tyup.object().shape({\n\t\temail: yup\n\t\t\t.string()\n\t\t\t.required(i18n._(t`This is required`))\n\t\t\t.email(i18n._(t`Please enter a valid email`)),\n\t\tpassword: yup.string().required(i18n._(t`This is required`))\n\t})\n\nexport default withI18n()(Signin)\n"],"sourceRoot":""}