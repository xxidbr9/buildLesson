{"version":3,"sources":["store/actions/contentfulActions.js","pages/Counselling/Assessment/Success.jsx"],"names":["loadingContentful","type","types","fetchEcommerceProducts","category","dispatch","contentfulClient","getEntries","content_type","then","items","payload","map","item","fields","catch","err","console","error","fetchEcommerceSites","fetchShopCategories","select","fetchConsultants","fetchLifelongSliders","fetchAssessments","data","fetchAssessmentOptions","fetchAssessmentCategories","fetchAssessmentResults","points","ResultCircle","styled","div","bg","baseStyles","greenColor","primary","Success","useLocation","state","push","useHistory","useDispatch","result","useSelector","contentful","singleResult","assessmentResults","isSuccess","answers","reduce","acc","curr","point","useEffect","Object","keys","length","country","localStorage","removeItem","log","centered","textAlign","maxWidth","autoHeight","lg","src","width","height","class","bold","level","content","subheader","marginBottom","lightGrey","two","className","gutter","color","resultLabel","key","title","from","to","Paragraph","classNa","explanation","noHover","role","aria-label","paddingHorizontal","icon"],"mappings":"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","file":"static/js/45.e25a617c.chunk.js","sourcesContent":["import { contentfulClient } from \"App\"\nimport * as types from \"store/constants\"\n\nconst loadingContentful = () => ({ type: types.LOADING_CONTENTFUL })\n\nexport const fetchEcommerceProducts = ({ category = \"\" } = {}) => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"product\", \"fields.category\": category })\n\t\t.then(({ items }) => {\n\t\t\tdispatch({ type: types.FETCH_ECOMMERCE_PRODUCTS, payload: items.map((item) => item.fields) })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_ECOMMERCE_PRODUCTS_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchEcommerceSites = () => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"eCommerceSites\" })\n\t\t.then(({ items }) => dispatch({ type: types.FETCH_ECOMMERCE_SITES, payload: items.map((item) => item.fields) }))\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_ECOMMERCE_SITES_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchShopCategories = () => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"product\", select: \"fields.category\" })\n\t\t.then(({ items }) => dispatch({ type: types.FETCH_SHOP_CATEGORIES, payload: items.map((item) => item.fields) }))\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_SHOP_CATEGORIES_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchConsultants = () => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"consultants\" })\n\t\t.then(({ items }) => {\n\t\t\tdispatch({ type: types.FETCH_CONSULTANTS, payload: items.map((item) => item.fields) })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_CONSULTANTS_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchLifelongSliders = () => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"lifelongSlider\" })\n\t\t.then(({ items }) => {\n\t\t\tdispatch({ type: types.FETCH_LIFELONG_SLIDERS, payload: items.map((item) => item.fields) })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_LIFELONG_SLIDERS_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchAssessments = (category) => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"counsellingAssessment\" })\n\t\t.then(({ items }) => {\n\t\t\tconst data = items.map((item) => item.fields)\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENTS, payload: { data, category } })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENTS_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchAssessmentOptions = (category) => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"counsellingOptions\" })\n\t\t.then(({ items }) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENT_OPTIONS, payload: { data: items.map((item) => item.fields), category } })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENT_OPTIONS_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchAssessmentCategories = () => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"counsellingCategories\" })\n\t\t.then(({ items }) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENT_CATEGORIES, payload: items.map((item) => item.fields) })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENT_CATEGORIES_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n\nexport const fetchAssessmentResults = (points) => (dispatch) => {\n\tdispatch(loadingContentful())\n\treturn contentfulClient\n\t\t.getEntries({ content_type: \"counsellingResults\" })\n\t\t.then(({ items }) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENT_RESULTS, payload: items.map((item) => item.fields), points })\n\t\t})\n\t\t.catch((err) => {\n\t\t\tdispatch({ type: types.FETCH_ASSESSMENT_RESULTS_ERROR })\n\t\t\tconsole.error(err)\n\t\t})\n}\n","import React from \"react\"\nimport { Section, Card, GifPlayer, Heading, Button, Layout } from \"components\"\nimport { Trans } from \"@lingui/macro\"\nimport { Link, useLocation, useHistory } from \"react-router-dom\"\nimport { country } from \"App\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useEffect } from \"react\"\nimport { fetchAssessmentResults } from \"store/actions/contentfulActions\"\nimport { Row, Col, Typography, Icon } from \"antd\"\nimport { baseStyles } from \"styles/base\"\nimport { ButtonLink } from \"components\"\nimport styled from \"styled-components\"\nimport { Tag } from \"components\"\n\nconst ResultCircle = styled.div`\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\ttext-align: center;\n\twidth: 180px;\n\theight: 180px;\n\tborder-radius: 50%;\n\tbackground-color: ${({ bg }) => bg || baseStyles.greenColor.primary};\n\tmargin-bottom: 3em;\n\t.ant-typography {\n\t\tcolor: #fff;\n\t\th2 {\n\t\t\tfont-size: 4em;\n\t\t}\n\t}\n`\n\nexport default function Success() {\n\tconst { state = {} } = useLocation()\n\tconst { push } = useHistory()\n\tconst dispatch = useDispatch()\n\tconst result = useSelector(({ contentful }) => contentful.singleResult)\n\tconst assessmentResults = useSelector(({ contentful }) => contentful.assessmentResults)\n\tconst { isSuccess, answers = [] } = state\n\tconst points = answers.reduce((acc, curr) => acc + curr.point, 0)\n\n\tuseEffect(() => {\n\t\tif (!isSuccess || Object.keys(result).length === 0) push(`/${country}/404`)\n\t\tdispatch(fetchAssessmentResults(points))\n\t\treturn () => {\n\t\t\tlocalStorage.removeItem(\"quiz_taken\")\n\t\t\tlocalStorage.removeItem(\"quiz_answers\")\n\t\t}\n\t}, [dispatch, result])\n\n\tconsole.log({ result, assessmentResults })\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Section centered textAlign=\"center\" maxWidth=\"1200px\">\n\t\t\t\t<Card autoHeight>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t<GifPlayer src=\"https://assets9.lottiefiles.com/temp/lf20_4Jjg2l.json\" width={250} height={250} class=\"mb2em\" />\n\t\t\t\t\t\t\t<Heading\n\t\t\t\t\t\t\t\tbold\n\t\t\t\t\t\t\t\tlevel={4}\n\t\t\t\t\t\t\t\tcontent={<Trans>Great job! :)</Trans>}\n\t\t\t\t\t\t\t\tsubheader={<Trans>You've finished the test. And here's the result.</Trans>}\n\t\t\t\t\t\t\t\tmarginBottom=\"3em\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t<Section bg={baseStyles.lightGrey.two} className=\"p2em br-10px\">\n\t\t\t\t\t\t\t\t<Row gutter={32}>\n\t\t\t\t\t\t\t\t\t<Col lg={10}>\n\t\t\t\t\t\t\t\t\t\t<ResultCircle bg={result.color || \"\"} className=\"m-auto__mobile mb2em__mobile\">\n\t\t\t\t\t\t\t\t\t\t\t<Heading content={points} subheader={result.resultLabel} />\n\t\t\t\t\t\t\t\t\t\t</ResultCircle>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col lg={14}>\n\t\t\t\t\t\t\t\t\t\t<Heading content={<Trans>Indicator</Trans>} level={4} />\n\t\t\t\t\t\t\t\t\t\t{assessmentResults.map((item) => (\n\t\t\t\t\t\t\t\t\t\t\t<div key={item.title} className=\"mb1em\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag color={item.color}>{item.resultLabel}</Tag>&nbsp;{item.from} - {item.to}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t<Typography.Paragraph classNa=\"mb3em\">{result.explanation}</Typography.Paragraph>\n\t\t\t\t\t\t\t\t<ButtonLink noHover className=\"px0\">\n\t\t\t\t\t\t\t\t\t<span role=\"img\" aria-label=\"doctor\">\n\t\t\t\t\t\t\t\t\t\t👨🏻‍⚕️\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t&nbsp; <Trans>Talk to our specialist today</Trans>&nbsp;\n\t\t\t\t\t\t\t\t\t<Icon type=\"right\" />{\" \"}\n\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Card>\n\t\t\t\t<Section textAlign=\"center\" centered paddingHorizontal=\"normal\">\n\t\t\t\t\t<Link to={`/${country}`}>\n\t\t\t\t\t\t<Button type=\"ghost\" icon=\"home\">\n\t\t\t\t\t\t\t&nbsp;<Trans>Back to Home</Trans>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Link>\n\t\t\t\t</Section>\n\t\t\t</Section>\n\t\t</Layout>\n\t)\n}\n"],"sourceRoot":""}