{"version":3,"sources":["pages/StudyPlaces/StudyCenter/index.jsx"],"names":["FilterPanel","styled","motion","div","baseStyles","boxShadow","main","StyledInput","Search","attrs","filterPanelVariants","visible","opacity","y","display","transition","staggerChildren","hidden","connect","place","tuitionOptions","tuitionCategories","map","item","value","pvid","label","name","tuitions","loading","fetchTuitionCategories","searchNearbyTuition","searchTuition","fetchNearbyPlacesGoogle","withI18n","i18n","props","useState","category","keyword","isSearch","filterValues","setFilterValues","useGeolocation","latitude","longitude","userDetails","JSON","parse","localStorage","getItem","isSG","country","useInternational","countryCode","toLowerCase","useEffect","lat","lng","radius","variants","animate","initial","delay","type","justify","lg","className","placeholder","_","onSearch","allowClear","bold","level","marginBottom","content","subheader","options","onClick","length","centered","description","gutter","split","join","xs","key","style","to","css","data"],"mappings":"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","file":"static/js/72.9c5095e7.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { Col, Row, Input } from \"antd\"\nimport { Section, Heading, Loading, Empty } from \"components\"\nimport { connect } from \"react-redux\"\nimport { fetchTuitionCategories, searchNearbyTuition, searchTuition, fetchNearbyPlacesGoogle } from \"store/actions/placesActions\"\nimport styled from \"styled-components\"\nimport { motion } from \"framer-motion\"\nimport { baseStyles } from \"styles/base\"\nimport PlaceCard from \"../PlaceCard\"\nimport { Link } from \"react-router-dom\"\nimport CategoryList from \"components/common/CategoryList\"\nimport { country } from \"App\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\nimport { useGeolocation } from \"react-use\"\nimport useInternational from \"helpers/hooks/useInternational\"\n\nconst FilterPanel = styled(motion.div)`\n\tmargin-bottom: 1em;\n\tborder-radius: 5px;\n\tpadding: 1em 0;\n\t/* box-shadow: ${baseStyles.boxShadow.main}; */\n\t.right {\n\t\ttext-align: right;\n\t}\n`\n\nconst StyledInput = styled(Input.Search).attrs({\n\t// size: \"large\"\n})`\n\t&& {\n\t\tmargin-bottom: 1em;\n\t\tdisplay: block;\n\t\t/* input[name=\"keyword\"] {\n\t\t\tborder-radius: 8px;\n\t\t} */\n\t}\n`\n\nconst filterPanelVariants = {\n\tvisible: { opacity: 1, y: 0, display: \"block\", transition: { staggerChildren: 0.2 } },\n\thidden: { opacity: 0, y: -300, display: \"none\" },\n}\n\nfunction StudyCenter({ tuitionOptions, loading, searchNearbyTuition, i18n, tuitions, ...props }) {\n\tconst [filterValues, setFilterValues] = useState({ category: 1, keyword: \"\", isSearch: false })\n\tconst { latitude, longitude } = useGeolocation()\n\tconst userDetails = JSON.parse(localStorage.getItem(\"userDetails\")) || {}\n\tconst isSG = userDetails.country === \"sg\"\n\tlet { countryCode = \"\" } = useInternational()\n\tcountryCode = countryCode.toLowerCase()\n\t// const userCountry = countryCode || country\n\n\tconst { searchTuition } = props\n\n\tconst renderTuitions = () => {\n\t\tif (loading)\n\t\t\treturn (\n\t\t\t\t<Row>\n\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t<Loading />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t)\n\n\t\tif (tuitions.length === 0)\n\t\t\treturn (\n\t\t\t\t<Section centered>\n\t\t\t\t\t<Empty description={<Trans>Oops! No data found for now</Trans>} />\n\t\t\t\t</Section>\n\t\t\t)\n\n\t\treturn (\n\t\t\t<Row gutter={24}>\n\t\t\t\t{tuitions.map((item) => {\n\t\t\t\t\tconst name = item.name.split(\" \").join(\"-\")\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Col lg={6} xs={12} key={item.pvid} style={{ marginBottom: \"2em\" }}>\n\t\t\t\t\t\t\t<Link to={`/${country}/study_places/tuition/${name}--${item.pvid}`}>\n\t\t\t\t\t\t\t\t<PlaceCard css=\"cursor: pointer;\" data={item} />\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</Row>\n\t\t)\n\t}\n\n\tconst handleSelectCategory = (category) => {\n\t\tsetFilterValues({ ...filterValues, category })\n\t\tsearchTuition(filterValues.keyword, category)\n\t}\n\n\tconst handleSearchFilter = (value) => {\n\t\tsetFilterValues({ ...filterValues, keyword: value, isSearch: true })\n\t\tsearchTuition(value, countryCode, userDetails.pvid || 0)\n\t}\n\n\tuseEffect(() => {\n\t\tif (latitude && longitude) {\n\t\t\tsearchNearbyTuition({ lat: latitude, lng: longitude, radius: 10, country }, countryCode, userDetails.pvid || 0)\n\t\t}\n\t}, [countryCode, latitude, longitude, searchNearbyTuition, userDetails.pvid])\n\n\treturn (\n\t\t<Section>\n\t\t\t<FilterPanel variants={filterPanelVariants} animate=\"visible\" initial=\"hidden\" transition={{ delay: 2 }}>\n\t\t\t\t<Row type=\"flex\" justify=\"space-between\">\n\t\t\t\t\t<Col lg={8} className=\"right\">\n\t\t\t\t\t\t<StyledInput\n\t\t\t\t\t\t\tname=\"keyword\"\n\t\t\t\t\t\t\tplaceholder={i18n._(t`E.g. Study center in Bandung`)}\n\t\t\t\t\t\t\tonSearch={handleSearchFilter}\n\t\t\t\t\t\t\tallowClear\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</FilterPanel>\n\t\t\t<Heading\n\t\t\t\tbold\n\t\t\t\tlevel={4}\n\t\t\t\tmarginBottom=\"1em\"\n\t\t\t\tcontent={<Trans>Tuition center</Trans>}\n\t\t\t\tsubheader={<Trans>List of tuition center</Trans>}\n\t\t\t/>\n\t\t\t{isSG && <CategoryList options={tuitionOptions} type={filterValues.category} onClick={handleSelectCategory} />}\n\t\t\t{renderTuitions()}\n\t\t</Section>\n\t)\n}\n\nconst mapState = ({ place }) => {\n\tconst tuitionOptions = (place.tuitionCategories || []).map((item) => ({ value: item.pvid, label: item.name }))\n\n\treturn {\n\t\ttuitions: place.tuitions,\n\t\tloading: place.loading,\n\t\ttuitionCategories: place.tuitionCategories,\n\t\ttuitionOptions,\n\t}\n}\n\nexport default connect(mapState, {\n\tfetchTuitionCategories,\n\tsearchNearbyTuition,\n\tsearchTuition,\n\tfetchNearbyPlacesGoogle,\n})(withI18n()(StudyCenter))\n"],"sourceRoot":""}