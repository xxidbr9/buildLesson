(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[32],{1373:function(e,t,a){var n=a(1378),r=a(1379);e.exports=function(e,t,a){var i=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var o=0;o<16;++o)t[i+o]=c[o];return t||r(c)}},1378:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1379:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=a;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},1383:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));a(303);var n=a(103),r=(a(97),a(25)),i=(a(91),a(37)),c=a(5),o=a(9),l=a(0),u=a.n(l),d=a(42),m=a(15),s=a(16),b=a(46),p=a(48);function v(){var e=Object(c.a)(["\n\t&& {\n\t\th4 {\n\t\t\tfont-size: 1em;\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return v=function(){return e},e}function f(){var e=Object(c.a)(["\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tmargin-bottom: 1em;\n\t}\n"]);return f=function(){return e},e}function j(){var e=Object(c.a)(["\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tpadding-bottom: 1em;\n\t}\n"]);return j=function(){return e},e}var E=Object(m.b)(d.l)(j()),g=Object(m.b)(i.a)(f()),h=Object(m.b)(d.l)(v(),b.a.greyColor),y=localStorage.getItem("token");function S(e){var t=e.title,a=void 0===t?"":t,i=e.description,c=void 0===i?"":i,l=e.download,m=void 0===l?"":l,b=e.extra,v=void 0===b?"":b,f=e.loading;return m?u.a.createElement(n.a,{loading:f,active:!0,paragraph:{rows:1}},u.a.createElement(g,{type:"flex",justify:"space-between"},u.a.createElement(r.a,{xs:24,lg:12},u.a.createElement(d.l,{reverse:!0,content:a,subheader:c})),u.a.createElement(r.a,{xs:24,lg:12,style:{textAlign:s.j?"left":"right"}},y&&u.a.createElement("a",{href:p.f+m,target:"_blank",rel:"noopener noreferrer"},u.a.createElement(d.e,{icon:"eye",style:{marginRight:0}},"\xa0 ",u.a.createElement(o.Trans,{id:"View"})))))):v?u.a.createElement(n.a,{loading:f,active:!0,paragraph:{rows:1}},u.a.createElement(g,{type:"flex",justify:"space-between",align:"middle"},u.a.createElement(r.a,{xs:24,lg:12},u.a.createElement(d.l,{reverse:!0,content:a,subheader:c})),u.a.createElement(r.a,{xs:24,lg:12,style:{textAlign:s.j?"left":"right"}},u.a.createElement(h,{content:v,level:4})))):u.a.createElement(n.a,{loading:f,active:!0,paragraph:{rows:1}},u.a.createElement(E,{reverse:!0,content:a,subheader:c}))}},1673:function(e,t,a){"use strict";a.r(t);a(671);var n=a(309),r=a(157),i=a(213),c=a(19),o=a(23),l=(a(156),a(62)),u=a(28),d=a(0),m=a.n(d),s=a(42),b=a(1383),p=a(55),v=a(1373),f=a.n(v),j=a(1353),E=a(16),g=a(80),h=a(9),y=a(71),S=a(163),P=(a(418),a(181)),O=(a(667),a(420)),A=(a(210),a(83)),T=(a(91),a(37)),N=(a(97),a(25)),k=a(45),x=a(212),C=a(131),H=a(1343),L=a(443);function w(e){var t=e.handlers,a=e.data,n=e.i18n,r=e.loading,i=e.isAdding,c=t.handleEditAddNonAcademic,o=t.handleAddNewField,l=t.handleAddSubject,u=t.handleCancel,d=t.handleDelete,b=t.handleEditSubject,p=t.setEditMode,v=t.handleDeleteLocalLevels,f=a.subjectsSchema,E=a.activeKey,g=a.userNonAcademic,S=a.userSubjects,w=a.userData,_=a.options,D=JSON.parse(localStorage.getItem("userDetails"))||{},B=(y.b[w.country]||{}).symbol;return i?"non-academic"===E?m.a.createElement(k.b,{onSubmit:c,initialValues:{pricePerHour:0}},(function(e){var t=e.handleSubmit;return m.a.createElement(A.a,{layout:"vertical",onSubmit:t},m.a.createElement(T.a,{gutter:16,type:"flex"},m.a.createElement(N.a,{lg:12},m.a.createElement(x.a,{cascader:!0,name:"programmeSubjectSubNonAcademicPvid",placeholder:n._({id:"Subject name"}),label:m.a.createElement(h.Trans,{id:"Subject"}),options:_.subjects,marginBottom:"5px"})),m.a.createElement(N.a,{lg:12},m.a.createElement(C.a,{name:"pricePerHour",addonBefore:B,label:m.a.createElement(h.Trans,{id:"Price per hour"})}))),m.a.createElement(H.a,{type:"primary",block:!0},m.a.createElement(h.Trans,{id:"Save this subject"}))," ","\xa0"," ",m.a.createElement(L.a,{block:!0,onClick:u},m.a.createElement(h.Trans,{id:"Cancel"})))})):m.a.createElement(k.b,{onSubmit:l,validationSchema:f(n),initialValues:{pricePerHour:0}},(function(e){var t=e.handleSubmit;return m.a.createElement(A.a,{layout:"vertical",onSubmit:t},m.a.createElement(T.a,{gutter:16,type:"flex"},m.a.createElement(N.a,{lg:12},m.a.createElement(x.a,{name:"programmeSubjectPvid",placeholder:n._({id:"Subject name"}),label:m.a.createElement(h.Trans,{id:"Subject"}),options:_.subjects,marginBottom:"5px"})),m.a.createElement(N.a,{lg:12},m.a.createElement(x.a,{name:"programmeLevelPvid",mode:"multiple",placeholder:n._({id:"Curriculum"}),label:m.a.createElement(h.Trans,{id:"Curriculum"}),options:_.levels,marginBottom:"5px"})),m.a.createElement(N.a,{lg:12},m.a.createElement(C.a,{name:"pricePerHour",addonBefore:B,label:m.a.createElement(h.Trans,{id:"Price per hour"})}))),m.a.createElement(H.a,{type:"primary",block:!0},m.a.createElement(h.Trans,{id:"Save this subject"}))," ","\xa0"," ",m.a.createElement(L.a,{block:!0,onClick:u},m.a.createElement(h.Trans,{id:"Cancel"})))})):"non-academic"===E?m.a.createElement(m.a.Fragment,null,g.map((function(e,t){var a,i,o;return m.a.createElement(k.b,{key:e.pvid,onSubmit:c,validationSchema:j.object({pricePerHour:j.number().min(y.b[D.country].subjectMinTariff,n._({id:"Are you sure this is the right amount?"}))}),initialValues:{profileNonAcademicPvid:null===(a=e.subNonAcademic[0])||void 0===a?void 0:a.profileNonAcademicPvid,programmeSubjectSubNonAcademicPvid:[e.pvid,null===(i=e.subNonAcademic[0])||void 0===i?void 0:i.programmeSubjectSubNonAcademicPvid],pricePerHour:null===(o=e.subNonAcademic[0])||void 0===o?void 0:o.pricePerHour}},(function(e){var t=e.handleSubmit,a=e.dirty,i=e.initialValues;return m.a.createElement(A.a,{layout:"vertical",onSubmit:t},m.a.createElement(T.a,{gutter:16},m.a.createElement(N.a,{lg:24,xs:24},m.a.createElement(x.a,{cascader:!0,name:"programmeSubjectSubNonAcademicPvid",placeholder:n._({id:"Subject name"}),label:m.a.createElement(h.Trans,{id:"Subject"}),options:_.subjects,marginBottom:"5px"}))),m.a.createElement(T.a,{gutter:16},m.a.createElement(N.a,{lg:24,xs:24},m.a.createElement(C.a,{label:m.a.createElement(h.Trans,{id:"Price per hour"}),addonBefore:B,name:"pricePerHour"}))),m.a.createElement(H.a,{type:"primary",disabled:!a},m.a.createElement(h.Trans,{id:"Update"}))," ","\xa0",m.a.createElement(O.a,{title:m.a.createElement(h.Trans,{id:"Delete this subject?"}),onConfirm:function(){return d(i.profileNonAcademicPvid)}},m.a.createElement(L.a,{icon:"close",loading:r},"\xa0 ",m.a.createElement(h.Trans,{id:"Delete"}))),m.a.createElement(P.a,null))}))})),m.a.createElement(s.d,{block:!0,type:"dashed",size:"medium",icon:"plus",onClick:o,className:"mb2em"},"\xa0 ",m.a.createElement(h.Trans,{id:"Add a new subject"})),m.a.createElement(L.a,{block:!0,icon:"close",onClick:function(){return p(!1)}},"\xa0 ",m.a.createElement(h.Trans,{id:"Cancel"}))):m.a.createElement(m.a.Fragment,null,S.map((function(e){var t,a,i=e.subject&&e.subject.level;return m.a.createElement(k.b,{key:e.pvid,onSubmit:b,validationSchema:j.object({pricePerHour:j.number().min(y.b[D.country].subjectMinTariff,n._({id:"Are you sure this is the right amount?"}))}),initialValues:{pvid:e.subject.pvid,programmeSubjectPvid:Number(null===(t=e.subject)||void 0===t?void 0:t.pvid),programmeLevelPvid:i&&i.map((function(e){return e.name})),pricePerHour:i&&(null===(a=i[0])||void 0===a?void 0:a.pricePerHour)}},(function(t){var a=t.handleSubmit,i=t.dirty;return m.a.createElement(A.a,{layout:"vertical",onSubmit:a},m.a.createElement(T.a,{gutter:16},m.a.createElement(N.a,{lg:12,xs:12},m.a.createElement(x.a,{name:"programmeSubjectPvid",placeholder:n._({id:"Subject name"}),label:m.a.createElement(h.Trans,{id:"Subject"}),options:_.subjects,marginBottom:"5px"})),m.a.createElement(N.a,{lg:12,xs:12},m.a.createElement(x.a,{name:"programmeLevelPvid",mode:"multiple",placeholder:n._({id:"Curriculum"}),label:m.a.createElement(h.Trans,{id:"Curriculum"}),options:_.levels,marginBottom:"5px",onDeselect:v(e.subject.name)}))),m.a.createElement(T.a,{gutter:16},m.a.createElement(N.a,{lg:12,xs:24},m.a.createElement(C.a,{label:m.a.createElement(h.Trans,{id:"Price per hour"}),addonBefore:B,name:"pricePerHour"}))),m.a.createElement(H.a,{type:"primary",disabled:!i},m.a.createElement(h.Trans,{id:"Update"}))," ","\xa0",m.a.createElement(O.a,{title:m.a.createElement(h.Trans,{id:"Delete this subject?"}),onConfirm:function(){return d(e.subject.pvid)}},m.a.createElement(L.a,{icon:"close",loading:r},"\xa0 ",m.a.createElement(h.Trans,{id:"Delete"}))),m.a.createElement(P.a,null))}))})),m.a.createElement(s.d,{block:!0,type:"dashed",size:"medium",icon:"plus",onClick:o,className:"mb2em"},"\xa0 ",m.a.createElement(h.Trans,{id:"Add a new subject"})),m.a.createElement(L.a,{block:!0,icon:"close",onClick:function(){return p(!1)}},"\xa0 ",m.a.createElement(h.Trans,{id:"Cancel"})))}var _=a(419);var D=function(e){var t=JSON.parse(localStorage.getItem("userDetails"))||{};return j.object().shape({programmeSubjectPvid:j.number().required(e._({id:"You have to fill in your subject"})),programmeLevelPvid:j.number().required(e._({id:"You have to fill in your level/curriculum"})),pricePerHour:j.number().min(y.b[t.country].subjectMinTariff,e._({id:"Are you sure this is the right amount?"}))})};t.default=Object(h.withI18n)()((function(e){var t=e.onEditMode,a=e.onSubjects,v=e.fetchUser,j=e.unauthorizedUser,P=e.i18n,O=e.userData,A=void 0===O?{}:O,T=t.editMode,N=t.setEditMode,k=a.subjects,x=void 0===k?[]:k,C=a.nonAcademicSubjects,H=void 0===C?[]:C,L=Object(d.useState)([]),B=Object(u.a)(L,2),V=B[0],M=B[1],q=Object(d.useState)([]),I=Object(u.a)(q,2),z=I[0],F=I[1],R=Object(d.useState)([]),U=Object(u.a)(R,2),J=U[0],Y=U[1],K=Object(d.useState)(!1),G=Object(u.a)(K,2),Q=G[0],W=G[1],X=Object(d.useState)("academic"),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=Object(_.c)({isNonAcademic:"non-academic"===$}).options,ae=(y.b[A.country]||{}).symbol,ne=Object(p.b)(g.L,{client:Object(E.k)(),onCompleted:function(){v().then((function(){return l.a.success(P._({id:"The subject item has been updated"}),2)})).finally((function(){return N("")}))},onError:function(e){return Object(E.q)(e)}}),re=Object(u.a)(ne,1)[0],ie=Object(p.b)(g.L,{client:Object(E.k)(),onCompleted:function(){v().then((function(){return l.a.success(P._({id:"The subject item has been added"}),2)})).finally((function(){return N("")}))},onError:function(e){return Object(E.q)(e)}}),ce=Object(u.a)(ie,1)[0],oe=Object(p.b)(g.B,{client:Object(E.k)(),onCompleted:function(){N(""),v().then((function(){return l.a.success(P._({id:"The subject item has been deleted"}),2)}))},onError:function(e){return Object(E.q)(e)}}),le=Object(u.a)(oe,2),ue=le[0],de=le[1].loading,me=Object(p.b)(g.d,{client:Object(E.k)(),onCompleted:function(){return Y([])},onError:function(e){return Object(E.q)(e)}}),se=Object(u.a)(me,1)[0],be=Object(p.b)(S.a,{client:Object(E.k)(),onCompleted:function(){N(""),v().then((function(){return l.a.success(P._({id:"The subject item has been deleted"}),2)}))},onError:function(e){return Object(E.q)(e)}}),pe=Object(u.a)(be,2),ve=pe[0],fe=pe[1].loading,je=Object(p.b)(S.g,{client:Object(E.k)(),onCompleted:function(){N(""),v().then((function(){return l.a.success(P._({id:"The subject item has been updated"}),2)}))},onError:function(e){return Object(E.q)(e)}}),Ee=Object(u.a)(je,1)[0],ge=function(e,t){var a,n=t.setSubmitting,r=e,i=(r.source,r.programmeLevelPvid,r.pricePerHour,r.pvid),l=Object(o.a)(r,["source","programmeLevelPvid","pricePerHour","pvid"]),u=e,d=u.programmeSubjectPvid,m=u.programmeLevelPvid,s=u.pricePerHour,b=m.map((function(e,t){var a,n,r,c=V.findIndex((function(e){return e.subject.pvid===i})),o=(null===(a=V[c])||void 0===a||null===(n=a.subject)||void 0===n?void 0:n.level.find((function(t){return t.name===e})))||{};return"string"===typeof e&&(e=null===(r=te.levels)||void 0===r?void 0:r.find((function(t){return t.label===e})).value),{programmeLevelPvid:e,pricePerHour:Number(s),pvid:o.pvid||""}})),p="number"===typeof d?d:null===(a=te.subjects)||void 0===a?void 0:a.find((function(e){return e.label===d})).value;if(e=Object(c.a)({},l,{programmeLevel:b,programmeSubjectPvid:p,orderList:1,isStore:!1}),J.length>0){var v=J.map((function(e){return e.pvid})).filter((function(e){return Boolean(e)}));se({variables:{pvidList:v}})}re({variables:{list:Object(c.a)({},e)}}).finally((function(){return n(!1)}))},he=function(e,t){var a=t.setSubmitting,n=e.programmeSubjectSubNonAcademicPvid,r=e=Object(c.a)({},e,{orderList:1,isDeleted:!1,profileNonAcademicPvid:Q?"":e.profileNonAcademicPvid,programmeSubjectSubNonAcademicPvid:n[1],pricePerHour:parseFloat(e.pricePerHour)}),i=(r.pvid,Object(o.a)(r,["pvid"]));Ee({variables:{list:[i]}}).finally((function(){return a(!1)}))},ye=function(e,t){var a=t.setSubmitting,n=e.programmeLevelPvid.map((function(t){return{programmeLevelPvid:t,pricePerHour:Number(e.pricePerHour)}})),r=e=Object(c.a)({},e,{orderList:1,isStore:!0,pricePerHour:Number(e.pricePerHour),programmeLevel:n}),i=(r.programmeLevelPvid,r.pricePerHour,Object(o.a)(r,["programmeLevelPvid","pricePerHour"]));ce({variables:{list:[Object(c.a)({},i)]}}).finally((function(){a(!1),W(!1)}))},Se=function(e){var t="non-academic"===$,a=t?z.find((function(t){return t.subNonAcademic[0].profileNonAcademicPvid===e}))||{}:V.find((function(t){return t.subject.pvid===e}))||{},n=t?ve:ue,r=t?a.subNonAcademic[0].profileNonAcademicPvid:a.subject.pvid,c=t?"pvidList":"pvid";n({variables:Object(i.a)({},c,r)})},Pe=function(){W(!1),M(x),N("")},Oe=function(){W(!0),M((function(e){return[].concat(Object(r.a)(e),[{id:f()(),programmeSubjectPvid:"",pricePerHour:0,subject:{pvid:null},level:{pvid:null},orderList:0}])}))},Ae=function(e){return function(t){var a=e.find((function(e){return e.name===t}));se({variables:{pvid:a.programmeLevelPvid}})}},Te=function(e){return function(t){var a,n,i=V.findIndex((function(t){return t.subject.name===e})),c=(null===(a=V[i].subject)||void 0===a||null===(n=a.level)||void 0===n?void 0:n.find((function(e){return e.name===t})))||{};Y((function(e){return[].concat(Object(r.a)(e),[c])}))}},Ne=fe;return Object(d.useEffect)((function(){M(x),F(H)}),[H,x]),m.a.createElement(s.u,{paddingHorizontal:0,noPadding:E.j,marginBottom:0},function(e){return"subjects"===T?m.a.createElement(w,{i18n:P,loading:de,isAdding:Q,data:{subjectsSchema:D,activeKey:$,userNonAcademic:z,userSubjects:V,userData:A,options:te},handlers:{handleEditAddNonAcademic:he,handleAddNewField:Oe,handleAddSubject:ye,handleCancel:Pe,handleDelete:Se,handleDeleteLevel:Ae,handleEditSubject:ge,handleDeleteLocalLevels:Te,setEditMode:N}}):"subjects"!==T?m.a.createElement(n.a,{onChange:function(e){return ee(e)},defaultActiveKey:$},m.a.createElement(n.a.TabPane,{tab:m.a.createElement(h.Trans,{id:"Academic"}),key:"academic"},0===V.length?m.a.createElement(s.j,{description:j?m.a.createElement(h.Trans,{id:"This tutor didn't set any subjects yet"}):m.a.createElement(h.Trans,{id:"You haven't set any subjects yet"})}):V.map((function(t){var a,n=t.subject,r=void 0===n?{}:n,i=t.pvid,c=r.level&&r.level[0].pricePerHour;return m.a.createElement(b.a,{key:i,title:r.name||"",description:null===(a=r.level)||void 0===a?void 0:a.map((function(e,t){return m.a.createElement("p",{key:t},e.name)})),loading:e,extra:m.a.createElement(h.Trans,{id:"{symbol} {0} per hour",values:{0:Object(E.m)(c),symbol:ae}})})}))),m.a.createElement(n.a.TabPane,{tab:m.a.createElement(h.Trans,{id:"Non-academic"}),key:"non-academic"},0===z.length?m.a.createElement(s.j,{description:j?m.a.createElement(h.Trans,{id:"This tutor didn't set any subjects yet"}):m.a.createElement(h.Trans,{id:"You haven't set any subjects yet"})}):z.map((function(t){var a=t.subNonAcademic,n=Object(o.a)(t,["subNonAcademic"]);return m.a.createElement(b.a,{key:n.pvid,title:n.name,description:a.map((function(e,t){return m.a.createElement("p",{key:t},e.name)})),loading:e,extra:a.map((function(e){return m.a.createElement(h.Trans,{key:e.pvid,id:"{symbol} {0} per hour",values:{0:Object(E.m)(e.pricePerHour),symbol:ae}})}))})})))):void 0}(Ne))}))}}]);
//# sourceMappingURL=32.641c4ec1.chunk.js.map