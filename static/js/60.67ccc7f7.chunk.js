(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[60],{1362:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return h}));a(91);var n=a(34),c=(a(98),a(23)),r=(a(1263),a(1338)),o=a(70),i=a.n(o),s=a(26),u=a(118),l=a(28),d=a(0),p=a.n(d),m=a(43),f=a(168),b=a.n(f),g=a(13);function h(){b.a.defaults.baseURL="https://payment.stage.cudy.co/api/v1",b.a.defaults.headers.common["api-key"]="63d0abee-eeaa-4d23-88fe-1b0f245a1643";var t=JSON.parse(localStorage.getItem("userDetails"))||{},e="sg"===t.country?"SGD":"id"===t.country?"IDR":"",a=Object(d.useState)([]),o=Object(l.a)(a,2),f=o[0],h=o[1],O=Object(d.useState)({current:1,pageSize:10}),j=Object(l.a)(O,2),y=j[0],S=j[1],v=Object(d.useState)(!0),I=Object(l.a)(v,2),x=I[0],k=I[1],D=Object(d.useState)(!1),w=Object(l.a)(D,2),E=w[0],z=w[1],A=[{title:"Payment ID",dataIndex:"id"},{title:"Description",dataIndex:"description"},{title:"Amount",dataIndex:"amount",sorter:function(t,e){return t.amount-e.amount},sortDirections:["descend","ascend"],render:function(t){return"".concat(e," ").concat(Object(g.f)(t))},width:150},{title:"Booking ID",dataIndex:"booking_id",width:150},{title:"Created At",dataIndex:"createdAt"},{title:"Status",dataIndex:"status_payment.name"}];Object(d.useEffect)((function(){E||(t.email?J():(console.log("not auth"),k(!1)),z(!0))}));var J=function(){var e=Object(u.a)(i.a.mark((function e(){var a,n,c,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:y,k(!0),e.prev=2,e.next=5,b.a.post("/payments/list/transaction",{email:t.email,applicationName:"cudy-i3",limit:a.pageSize,offset:(a.current-1)*a.pageSize});case 5:n=e.sent,c=n.data.data,h(c.list.map((function(t){return Object(s.a)({key:t.id},t)}))),S(Object(s.a)({},y,{total:c.total})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("fetch error",e.t0);case 14:k(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return console.log(f),p.a.createElement(m.n,null,p.a.createElement(m.u,{className:"p2em"},p.a.createElement(n.a,{gutter:32},p.a.createElement(c.a,null,p.a.createElement(r.a,{loading:x,columns:A,dataSource:f,onChange:function(t,e,a,n){S(t),J(t)},pagination:y})))))}}}]);
//# sourceMappingURL=60.67ccc7f7.chunk.js.map