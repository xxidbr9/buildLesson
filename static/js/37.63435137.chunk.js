(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[37],{1336:function(e,a,t){"use strict";var n=t(183),r=t(1337),l=t(1338);n.a.Button=l.a,n.a.Group=r.a,a.a=n.a},1346:function(e,a,t){"use strict";t(210);var n=t(83),r=t(23),l=(t(668),t(1336)),o=t(5),c=t(0),i=t.n(c),s=t(1386),u=t(300),m=t(15);function d(){var e=Object(o.a)(["\n\t> label {\n\t\tdisplay: ",";\n\t\twidth: ",";\n\t\tmargin-bottom: ",";\n\t\tpadding: ",";\n\t\theight: ",";\n\t}\n"]);return d=function(){return e},e}function b(){var e=Object(o.a)(["\n\t> label {\n\t\tdisplay: ",";\n\t\twidth: ",";\n\t}\n"]);return b=function(){return e},e}var p=Object(m.b)(s.a.Group)(b(),(function(e){return e.labelBlock&&"block"}),(function(e){return e.labelBlock&&"100%"})),E=Object(m.b)(l.a.Group)(d(),(function(e){return e.labelBlock&&"block"}),(function(e){return e.labelBlock&&"100%"}),(function(e){return e.labelBlock&&"1em"}),(function(e){return e.labelBlock&&"1em"}),(function(e){return e.labelBlock&&"auto"}));a.a=function(e){var a=e.options,t=void 0===a?[]:a,o=e.name,c=e.label,m=e.independent,d=e.isButton,b=void 0===d||d,f=Object(r.a)(e,["options","name","label","independent","isButton"]);return m?i.a.createElement(n.a.Item,{name:o,label:c},i.a.createElement(E,Object.assign({},f,{name:o,buttonStyle:"solid"}),t.map((function(e){return i.a.createElement(l.a.Button,Object.assign({},e,{value:e.value,key:e.value}),e.label)})))):i.a.createElement(u.a,{name:o,label:c},b?i.a.createElement(p,Object.assign({},f,{name:o,buttonStyle:"solid"}),t.map((function(e){return i.a.createElement(s.a.Button,{value:e.value,key:e.value},e.label)}))):i.a.createElement(p,Object.assign({},f,{options:t,name:o})))}},1386:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t(3),r=t(1336),l=t(45),o=t(0),c=function(e){var a=e.name,t=e.validate,c=e.onChange,i=Object(n.e)(e,["name","validate","onChange"]);return o.createElement(l.a,{name:a,validate:t},(function(e){var t=e.field.value,n=e.form,l=n.setFieldValue,s=n.setFieldTouched;return o.createElement(r.a,Object.assign({value:t,onChange:function(e){l(a,e.target.value),s(a,!0),c&&c(e)}},i))}))};c.Group=function(e){var a=e.name,t=e.validate,c=e.onChange,i=Object(n.e)(e,["name","validate","onChange"]);return o.createElement(l.a,{name:a,validate:t},(function(e){var t=e.field.value,n=e.form,l=n.setFieldValue,s=n.setFieldTouched;return o.createElement(r.a.Group,Object.assign({value:t,onChange:function(e){l(a,e.target.value),s(a,!0),c&&c(e)}},i))}))},c.Button=r.a.Button},1686:function(e,a,t){"use strict";t.r(a);t(92);var n=t(8),r=(t(210),t(83)),l=(t(91),t(37)),o=(t(97),t(25)),c=(t(672),t(433)),i=t(19),s=(t(156),t(62)),u=t(28),m=(t(671),t(309)),d=t(5),b=t(0),p=t.n(b),E=t(27),f=t(42),g=t(15),v=t(45),h=t(131),w=t(55),y=t(80),O=t(16),j=t(300),T=t(1707),C=t(1343),S=t(38),k=t.n(S),B=t(1346),P=t(421),_=t(212),I=t(182),Y=t(98),N=t(9),D=t(71),F=t(51),x=t(223),z=t(46),G=t(32),M=t(441);function V(){var e=Object(d.a)(["\n\t&& {\n\t\t.ant-tabs-left-content {\n\t\t\tpadding-left: 4em;\n\t\t}\n\t}\n"]);return V=function(){return e},e}var L=Object(g.b)(m.a)(V()),J={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},R={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:6}}},q=Object(O.k)("programme"),A=Object(O.k)("account");var U=function(e){var a={};return e.newPassword1?e.newPassword1.length<8&&(a.newPassword1="At least 8 characters"):a.newPassword1="You have to provide your new password",e.newPassword2?e.newPassword2!==e.newPassword1&&(a.newPassword2="The password doesn't match"):a.newPassword2="Please repeat your new password",a};a.default=Object(N.withI18n)()(Object(E.j)((function(e){var a=e.i18n,t=Object(b.useState)({}),d=Object(u.a)(t,2),g=d[0],S=d[1],V=Object(b.useState)(!1),W=Object(u.a)(V,2),H=W[0],Q=W[1],K=JSON.parse(localStorage.getItem("userDetails"))||{},X="STDN"===(K.role||{}).code,Z=Object(E.g)().push,$=g.firstName,ee=g.lastName,ae=g.dob,te=g.phone,ne=void 0===te?"":te,re=g.race,le=g.gender,oe={firstName:$,lastName:ee,dob:ae,phone:ne&&ne.startsWith("+")?ne.slice(3):ne,race:re,gender:le},ce=g.curriculumList||[],ie=ce&&ce[0]&&ce[0].source||{},se=a._({id:"I have specific reason"}),ue=[{value:"I registered with wrong role",label:a._({id:"I registered with wrong role"})},{value:"I have no longer been active in education",label:a._({id:"I have no longer been active in education"})},{value:se,label:se}],me=Object(w.c)(I.b,{client:q,variables:{country:K.country}}).data,de=((void 0===me?{}:me).getProgrammeLevelList||[]).map((function(e){return{value:Number(e.pvid),label:e.name}})),be=Object(w.a)(P.h,M.b),pe=Object(u.a)(be,1)[0],Ee=Object(w.b)(P.a,{client:A,onCompleted:function(e){pe()}}),fe=Object(u.a)(Ee,1)[0],ge=Object(w.b)(y.Q,{client:Object(O.k)(),onCompleted:function(e){e=e.getProfile||{},S(e)}}),ve=Object(u.a)(ge,2),he=ve[0],we=ve[1].loading,ye=Object(w.b)(y.G,{client:Object(O.k)("profile"),onCompleted:function(){s.a.success(a._({id:"Your curriculum has been updated"})),he()}}),Oe=Object(u.a)(ye,1)[0],je=Object(w.b)(y.J,{client:Object(O.k)("account"),onCompleted:function(){return s.a.success(a._({id:"Your profile has been updated"}))},onError:function(e){return Object(O.q)(e)}}),Te=Object(u.a)(je,1)[0],Ce=Object(w.b)(P.g,{client:Object(O.k)("account"),onCompleted:function(){s.a.loading(a._({id:"Resetting your password..."})).then((function(){s.a.success(a._({id:"Your password has been changed"}))}))},onError:function(e){return Object(O.q)(e)}}),Se=Object(u.a)(Ce,1)[0],ke=function(){var e="";return g.gender==="F".toUpperCase()&&(e="STDN"===g.roleCode?"icon--student":"icon--businesswoman"),g.gender==="M".toUpperCase()&&(e="STDN"===g.roleCode?"icon--basicpeople":"icon--businessman"),e}();return Object(b.useEffect)((function(){he()}),[he,g.gender,g.roleCode]),localStorage.getItem("token")||Z("/".concat(G.d,"/404")),we?p.a.createElement(f.o,null):p.a.createElement(f.n,{breadcrumb:!1},p.a.createElement(f.u,{paddingHorizontal:"very",style:{paddingTop:"4em"}},p.a.createElement(l.a,{type:"flex",justify:"center",className:"mb4em"},p.a.createElement(o.a,{lg:18},p.a.createElement(L,{tabPosition:O.j?"top":"left"},p.a.createElement(m.a.TabPane,{tab:p.a.createElement(N.Trans,{id:"Basic"}),key:"basic"},p.a.createElement(l.a,{type:"flex",align:"middle",justify:"space-between",style:{marginBottom:"2em"}},p.a.createElement(o.a,{lg:8},p.a.createElement(f.l,{content:p.a.createElement(N.Trans,{id:"Basic"}),level:4,subheader:p.a.createElement(N.Trans,{id:"Your basic profile details"})})),p.a.createElement(o.a,{lg:8},p.a.createElement(N.Trans,{id:"<0/> \xa0 You are a <1>{0}</1>",values:{0:g.roleName},components:[p.a.createElement(Y.a,{type:ke}),p.a.createElement("strong",{className:"primary"})]}))),p.a.createElement(v.b,{enableReinitialize:!0,onSubmit:function(e,a){var t=a.setSubmitting;e=Object(i.a)({},e,{dob:k()(e.dob).format("YYYY-MM-DD")}),Te({variables:e}).finally((function(){return t(!1)}))},initialValues:oe},(function(e){var t=e.handleSubmit,n=e.dirty;return p.a.createElement(r.a,Object.assign({},J,{onSubmit:t}),p.a.createElement(h.a,{name:"firstName",placeholder:a._({id:"First name"}),label:p.a.createElement(N.Trans,{id:"First name"})}),p.a.createElement(h.a,{name:"lastName",placeholder:a._({id:"Last name"}),label:p.a.createElement(N.Trans,{id:"Last name"})}),p.a.createElement(B.a,{name:"gender",label:p.a.createElement(N.Trans,{id:"Gender"}),options:[{value:"M",label:p.a.createElement(N.Trans,{id:"Male"})},{value:"F",label:p.a.createElement(N.Trans,{id:"Female"})}]}),p.a.createElement(j.a,{name:"dob",label:p.a.createElement(N.Trans,{id:"DOB"})},p.a.createElement(T.a,{name:"dob",placeholder:a._({id:"Your date of birth"}),label:p.a.createElement(N.Trans,{id:"DOB"})})),p.a.createElement(h.a,{name:"phone",placeholder:a._({id:"Mobile number"}),label:p.a.createElement(N.Trans,{id:"Mobile number"}),addonBefore:(D.b[K.country]||{}).phoneCode,marginBottom:"3em"}),p.a.createElement(r.a.Item,R,p.a.createElement(N.Trans,{id:"<0>Save changes</0>",components:[p.a.createElement(C.a,{size:"large",disabled:!n})]})))}))),X&&p.a.createElement(m.a.TabPane,{tab:p.a.createElement(N.Trans,{id:"Education"}),key:"education"},p.a.createElement(f.l,{content:p.a.createElement(N.Trans,{id:"Education"}),level:4,subheader:p.a.createElement(N.Trans,{id:"Some educational details of you"}),marginBottom:"3em"}),p.a.createElement(v.b,{initialValues:{programmeCurriculumPvid:ie.name},onSubmit:function(e,a){var t=a.setSubmitting;e=ce.length>0?Object(i.a)({pvid:ce[0].pvid},e):e,Oe({variables:{list:[Object(i.a)({},e)]}}).finally((function(){t(!1)}))}},(function(e){var t=e.handleSubmit,n=e.dirty;return p.a.createElement(r.a,Object.assign({},J,{onSubmit:t}),p.a.createElement(_.a,{name:"programmeCurriculumPvid",label:p.a.createElement(N.Trans,{id:"Curriculum and level"}),placeholder:a._({id:"Select one..."}),options:de}),p.a.createElement(r.a.Item,R,p.a.createElement(N.Trans,{id:"<0>Save changes</0>",components:[p.a.createElement(C.a,{disabled:!n,size:"large"})]})))}))),p.a.createElement(m.a.TabPane,{tab:p.a.createElement(N.Trans,{id:"Change password"}),key:"password"},p.a.createElement(f.l,{content:p.a.createElement(N.Trans,{id:"Change password"}),level:4,subheader:p.a.createElement(N.Trans,{id:"If you don't satisfy with your current password"}),marginBottom:"3em"}),p.a.createElement(v.b,{onSubmit:function(e,a){var t=a.setSubmitting;Se({variables:e}).finally((function(){return t(!1)}))},validate:U,initialValues:{}},(function(e){var t=e.handleSubmit,n=e.dirty;return p.a.createElement(r.a,Object.assign({},J,{onSubmit:t}),p.a.createElement(h.a,{password:!0,name:"newPassword1",placeholder:a._({id:"Your new password..."}),label:p.a.createElement(N.Trans,{id:"Your new password"})}),p.a.createElement(h.a,{password:!0,name:"newPassword2",placeholder:a._({id:"Repeat your new password..."}),label:p.a.createElement(N.Trans,{id:"Repeat password"})}),p.a.createElement(h.a,{password:!0,name:"oldPassword",placeholder:a._({id:"Your old password..."}),label:p.a.createElement(N.Trans,{id:"Your old password"})}),p.a.createElement(r.a.Item,R,p.a.createElement(C.a,{size:"large",disabled:!n},p.a.createElement(N.Trans,{id:"Save changes"}))))}))),p.a.createElement(m.a.TabPane,{tab:p.a.createElement(N.Trans,{id:"<0/> Danger zone",components:[p.a.createElement(n.a,{type:"warning",theme:"filled",style:{color:z.a.redColor}})]}),key:"danger"},p.a.createElement(f.l,{content:p.a.createElement(N.Trans,{id:"Danger zone"}),level:4,subheader:p.a.createElement(N.Trans,{id:"If for some reasons you would like to delete your Cudy account, you can use this section"}),marginBottom:"3em"}),H?p.a.createElement(v.b,{onSubmit:function(e,t){var n=t.setSubmitting,r=e.reason,l=e.another_reason;c.a.confirm({width:600,centered:!0,title:a._({id:"Final warning"}),content:a._({id:"This action will deactivate your Cudy account forever. Are you sure you want to do this?"}),onOk:function(){return fe({variables:{reason:l||r}})},okText:a._({id:"Yes, I'd like to delete my account now"}),cancelText:a._({id:"No, cancel this"})}),n(!1)},initialValues:{reason:""}},(function(e){var t=e.handleSubmit,n=e.dirty,l=e.values;return p.a.createElement(r.a,{layout:"vertical",onSubmit:t},p.a.createElement(_.a,{name:"reason",options:ue,label:p.a.createElement(N.Trans,{id:"Tell us the reason"})}),l.reasons===se&&p.a.createElement(h.a,{texarea:!0,rows:3,name:"another_reason",placeholder:a._({id:"Write down your specific reason..."})}),p.a.createElement(C.a,{type:"primary",size:"large",disabled:!n},p.a.createElement(N.Trans,{id:"Delete my account"}))," ","\xa0",p.a.createElement(f.e,{onClick:function(){return Q(!1)}},p.a.createElement(N.Trans,{id:"Cancel"})))})):p.a.createElement(p.a.Fragment,null,p.a.createElement(x.a,{message:p.a.createElement(N.Trans,{id:"Delete your account?"}),description:p.a.createElement(N.Trans,{id:"Only proceed if you are completely sure of what you are doing"}),type:"warning",showIcon:!0}),p.a.createElement(F.a,{type:"primary",onClick:function(){return Q(!0)}},p.a.createElement(N.Trans,{id:"Proceed <0/>",components:[p.a.createElement(n.a,{type:"right"})]})))))))))})))}}]);
//# sourceMappingURL=37.63435137.chunk.js.map