{"version":3,"sources":["../node_modules/uuid/v4.js","../node_modules/uuid/lib/rng-browser.js","../node_modules/uuid/lib/bytesToUuid.js","pages/Tutor/Profile/DataList.jsx","pages/Tutor/Profile/_SubjectsEditMode.jsx","pages/Tutor/Profile/Subjects.jsx"],"names":["rng","require","bytesToUuid","module","exports","options","buf","offset","i","Array","rnds","random","ii","getRandomValues","crypto","bind","msCrypto","window","rnds8","Uint8Array","r","Math","byteToHex","toString","substr","bth","join","StyledHeading","styled","Heading","StyledRow","HeadingExtra","baseStyles","greyColor","token","localStorage","getItem","DataList","title","description","download","extra","loading","active","paragraph","rows","type","justify","xs","lg","reverse","content","subheader","style","textAlign","mobile","href","SERVER_BASE_URL","target","rel","icon","marginRight","align","level","SubjectsEditMode","handlers","data","i18n","isAdding","handleEditAddNonAcademic","handleAddNewField","handleAddSubject","handleCancel","handleDelete","handleEditSubject","setEditMode","handleDeleteLocalLevels","subjectsSchema","activeKey","userNonAcademic","userSubjects","userData","userDetails","JSON","parse","symbol","countryMap","country","onSubmit","initialValues","pricePerHour","handleSubmit","layout","gutter","SelectInput","cascader","name","placeholder","_","label","subjects","marginBottom","TextInput","addonBefore","block","ButtonLink","onClick","validationSchema","mode","levels","map","item","idx","key","pvid","yup","min","subjectMinTariff","profileNonAcademicPvid","subNonAcademic","programmeSubjectSubNonAcademicPvid","dirty","disabled","onConfirm","size","className","subject","programmeSubjectPvid","Number","programmeLevelPvid","sub","onDeselect","shape","required","withI18n","onEditMode","onSubjects","fetchUser","unauthorizedUser","editMode","nonAcademicSubjects","useState","setUserSubjects","setUserNonAcademic","deletedLevels","setDeletedLevels","setIsAdding","setActiveKey","useProgrammeList","isNonAcademic","useMutation","mutateUpdateSubjects","client","newClient","onCompleted","then","message","success","finally","onError","err","renderError","updateSubjects","addSubjects","mutateDeleteSubjects","deleteSubjects","loadingDelete","DELETE_SUBJECTS_LEVEL","deleteLevel","DELETE_SUBJECT_NON_ACADEMIC","deleteSubjectNonAcademic","loadingNonAcademic","MUTATE_SUBJECT_NON_ACADEMIC","updateSubjectsNonAcademic","values","setSubmitting","source","rest","price","programmeLevel","index","findIndex","selectedLevel","find","l","value","orderList","isStore","length","pvidList","filter","Boolean","variables","list","subjectPvid","isDeleted","parseFloat","actual","filtered","handler","payload","prop","prev","id","uuid","handleDeleteLevel","selected","useEffect","paddingHorizontal","noPadding","onChange","defaultActiveKey","TabPane","tab","pricer","renderSubjects"],"mappings":"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","file":"static/js/32.641c4ec1.chunk.js","sourcesContent":["var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","import React from \"react\"\nimport { Heading, ButtonLink } from \"components\"\nimport { Row, Col, Skeleton } from \"antd\"\nimport styled from \"styled-components\"\nimport { mobile } from \"helpers\"\nimport { baseStyles } from \"styles/base\"\nimport { Trans } from \"@lingui/macro\"\nimport { SERVER_BASE_URL } from \"helpers/constants\"\n\nconst StyledHeading = styled(Heading)`\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tpadding-bottom: 1em;\n\t}\n`\n\nconst StyledRow = styled(Row)`\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tmargin-bottom: 1em;\n\t}\n`\n\nconst HeadingExtra = styled(Heading)`\n\t&& {\n\t\th4 {\n\t\t\tfont-size: 1em;\n\t\t\tcolor: ${baseStyles.greyColor};\n\t\t}\n\t}\n`\n\nconst token = localStorage.getItem(\"token\")\n\nexport default function DataList({ title = \"\", description = \"\", download = \"\", extra = \"\", loading }) {\n\tif (download) {\n\t\treturn (\n\t\t\t<Skeleton loading={loading} active paragraph={{ rows: 1 }}>\n\t\t\t\t<StyledRow type=\"flex\" justify=\"space-between\">\n\t\t\t\t\t<Col xs={24} lg={12}>\n\t\t\t\t\t\t<Heading reverse content={title} subheader={description} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={24} lg={12} style={{ textAlign: mobile ? \"left\" : \"right\" }}>\n\t\t\t\t\t\t{token && (\n\t\t\t\t\t\t\t<a href={SERVER_BASE_URL + download} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t\t<ButtonLink icon=\"eye\" style={{ marginRight: 0 }}>\n\t\t\t\t\t\t\t\t\t&nbsp; <Trans>View</Trans>\n\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Col>\n\t\t\t\t</StyledRow>\n\t\t\t</Skeleton>\n\t\t)\n\t}\n\n\tif (extra)\n\t\treturn (\n\t\t\t<Skeleton loading={loading} active paragraph={{ rows: 1 }}>\n\t\t\t\t<StyledRow type=\"flex\" justify=\"space-between\" align=\"middle\">\n\t\t\t\t\t<Col xs={24} lg={12}>\n\t\t\t\t\t\t<Heading reverse content={title} subheader={description} />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={24} lg={12} style={{ textAlign: mobile ? \"left\" : \"right\" }}>\n\t\t\t\t\t\t<HeadingExtra content={extra} level={4} />\n\t\t\t\t\t</Col>\n\t\t\t\t</StyledRow>\n\t\t\t</Skeleton>\n\t\t)\n\n\treturn (\n\t\t<Skeleton loading={loading} active paragraph={{ rows: 1 }}>\n\t\t\t<StyledHeading reverse content={title} subheader={description} />\n\t\t</Skeleton>\n\t)\n}\n","import React from \"react\"\nimport { Formik } from \"formik\"\nimport { Form, Row, Col, Divider, Popconfirm } from \"antd\"\nimport SelectInput from \"components/forms/SelectInput\"\nimport TextInput from \"components/forms/TextInput\"\nimport { SubmitButton } from \"formik-antd\"\nimport { Trans, t } from \"@lingui/macro\"\nimport ButtonLink from \"components/ButtonLink\"\nimport { countryMap } from \"helpers/countryMapping\"\nimport { Button } from \"components\"\nimport * as yup from \"yup\"\n\nexport default function SubjectsEditMode({ handlers, data, i18n, loading, isAdding }) {\n\tconst {\n\t\thandleEditAddNonAcademic,\n\t\thandleAddNewField,\n\t\thandleAddSubject,\n\t\thandleCancel,\n\t\thandleDelete,\n\t\thandleEditSubject,\n\t\tsetEditMode,\n\t\thandleDeleteLocalLevels\n\t} = handlers\n\tconst { subjectsSchema, activeKey, userNonAcademic, userSubjects, userData, options } = data\n\tconst userDetails = JSON.parse(localStorage.getItem(\"userDetails\")) || {}\n\tconst symbol = (countryMap[userData.country] || {}).symbol\n\n\tif (isAdding) {\n\t\tif (activeKey === \"non-academic\") {\n\t\t\treturn (\n\t\t\t\t<Formik onSubmit={handleEditAddNonAcademic} initialValues={{ pricePerHour: 0 }}>\n\t\t\t\t\t{({ handleSubmit }) => (\n\t\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t<Row gutter={16} type=\"flex\">\n\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\t\tcascader\n\t\t\t\t\t\t\t\t\t\tname=\"programmeSubjectSubNonAcademicPvid\"\n\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Subject name`)}\n\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Subject</Trans>}\n\t\t\t\t\t\t\t\t\t\toptions={options.subjects}\n\t\t\t\t\t\t\t\t\t\tmarginBottom=\"5px\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t\t<TextInput name=\"pricePerHour\" addonBefore={symbol} label={<Trans>Price per hour</Trans>} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t<SubmitButton type=\"primary\" block>\n\t\t\t\t\t\t\t\t<Trans>Save this subject</Trans>\n\t\t\t\t\t\t\t</SubmitButton>{\" \"}\n\t\t\t\t\t\t\t&nbsp;{\" \"}\n\t\t\t\t\t\t\t<ButtonLink block onClick={handleCancel}>\n\t\t\t\t\t\t\t\t<Trans>Cancel</Trans>\n\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t)}\n\t\t\t\t</Formik>\n\t\t\t)\n\t\t}\n\n\t\treturn (\n\t\t\t<Formik onSubmit={handleAddSubject} validationSchema={subjectsSchema(i18n)} initialValues={{ pricePerHour: 0 }}>\n\t\t\t\t{({ handleSubmit }) => (\n\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t<Row gutter={16} type=\"flex\">\n\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\tname=\"programmeSubjectPvid\"\n\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Subject name`)}\n\t\t\t\t\t\t\t\t\tlabel={<Trans>Subject</Trans>}\n\t\t\t\t\t\t\t\t\toptions={options.subjects}\n\t\t\t\t\t\t\t\t\tmarginBottom=\"5px\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\tname=\"programmeLevelPvid\"\n\t\t\t\t\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Curriculum`)}\n\t\t\t\t\t\t\t\t\tlabel={<Trans>Curriculum</Trans>}\n\t\t\t\t\t\t\t\t\toptions={options.levels}\n\t\t\t\t\t\t\t\t\tmarginBottom=\"5px\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\n\t\t\t\t\t\t\t{/* <Col lg={12} className=\"ant-form ant-form-item-label\">\n                                <label\n                                    css={`\n                                        margin-bottom: 5px;\n                                        display: block;\n                                    `}\n                                >\n                                    <Trans>Average price/hour</Trans>\n                                </label>\n                                <label\n                                    css={`\n                                        font-size: 30px !important;\n                                    `}\n                                >\n                                    {suggestionPrice.averagePrice <= 0 || !suggestionPrice.averagePrice\n                                        ? \"N/A\"\n                                        : `${symbol} ${suggestionPrice.averagePrice}`}\n                                </label>\n                            </Col> */}\n\n\t\t\t\t\t\t\t<Col lg={12}>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\tname=\"pricePerHour\"\n\t\t\t\t\t\t\t\t\taddonBefore={symbol}\n\t\t\t\t\t\t\t\t\tlabel={<Trans>Price per hour</Trans>}\n\t\t\t\t\t\t\t\t\t// onChange={onLocalChange(\"pricePerHour\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<SubmitButton type=\"primary\" block>\n\t\t\t\t\t\t\t<Trans>Save this subject</Trans>\n\t\t\t\t\t\t</SubmitButton>{\" \"}\n\t\t\t\t\t\t&nbsp;{\" \"}\n\t\t\t\t\t\t<ButtonLink block onClick={handleCancel}>\n\t\t\t\t\t\t\t<Trans>Cancel</Trans>\n\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t</Form>\n\t\t\t\t)}\n\t\t\t</Formik>\n\t\t)\n\t}\n\n\tif (activeKey === \"non-academic\") {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{userNonAcademic.map((item, idx) => (\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tkey={item.pvid}\n\t\t\t\t\t\tonSubmit={handleEditAddNonAcademic}\n\t\t\t\t\t\tvalidationSchema={yup.object({\n\t\t\t\t\t\t\tpricePerHour: yup\n\t\t\t\t\t\t\t\t.number()\n\t\t\t\t\t\t\t\t.min(countryMap[userDetails.country].subjectMinTariff, i18n._(t`Are you sure this is the right amount?`))\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\tprofileNonAcademicPvid: item.subNonAcademic[0]?.profileNonAcademicPvid,\n\t\t\t\t\t\t\tprogrammeSubjectSubNonAcademicPvid: [item.pvid, item.subNonAcademic[0]?.programmeSubjectSubNonAcademicPvid],\n\t\t\t\t\t\t\tpricePerHour: item.subNonAcademic[0]?.pricePerHour\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ handleSubmit, dirty, initialValues }) => (\n\t\t\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t\t\t\t<Col lg={24} xs={24}>\n\t\t\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\t\t\tcascader\n\t\t\t\t\t\t\t\t\t\t\tname=\"programmeSubjectSubNonAcademicPvid\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Subject name`)}\n\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Subject</Trans>}\n\t\t\t\t\t\t\t\t\t\t\toptions={options.subjects}\n\t\t\t\t\t\t\t\t\t\t\tmarginBottom=\"5px\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t\t\t\t<Col lg={24} xs={24}>\n\t\t\t\t\t\t\t\t\t\t<TextInput label={<Trans>Price per hour</Trans>} addonBefore={symbol} name=\"pricePerHour\" />\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t<SubmitButton type=\"primary\" disabled={!dirty}>\n\t\t\t\t\t\t\t\t\t<Trans>Update</Trans>\n\t\t\t\t\t\t\t\t</SubmitButton>{\" \"}\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\t\ttitle={<Trans>Delete this subject?</Trans>}\n\t\t\t\t\t\t\t\t\tonConfirm={() => handleDelete(initialValues.profileNonAcademicPvid)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ButtonLink icon=\"close\" loading={loading}>\n\t\t\t\t\t\t\t\t\t\t&nbsp; <Trans>Delete</Trans>\n\t\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t))}\n\t\t\t\t<Button block type=\"dashed\" size=\"medium\" icon=\"plus\" onClick={handleAddNewField} className=\"mb2em\">\n\t\t\t\t\t&nbsp; <Trans>Add a new subject</Trans>\n\t\t\t\t</Button>\n\t\t\t\t<ButtonLink block icon=\"close\" onClick={() => setEditMode(false)}>\n\t\t\t\t\t&nbsp; <Trans>Cancel</Trans>\n\t\t\t\t</ButtonLink>\n\t\t\t</>\n\t\t)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{userSubjects.map((item) => {\n\t\t\t\tconst level = item.subject && item.subject.level\n\t\t\t\treturn (\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tkey={item.pvid}\n\t\t\t\t\t\tonSubmit={handleEditSubject}\n\t\t\t\t\t\tvalidationSchema={yup.object({\n\t\t\t\t\t\t\tpricePerHour: yup\n\t\t\t\t\t\t\t\t.number()\n\t\t\t\t\t\t\t\t.min(countryMap[userDetails.country].subjectMinTariff, i18n._(t`Are you sure this is the right amount?`))\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\tpvid: item.subject.pvid,\n\t\t\t\t\t\t\tprogrammeSubjectPvid: Number(item.subject?.pvid),\n\t\t\t\t\t\t\tprogrammeLevelPvid: level && level.map((sub) => sub.name),\n\t\t\t\t\t\t\tpricePerHour: level && level[0]?.pricePerHour\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ handleSubmit, dirty }) => (\n\t\t\t\t\t\t\t<Form layout=\"vertical\" onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t\t\t\t<Col lg={12} xs={12}>\n\t\t\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\t\t\tname=\"programmeSubjectPvid\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Subject name`)}\n\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Subject</Trans>}\n\t\t\t\t\t\t\t\t\t\t\toptions={options.subjects}\n\t\t\t\t\t\t\t\t\t\t\tmarginBottom=\"5px\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t<Col lg={12} xs={12}>\n\t\t\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\t\t\tname=\"programmeLevelPvid\"\n\t\t\t\t\t\t\t\t\t\t\tmode=\"multiple\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={i18n._(t`Curriculum`)}\n\t\t\t\t\t\t\t\t\t\t\tlabel={<Trans>Curriculum</Trans>}\n\t\t\t\t\t\t\t\t\t\t\toptions={options.levels}\n\t\t\t\t\t\t\t\t\t\t\tmarginBottom=\"5px\"\n\t\t\t\t\t\t\t\t\t\t\tonDeselect={handleDeleteLocalLevels(item.subject.name)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t\t\t\t\t<Col lg={12} xs={24}>\n\t\t\t\t\t\t\t\t\t\t<TextInput label={<Trans>Price per hour</Trans>} addonBefore={symbol} name=\"pricePerHour\" />\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t<SubmitButton type=\"primary\" disabled={!dirty}>\n\t\t\t\t\t\t\t\t\t<Trans>Update</Trans>\n\t\t\t\t\t\t\t\t</SubmitButton>{\" \"}\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t\t<Popconfirm title={<Trans>Delete this subject?</Trans>} onConfirm={() => handleDelete(item.subject.pvid)}>\n\t\t\t\t\t\t\t\t\t<ButtonLink icon=\"close\" loading={loading}>\n\t\t\t\t\t\t\t\t\t\t&nbsp; <Trans>Delete</Trans>\n\t\t\t\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Formik>\n\t\t\t\t)\n\t\t\t})}\n\t\t\t<Button block type=\"dashed\" size=\"medium\" icon=\"plus\" onClick={handleAddNewField} className=\"mb2em\">\n\t\t\t\t&nbsp; <Trans>Add a new subject</Trans>\n\t\t\t</Button>\n\t\t\t<ButtonLink block icon=\"close\" onClick={() => setEditMode(false)}>\n\t\t\t\t&nbsp; <Trans>Cancel</Trans>\n\t\t\t</ButtonLink>\n\t\t</>\n\t)\n}\n","import React, { useState, useEffect } from \"react\"\nimport { Section, Empty } from \"components\"\nimport { message, Tabs } from \"antd\"\nimport DataList from \"./DataList\"\nimport { useMutation } from \"@apollo/react-hooks\"\nimport uuid from \"uuid/v4\"\nimport * as yup from \"yup\"\n\nimport { newClient, mobile, renderError, pricer } from \"helpers\"\nimport { mutateUpdateSubjects, mutateDeleteSubjects, /* mutatePriceSuggestion */ DELETE_SUBJECTS_LEVEL } from \"queries/profile\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { withI18n } from \"@lingui/react\"\nimport { countryMap } from \"helpers/countryMapping\"\nimport { MUTATE_SUBJECT_NON_ACADEMIC, DELETE_SUBJECT_NON_ACADEMIC } from \"queries/user\"\nimport SubjectsEditMode from \"./_SubjectsEditMode\"\nimport { useProgrammeList } from \"helpers/hooks/data\"\n\nfunction Subjects({ onEditMode, onSubjects, fetchUser, unauthorizedUser, i18n, userData = {} }) {\n\tconst { editMode, setEditMode } = onEditMode\n\tconst { subjects = [], nonAcademicSubjects = [] } = onSubjects\n\tconst [userSubjects, setUserSubjects] = useState([])\n\tconst [userNonAcademic, setUserNonAcademic] = useState([])\n\tconst [deletedLevels, setDeletedLevels] = useState([])\n\tconst [isAdding, setIsAdding] = useState(false)\n\tconst [activeKey, setActiveKey] = useState(\"academic\")\n\tconst { options } = useProgrammeList({ isNonAcademic: activeKey === \"non-academic\" })\n\t// const [suggestionPrice, setSuggestionPrice] = useState({})\n\n\tconst symbol = (countryMap[userData.country] || {}).symbol\n\n\tconst [updateSubjects] = useMutation(mutateUpdateSubjects, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => {\n\t\t\tfetchUser()\n\t\t\t\t.then(() => message.success(i18n._(t`The subject item has been updated`), 2))\n\t\t\t\t.finally(() => setEditMode(\"\"))\n\t\t},\n\t\tonError: (err) => renderError(err)\n\t})\n\n\tconst [addSubjects] = useMutation(mutateUpdateSubjects, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => {\n\t\t\tfetchUser()\n\t\t\t\t.then(() => message.success(i18n._(t`The subject item has been added`), 2))\n\t\t\t\t.finally(() => setEditMode(\"\"))\n\t\t},\n\t\tonError: (err) => renderError(err)\n\t})\n\n\tconst [deleteSubjects, { loading: loadingDelete }] = useMutation(mutateDeleteSubjects, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => {\n\t\t\tsetEditMode(\"\")\n\t\t\tfetchUser().then(() => message.success(i18n._(t`The subject item has been deleted`), 2))\n\t\t},\n\t\tonError: (err) => renderError(err)\n\t})\n\n\tconst [deleteLevel] = useMutation(DELETE_SUBJECTS_LEVEL, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => setDeletedLevels([]),\n\t\tonError: (err) => renderError(err)\n\t})\n\n\tconst [deleteSubjectNonAcademic, { loading: loadingNonAcademic }] = useMutation(DELETE_SUBJECT_NON_ACADEMIC, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => {\n\t\t\tsetEditMode(\"\")\n\t\t\tfetchUser().then(() => message.success(i18n._(t`The subject item has been deleted`), 2))\n\t\t},\n\t\tonError: (err) => renderError(err)\n\t})\n\n\tconst [updateSubjectsNonAcademic] = useMutation(MUTATE_SUBJECT_NON_ACADEMIC, {\n\t\tclient: newClient(),\n\t\tonCompleted: () => {\n\t\t\tsetEditMode(\"\")\n\t\t\tfetchUser().then(() => message.success(i18n._(t`The subject item has been updated`), 2))\n\t\t},\n\t\tonError: (err) => renderError(err)\n\t})\n\n\t// const [getSuggestionPrice] = useMutation(mutatePriceSuggestion, {\n\t// \tclient: newClient(),\n\t// \tonCompleted: (data) => setSuggestionPrice(data.getSuggestionPrice),\n\t// \tonError: (error) => message.error(i18n._(t`${error}`)) // useError(err)\n\t// })\n\n\tconst handleEditSubject = (values, { setSubmitting }) => {\n\t\tconst { source, programmeLevelPvid, pricePerHour, pvid, ...rest } = values\n\t\tlet { programmeSubjectPvid: subject, programmeLevelPvid: level, pricePerHour: price } = values\n\n\t\tconst programmeLevel = level.map((item, idx) => {\n\t\t\tconst index = userSubjects.findIndex((item) => item.subject.pvid === pvid)\n\t\t\tconst selectedLevel = userSubjects[index]?.subject?.level.find((level) => level.name === item) || {}\n\n\t\t\tif (typeof item === \"string\") item = options.levels?.find((l) => l.label === item).value\n\t\t\treturn { programmeLevelPvid: item, pricePerHour: Number(price), pvid: selectedLevel.pvid || \"\" }\n\t\t})\n\n\t\tconst programmeSubjectPvid = typeof subject === \"number\" ? subject : options.subjects?.find(({ label }) => label === subject).value\n\n\t\tvalues = {\n\t\t\t...rest,\n\t\t\tprogrammeLevel,\n\t\t\tprogrammeSubjectPvid,\n\t\t\torderList: 1,\n\t\t\tisStore: false\n\t\t}\n\n\t\tif (deletedLevels.length > 0) {\n\t\t\tconst pvidList = deletedLevels.map((item) => item.pvid).filter((item) => Boolean(item))\n\t\t\tdeleteLevel({ variables: { pvidList } })\n\t\t}\n\n\t\tupdateSubjects({ variables: { list: { ...values } } }).finally(() => setSubmitting(false))\n\t}\n\n\tconst handleEditAddNonAcademic = (values, { setSubmitting }) => {\n\t\tconst subjectPvid = values.programmeSubjectSubNonAcademicPvid\n\t\tvalues = {\n\t\t\t...values,\n\t\t\torderList: 1,\n\t\t\tisDeleted: false,\n\t\t\tprofileNonAcademicPvid: isAdding ? \"\" : values.profileNonAcademicPvid,\n\t\t\tprogrammeSubjectSubNonAcademicPvid: subjectPvid[1],\n\t\t\tpricePerHour: parseFloat(values.pricePerHour)\n\t\t}\n\n\t\tconst { pvid, ...actual } = values\n\n\t\tupdateSubjectsNonAcademic({ variables: { list: [actual] } }).finally(() => setSubmitting(false))\n\t}\n\n\tconst handleAddSubject = (values, { setSubmitting }) => {\n\t\tconst programmeLevel = values.programmeLevelPvid.map((item) => ({\n\t\t\tprogrammeLevelPvid: item,\n\t\t\tpricePerHour: Number(values.pricePerHour)\n\t\t}))\n\t\tvalues = { ...values, orderList: 1, isStore: true, pricePerHour: Number(values.pricePerHour), programmeLevel }\n\n\t\tconst { programmeLevelPvid, pricePerHour, ...actual } = values\n\n\t\taddSubjects({ variables: { list: [{ ...actual }] } }).finally(() => {\n\t\t\tsetSubmitting(false)\n\t\t\tsetIsAdding(false)\n\t\t})\n\t}\n\n\tconst handleDelete = (pvid) => {\n\t\tconst isNonAcademic = activeKey === \"non-academic\"\n\t\tconst filtered = isNonAcademic\n\t\t\t? userNonAcademic.find((item) => item.subNonAcademic[0].profileNonAcademicPvid === pvid) || {}\n\t\t\t: userSubjects.find((item) => item.subject.pvid === pvid) || {}\n\t\tconst handler = isNonAcademic ? deleteSubjectNonAcademic : deleteSubjects\n\t\tconst payload = isNonAcademic ? filtered.subNonAcademic[0].profileNonAcademicPvid : filtered.subject.pvid\n\t\tconst prop = isNonAcademic ? \"pvidList\" : \"pvid\"\n\t\thandler({ variables: { [prop]: payload } })\n\t}\n\n\tconst handleCancel = () => {\n\t\tsetIsAdding(false)\n\t\tsetUserSubjects(subjects)\n\t\tsetEditMode(\"\")\n\t}\n\n\tconst handleAddNewField = () => {\n\t\tsetIsAdding(true)\n\t\tsetUserSubjects((prev) => [\n\t\t\t...prev,\n\t\t\t{\n\t\t\t\tid: uuid(),\n\t\t\t\tprogrammeSubjectPvid: \"\",\n\t\t\t\tpricePerHour: 0,\n\t\t\t\tsubject: { pvid: null },\n\t\t\t\tlevel: { pvid: null },\n\t\t\t\torderList: 0\n\t\t\t}\n\t\t])\n\t}\n\n\tconst handleDeleteLevel = (levels) => (name) => {\n\t\tconst selected = levels.find((item) => item.name === name)\n\t\tdeleteLevel({ variables: { pvid: selected.programmeLevelPvid } })\n\t}\n\n\tconst handleDeleteLocalLevels = (subject) => (level) => {\n\t\tconst index = userSubjects.findIndex((item) => item.subject.name === subject)\n\t\tconst selected = userSubjects[index].subject?.level?.find((item) => item.name === level) || {}\n\t\tsetDeletedLevels((prev) => [...prev, selected])\n\t}\n\n\tconst renderSubjects = (loading) => {\n\t\tif (editMode === \"subjects\") {\n\t\t\treturn (\n\t\t\t\t<SubjectsEditMode\n\t\t\t\t\ti18n={i18n}\n\t\t\t\t\tloading={loadingDelete}\n\t\t\t\t\tisAdding={isAdding}\n\t\t\t\t\tdata={{ subjectsSchema, activeKey, userNonAcademic, userSubjects, userData, options }}\n\t\t\t\t\thandlers={{\n\t\t\t\t\t\thandleEditAddNonAcademic,\n\t\t\t\t\t\thandleAddNewField,\n\t\t\t\t\t\thandleAddSubject,\n\t\t\t\t\t\thandleCancel,\n\t\t\t\t\t\thandleDelete,\n\t\t\t\t\t\thandleDeleteLevel,\n\t\t\t\t\t\thandleEditSubject,\n\t\t\t\t\t\thandleDeleteLocalLevels,\n\t\t\t\t\t\tsetEditMode\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\tif (editMode !== \"subjects\") {\n\t\t\treturn (\n\t\t\t\t<Tabs onChange={(key) => setActiveKey(key)} defaultActiveKey={activeKey}>\n\t\t\t\t\t<Tabs.TabPane tab={<Trans>Academic</Trans>} key=\"academic\">\n\t\t\t\t\t\t{userSubjects.length === 0 ? (\n\t\t\t\t\t\t\t<Empty\n\t\t\t\t\t\t\t\tdescription={\n\t\t\t\t\t\t\t\t\tunauthorizedUser ? (\n\t\t\t\t\t\t\t\t\t\t<Trans>This tutor didn't set any subjects yet</Trans>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Trans>You haven't set any subjects yet</Trans>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tuserSubjects.map(({ subject = {}, pvid }) => {\n\t\t\t\t\t\t\t\tconst pricePerHour = subject.level && subject.level[0].pricePerHour\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<DataList\n\t\t\t\t\t\t\t\t\t\tkey={pvid}\n\t\t\t\t\t\t\t\t\t\ttitle={subject.name || \"\"}\n\t\t\t\t\t\t\t\t\t\tdescription={subject.level?.map((l, idx) => (\n\t\t\t\t\t\t\t\t\t\t\t<p key={idx}>{l.name}</p>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t\t\textra={\n\t\t\t\t\t\t\t\t\t\t\t<Trans>\n\t\t\t\t\t\t\t\t\t\t\t\t{symbol}\n\t\t\t\t\t\t\t\t\t\t\t\t{pricer(pricePerHour)} per hour\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t\t<Tabs.TabPane tab={<Trans>Non-academic</Trans>} key=\"non-academic\">\n\t\t\t\t\t\t{userNonAcademic.length === 0 ? (\n\t\t\t\t\t\t\t<Empty\n\t\t\t\t\t\t\t\tdescription={\n\t\t\t\t\t\t\t\t\tunauthorizedUser ? (\n\t\t\t\t\t\t\t\t\t\t<Trans>This tutor didn't set any subjects yet</Trans>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Trans>You haven't set any subjects yet</Trans>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tuserNonAcademic.map(({ subNonAcademic, ...item }) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<DataList\n\t\t\t\t\t\t\t\t\t\tkey={item.pvid}\n\t\t\t\t\t\t\t\t\t\ttitle={item.name}\n\t\t\t\t\t\t\t\t\t\tdescription={subNonAcademic.map((l, idx) => (\n\t\t\t\t\t\t\t\t\t\t\t<p key={idx}>{l.name}</p>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t\t\textra={subNonAcademic.map((sub) => (\n\t\t\t\t\t\t\t\t\t\t\t<Trans key={sub.pvid}>\n\t\t\t\t\t\t\t\t\t\t\t\t{symbol}\n\t\t\t\t\t\t\t\t\t\t\t\t{pricer(sub.pricePerHour)} per hour\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t</Tabs>\n\t\t\t)\n\t\t}\n\t}\n\n\tconst loading = loadingNonAcademic\n\n\tuseEffect(() => {\n\t\tsetUserSubjects(subjects)\n\t\tsetUserNonAcademic(nonAcademicSubjects)\n\t}, [nonAcademicSubjects, subjects])\n\n\treturn (\n\t\t<Section paddingHorizontal={0} noPadding={mobile} marginBottom={0}>\n\t\t\t{renderSubjects(loading)}\n\t\t</Section>\n\t)\n}\n\nconst subjectsSchema = (i18n) => {\n\tconst userDetails = JSON.parse(localStorage.getItem(\"userDetails\")) || {}\n\n\treturn yup.object().shape({\n\t\tprogrammeSubjectPvid: yup.number().required(i18n._(t`You have to fill in your subject`)),\n\t\tprogrammeLevelPvid: yup.number().required(i18n._(t`You have to fill in your level/curriculum`)),\n\t\tpricePerHour: yup.number().min(countryMap[userDetails.country].subjectMinTariff, i18n._(t`Are you sure this is the right amount?`))\n\t})\n}\n\nexport default withI18n()(Subjects)\n"],"sourceRoot":""}