(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[60],{1717:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return k}));n(1431);var a=n(1456),r=(n(91),n(37)),i=(n(97),n(25)),c=(n(121),n(35)),o=n(65),s=n.n(o),l=n(113),d=n(28),u=n(9),m=n(0),b=n.n(m),g=n(55),p=n(38),f=n.n(p),T=n(42),j=n(16),v=n(432),E=n(5),I=n(20);function C(){var t=Object(E.a)(["\n\tmutation CREATE_SESSION($liveClassName: String!, $startTime: Date!, $endTime: Date!, $description: String!, $bookingId: Int!) {\n\t\tcreateSession(\n\t\t\tliveClassName: $liveClassName\n\t\t\tstartTime: $startTime\n\t\t\tendTime: $endTime\n\t\t\tdescription: $description\n\t\t\tbookingId: $bookingId\n\t\t) {\n\t\t\tmeetingId\n\t\t\tmeetingName\n\t\t\tjoinAsModerator\n\t\t\tjoinAsStudent\n\t\t\tmoderatorPassword\n\t\t\tattendeePassword\n\t\t\tduration\n\t\t}\n\t}\n"]);return C=function(){return t},t}var S=Object(I.a)(C());function k(){var t=JSON.parse(localStorage.getItem("userDetails"))||{},e=Object(m.useState)({current:1,pageSize:10}),n=Object(d.a)(e,2),o=n[0],p=n[1],E=Object(g.c)(v.b,{skip:!t.pvid,client:j.d.bookingClient,variables:{role:t.pvid?t.role.name.toLowerCase():""}}),I=E.data,C=E.refetch,k=E.loading,h=Object(g.b)(S,{client:j.d.liveclassClient,onError:function(t){console.log(t)}}),O=Object(d.a)(h,2),$=O[0],x=O[1].loading,N=[{title:"Booking ID",dataIndex:"pvid"},{title:"Subject",dataIndex:"subjectInfo.subject"},{title:"Start Time",dataIndex:"startTime",render:function(t){return"".concat(f()(t).format("dddd, DD MMM YYYY hh:mm A"))}},{title:"End Time",dataIndex:"endTime",render:function(t){return"".concat(f()(t).format("dddd, DD MMM YYYY hh:mm A"))}},{title:"Status",dataIndex:"status"},{title:"Action",key:"action",render:function(e,n){return"paid"===n.status?n.classUrl?b.a.createElement(T.d,{type:"primary",href:n.classUrl,target:"blank"},b.a.createElement(u.Trans,{id:"Open Class"})):"Tutor"===t.role.name?b.a.createElement(T.d,{type:"primary",loading:x,onClick:Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$({variables:{liveClassName:"Class ".concat(n.subjectInfo.subject," ").concat(n.subjectInfo.level),startTime:n.startTime,endTime:n.endTime,bookingId:Number(n.pvid),description:"Class ".concat(n.subjectInfo.subject," ").concat(n.subjectInfo.level,", location at ").concat(n.location)}});case 2:return t.next=4,C();case 4:case"end":return t.stop()}}),t)})))},b.a.createElement(u.Trans,{id:"Create Class"})):"-":"-"}}];return t.pvid?b.a.createElement(T.n,null,b.a.createElement(T.u,{className:"p2em"},b.a.createElement(r.a,{gutter:32},b.a.createElement(i.a,null,b.a.createElement(a.a,{loading:k,columns:N,dataSource:I?I.getBookings:[],onChange:function(t,e,n,a){p(t)},pagination:o}))))):b.a.createElement(T.n,null,b.a.createElement(T.u,{centered:!0},b.a.createElement(r.a,null,b.a.createElement(i.a,null,b.a.createElement(c.a,{style:{margin:"4em auto",textAlign:"center"}},"You Must Login To Access This Page")))))}}}]);
//# sourceMappingURL=60.85703058.chunk.js.map