(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[28],{1103:function(e,t,r){var a=r(1110),n=r(1111);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||a)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var o=0;o<16;++o)t[i+o]=c[o];return t||n(c)}},1110:function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var a=new Uint8Array(16);e.exports=function(){return r(a),a}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},1111:function(e,t){for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,n=r;return[n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],"-",n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]],n[e[a++]]].join("")}},1113:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(284);var a=r(105),n=(r(98),r(23)),i=(r(91),r(34)),c=r(3),o=r(5),l=r(0),u=r.n(l),m=r(43),s=r(10),d=r(13),b=r(45);function p(){var e=Object(c.a)(["\n\t&& {\n\t\th4 {\n\t\t\tfont-size: 1em;\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return p=function(){return e},e}function v(){var e=Object(c.a)(["\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tmargin-bottom: 1em;\n\t}\n"]);return v=function(){return e},e}function g(){var e=Object(c.a)(["\n\t&:not(:last-child) {\n\t\tborder-bottom: 1px solid #eee;\n\t\tpadding-bottom: 1em;\n\t}\n"]);return g=function(){return e},e}var f=Object(s.b)(m.l)(g()),j=Object(s.b)(i.a)(v()),y=Object(s.b)(m.l)(p(),b.a.greyColor),E=localStorage.getItem("token");function h(e){var t=e.title,r=void 0===t?"":t,i=e.description,c=void 0===i?"":i,l=e.download,s=void 0===l?"":l,b=e.extra,p=void 0===b?"":b,v=e.loading;return s?u.a.createElement(a.a,{loading:v,active:!0,paragraph:{rows:1}},u.a.createElement(j,{type:"flex",justify:"space-between"},u.a.createElement(n.a,{xs:24,lg:12},u.a.createElement(m.l,{reverse:!0,content:r,subheader:c})),u.a.createElement(n.a,{xs:24,lg:12,style:{textAlign:d.k?"left":"right"}},E&&u.a.createElement("a",{href:d.r+s,target:"_blank",rel:"noopener noreferrer"},u.a.createElement(m.e,{icon:"eye",style:{marginRight:0}},"\xa0 ",u.a.createElement(o.Trans,{id:"View"})))))):p?u.a.createElement(a.a,{loading:v,active:!0,paragraph:{rows:1}},u.a.createElement(j,{type:"flex",justify:"space-between",align:"middle"},u.a.createElement(n.a,{xs:24,lg:12},u.a.createElement(m.l,{reverse:!0,content:r,subheader:c})),u.a.createElement(n.a,{xs:24,lg:12,style:{textAlign:d.k?"left":"right"}},u.a.createElement(y,{content:p,level:4})))):u.a.createElement(a.a,{loading:v,active:!0,paragraph:{rows:1}},u.a.createElement(f,{reverse:!0,content:r,subheader:c}))}},1318:function(e,t,r){"use strict";r.r(t);r(366);var a=r(178),n=(r(568),r(367)),i=(r(282),r(99)),c=(r(98),r(23)),o=r(204),l=r(155),u=r(26),m=r(19),s=(r(154),r(61)),d=r(28),b=(r(91),r(34)),p=r(10),v=r(0),g=r.n(v),f=r(43),j=r(1113),y=r(66),E=r(1103),h=r.n(E),O=r(1096),S=r(368),P=r(13),x=r(177),C=r(364),T=r(82),w=r(80),_=r(1083),k=r(5),L=r(73),H=Object(p.b)(b.a).withConfig({displayName:"Subjects__FieldRow",componentId:"sc-1614b3y-0"})(["position:relative;margin-bottom:2em;&:hover{.delete{display:flex;justify-content:center;align-items:center;visibility:visible;}}.delete{display:none;cursor:pointer;visibility:hidden;position:absolute;right:0;border-radius:50%;width:25px;color:#ff9d00;height:25px;z-index:99;&:hover{background:#eee;}}"]),N=p.b.label.withConfig({displayName:"Subjects___StyledLabel",componentId:"sc-1614b3y-1"})(["margin-bottom:5px;display:block;"]),A=p.b.label.withConfig({displayName:"Subjects___StyledLabel2",componentId:"sc-1614b3y-2"})(["font-size:30px !important;"]);var B=function(e){var t=JSON.parse(localStorage.getItem("userDetails"))||{};return O.object().shape({programmeSubjectPvid:O.number().required(e._({id:"You have to fill in your subject"})),programmeLevelPvid:O.number().required(e._({id:"You have to fill in your level/curriculum"})),pricePerHour:O.number().min(L.b[t.country].subjectMinTariff,e._({id:"Are you sure this is the right amount?"}))})};t.default=Object(k.withI18n)()((function(e){var t=e.onEditMode,r=e.onSubjects,p=e.fetchUser,E=e.unauthorizedUser,I=e.i18n,V=e.userData,z=void 0===V?{}:V,M=t.editMode,R=t.setEditMode,D=r.subjects,q=void 0===D?[]:D,J=Object(v.useState)([]),U=Object(d.a)(J,2),Y=U[0],F=U[1],G=Object(v.useState)(!1),K=Object(d.a)(G,2),Q=K[0],W=K[1],X=Object(v.useState)({}),Z=Object(d.a)(X,2),$=Z[0],ee=Z[1],te=Object(v.useState)({}),re=Object(d.a)(te,2),ae=re[0],ne=re[1],ie=JSON.parse(localStorage.getItem("userDetails"))||{},ce=(L.b[z.country]||{}).symbol,oe=Object(y.b)(T.I,{client:Object(P.l)(),onCompleted:function(e){return R(""),p(),e},onError:function(e){return Object(P.q)(e)}}),le=Object(d.a)(oe,1)[0],ue=Object(y.b)(T.x,{client:Object(P.l)(),onCompleted:function(){return R("")},onError:function(e){return Object(P.q)(e)}}),me=Object(d.a)(ue,2),se=me[0],de=me[1].loading,be=Object(y.b)(T.B,{client:Object(P.l)(),onCompleted:function(e){return ne(e.getSuggestionPrice)},onError:function(e){return s.a.error(I._({id:"{error}",values:{error:e}}))}}),pe=Object(d.a)(be,1)[0],ve=Object(y.c)(S.c,{client:P.e.programmeClient,variables:{country:z.country}}),ge=ve.data,fe=void 0===ge?{}:ge,je=ve.loading,ye=Object(y.c)(S.b,{client:P.e.programmeClient,variables:{country:z.country}}),Ee=ye.data,he=void 0===Ee?{}:Ee,Oe=ye.loading,Se=(fe.getProgrammeSubjectList||[]).map((function(e){return{value:Number(e.pvid),label:e.name}})),Pe=(he.getProgrammeLevelList||[]).map((function(e){return{value:Number(e.pvid),label:e.name}})),xe=function(e,t){var r=t.setSubmitting,a=e,n=(a.source,Object(m.a)(a,["source"])),i=e,c=i.programmeSubjectPvid,o=i.programmeLevelPvid;e=Object(u.a)({},n,{programmeSubjectPvid:"number"===typeof c?c:Se.find((function(e){return e.label===c})).value,programmeLevelPvid:"number"===typeof o?o:Pe.find((function(e){return e.label===o})).value,orderList:1,pricePerHour:Number(e.pricePerHour)}),le({variables:{list:Object(u.a)({},e)}}).then((function(e){e&&s.a.success(I._({id:"The subject item has been updated"}),2)})).finally((function(){return r(!1)}))},Ce=function(e,t){var r=t.setSubmitting;e=Object(u.a)({},e,{orderList:1,pricePerHour:Number(e.pricePerHour)}),le({variables:{list:[Object(u.a)({},e)]}}).then((function(e){e&&s.a.success(I._({id:"The subject item has been added"}),2)})).finally((function(){r(!1),W(!1)}))},Te=function(){W(!1),F(q),R("")},we=function(){W(!0),F((function(e){return[].concat(Object(l.a)(e),[{id:h()(),programmeSubjectPvid:"",pricePerHour:0,subject:{pvid:null},level:{pvid:null},orderList:0}])}))},_e=function(e){return function(t){if(ee(Object(u.a)({},$,Object(o.a)({},e,t))),Object.keys($).length){var r=Object(u.a)({},$,Object(o.a)({},e,t));pe({variables:Object(u.a)({},r)})}}},ke=je||Oe;return Object(v.useEffect)((function(){F(q)}),[q]),g.a.createElement(f.u,{paddingHorizontal:0,noPadding:P.k,marginBottom:0},function(e){return"subjects"===M?Q?g.a.createElement(w.c,{onSubmit:Ce,validationSchema:B(I),initialValues:{pricePerHour:0}},(function(e){var t=e.handleSubmit;return g.a.createElement(i.a,{layout:"vertical",onSubmit:t},g.a.createElement(b.a,{gutter:16,type:"flex"},g.a.createElement(c.a,{lg:12},g.a.createElement(C.a,{name:"programmeSubjectPvid",placeholder:I._({id:"Subject name"}),label:g.a.createElement(k.Trans,{id:"Subject"}),options:Se,marginBottom:"5px",onChange:_e("programmeSubjectPvid")})),g.a.createElement(c.a,{lg:12},g.a.createElement(C.a,{name:"programmeLevelPvid",placeholder:I._({id:"Curriculum"}),label:g.a.createElement(k.Trans,{id:"Curriculum"}),options:Pe,marginBottom:"5px",onChange:_e("programmeLevelPvid")})),g.a.createElement(c.a,{lg:12,className:"ant-form ant-form-item-label"},g.a.createElement(N,null,g.a.createElement(k.Trans,{id:"Average price/hour"})),g.a.createElement(A,null,ae.averagePrice<=0||!ae.averagePrice?"N/A":"".concat(ce," ").concat(ae.averagePrice))),g.a.createElement(c.a,{lg:12},g.a.createElement(x.a,{name:"pricePerHour",addonBefore:ce,label:g.a.createElement(k.Trans,{id:"Price per hour"}),onChange:_e("pricePerHour")}))),g.a.createElement(_.a,{type:"primary",block:!0},g.a.createElement(k.Trans,{id:"Save this subject"}))," ","\xa0"," ",g.a.createElement(f.e,{block:!0,onClick:Te},g.a.createElement(k.Trans,{id:"Cancel"})))})):g.a.createElement(g.a.Fragment,null,Y.map((function(e){return g.a.createElement(w.c,{key:e.subject.pvid,onSubmit:xe,validationSchema:O.object({pricePerHour:O.number().min(L.b[ie.country].subjectMinTariff,I._({id:"Are you sure this is the right amount?"}))}),initialValues:{pvid:e.subject.pvid,programmeSubjectPvid:e.subject.name,programmeLevelPvid:e.subject.level.name,pricePerHour:e.pricePerHour}},(function(t){var r=t.handleSubmit,o=t.dirty;return g.a.createElement(H,null,g.a.createElement(i.a,{layout:"vertical",onSubmit:r},g.a.createElement(b.a,{gutter:16},g.a.createElement(c.a,{lg:12,xs:12},g.a.createElement(C.a,{name:"programmeSubjectPvid",placeholder:I._({id:"Subject name"}),label:g.a.createElement(k.Trans,{id:"Subject"}),options:Se,marginBottom:"5px"})),g.a.createElement(c.a,{lg:12,xs:12},g.a.createElement(C.a,{name:"programmeLevelPvid",placeholder:I._({id:"Curriculum"}),label:g.a.createElement(k.Trans,{id:"Curriculum"}),options:Pe,marginBottom:"5px"}))),g.a.createElement(b.a,{gutter:16},g.a.createElement(c.a,{lg:12,xs:24},g.a.createElement(x.a,{label:g.a.createElement(k.Trans,{id:"Price per hour"}),addonBefore:ce,name:"pricePerHour"}))),g.a.createElement(_.a,{type:"primary",disabled:!o},g.a.createElement(k.Trans,{id:"Update"}))," ","\xa0"," ",g.a.createElement(n.a,{title:g.a.createElement(k.Trans,{id:"Delete this subject?"}),onConfirm:function(){return function(e){var t=Y.find((function(t){return t.subject.pvid===e}))||{};se({variables:{pvidList:[t.pvid]}}).then((function(){return p()})).then((function(){return s.a.success(I._({id:"The subject item has been deleted"}),2)}))}(e.pvid)}},g.a.createElement(f.e,{icon:"close",loading:de},"\xa0 ",g.a.createElement(k.Trans,{id:"Delete"}))),g.a.createElement(a.a,null)))}))})),g.a.createElement(f.d,{block:!0,type:"dashed",size:"medium",icon:"plus",onClick:we,style:{marginBottom:"2em"}},"\xa0 ",g.a.createElement(k.Trans,{id:"Add a new subject"})),g.a.createElement(f.e,{block:!0,icon:"close",onClick:function(){return R(!1)}},"\xa0 ",g.a.createElement(k.Trans,{id:"Cancel"}))):"subjects"!==M?0!==Y.length||e?Y.map((function(t){var r=t.subject,a=void 0===r?{}:r,n=t.pricePerHour;return g.a.createElement(j.a,{key:a.pvid,title:a.name||"",description:a.level.map((function(e,t){return g.a.createElement("p",{key:t},e.name)})),loading:e,extra:g.a.createElement(k.Trans,{id:"{symbol} {0} per hour",values:{0:Object(P.n)(n),symbol:ce}})})})):E?g.a.createElement(f.j,{description:g.a.createElement(k.Trans,{id:"This tutor didn't set any subjects yet"})}):g.a.createElement(f.j,{description:g.a.createElement(k.Trans,{id:"You haven't set any subjects yet"})}):void 0}(ke))}))}}]);
//# sourceMappingURL=28.609ea70e.chunk.js.map