(this.webpackJsonpcudysg=this.webpackJsonpcudysg||[]).push([[40],{1346:function(e,t,a){"use strict";a(210);var n=a(83),r=a(23),l=(a(668),a(1336)),c=a(5),o=a(0),i=a.n(o),s=a(1386),u=a(300),m=a(15);function d(){var e=Object(c.a)(["\n\t> label {\n\t\tdisplay: ",";\n\t\twidth: ",";\n\t\tmargin-bottom: ",";\n\t\tpadding: ",";\n\t\theight: ",";\n\t}\n"]);return d=function(){return e},e}function b(){var e=Object(c.a)(["\n\t> label {\n\t\tdisplay: ",";\n\t\twidth: ",";\n\t}\n"]);return b=function(){return e},e}var p=Object(m.b)(s.a.Group)(b(),(function(e){return e.labelBlock&&"block"}),(function(e){return e.labelBlock&&"100%"})),g=Object(m.b)(l.a.Group)(d(),(function(e){return e.labelBlock&&"block"}),(function(e){return e.labelBlock&&"100%"}),(function(e){return e.labelBlock&&"1em"}),(function(e){return e.labelBlock&&"1em"}),(function(e){return e.labelBlock&&"auto"}));t.a=function(e){var t=e.options,a=void 0===t?[]:t,c=e.name,o=e.label,m=e.independent,d=e.isButton,b=void 0===d||d,E=Object(r.a)(e,["options","name","label","independent","isButton"]);return m?i.a.createElement(n.a.Item,{name:c,label:o},i.a.createElement(g,Object.assign({},E,{name:c,buttonStyle:"solid"}),a.map((function(e){return i.a.createElement(l.a.Button,Object.assign({},e,{value:e.value,key:e.value}),e.label)})))):i.a.createElement(u.a,{name:c,label:o},b?i.a.createElement(p,Object.assign({},E,{name:c,buttonStyle:"solid"}),a.map((function(e){return i.a.createElement(s.a.Button,{value:e.value,key:e.value},e.label)}))):i.a.createElement(p,Object.assign({},E,{options:a,name:c})))}},1357:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(23),r=a(0),l=a.n(r),c=a(300),o=a(1708);a(670);function i(e){var t=e.name,a=e.label,r=e.extra,i=Object(n.a)(e,["name","label","extra"]);return l.a.createElement(c.a,{name:t,label:a,extra:r},l.a.createElement(o.a,Object.assign({},i,{name:t})))}},1711:function(e,t,a){"use strict";a.r(t);a(210);var n=a(83),r=a(213),l=(a(91),a(37)),c=(a(97),a(25)),o=(a(156),a(62)),i=a(19),s=a(157),u=a(28),m=a(0),d=a.n(m),b=a(42),p=a(212),g=a(1351),E=a.n(g),f=a(27),v=a(1346),h=a(305),j=(a(1523),a(1668)),O=a(23);function y(e){e.field,e.form;var t=e.label,a=e.options,r=e.name,l=e.independent,c=Object(O.a)(e,["field","form","label","options","name","independent"]);if(l)return d.a.createElement(n.a.Item,{name:r,label:t},d.a.createElement(j.a,Object.assign({},c,{name:r}),(a||[]).map((function(e){return d.a.createElement(j.a.Option,{key:e.value,id:e.id,value:e.value},e.label)}))))}a(1525);var S=a(1527),T=a(300),k=a(1681);function P(e){var t=e.name,a=e.children,r=e.label,l=e.independent,c=Object(O.a)(e,["name","children","label","independent"]);return l?d.a.createElement(n.a.Item,{name:t,label:r},d.a.createElement(S.a,Object.assign({},c,{name:t}),a)):d.a.createElement(T.a,{name:t,label:r},d.a.createElement(k.a,Object.assign({},c,{name:t}),a))}var w=a(16),x=a(131),B=a(1357),_=a(45),R=a(55),C=a(80),I=a(1343),J=a(669),Y=a(1353);Y.setLocale({mixed:{default:"Eheheheh"}});var q=Y.object().shape({title:Y.string().required("You have to fill in the title"),curriculumPvid:Y.number().required("You have to choose one of the curriculum"),subjectPvid:Y.number().required("You have to choose one of the subject"),priceRange:Y.array().required("You have to set the price range"),tutorGender:Y.number().required("You have to choose your tutor's preferred gender")}),A=a(9),G=a(71),N=a(32),H=a(98),L=a(419),z={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}},F={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:8}}},M=null,V=Object(w.k)("posting_assignment");t.default=Object(A.withI18n)()((function(e){var t=e.i18n,a=Object(m.useState)(""),g=Object(u.a)(a,2),j=g[0],O=g[1],S=Object(m.useState)({}),T=Object(u.a)(S,2)[1],k=Object(m.useState)([]),Y=Object(u.a)(k,2),D=Y[0],U=Y[1],K=Object(m.useState)(!1),Q=Object(u.a)(K,2),W=Q[0],X=Q[1],Z=Object(f.g)(),$=Object(L.c)().options,ee=[{value:"> 1",label:d.a.createElement(A.Trans,{id:"> 1 year"})},{value:"> 2",label:d.a.createElement(A.Trans,{id:"> 2 year"})},{value:"> 3",label:d.a.createElement(A.Trans,{id:"> 3 year"})},{value:"> 5",label:d.a.createElement(A.Trans,{id:"> 5 year"})}],te=JSON.parse(localStorage.getItem("userDetails"))||{},ae=te.country||"sg",ne=G.b[ae].symbol,re=G.b[ae].pricePerHourRange.range[1],le=G.b[ae].pricePerHourRange.range[0],ce=G.b[ae].assignmentSuggestionRange,oe=h.f.filter((function(e){return e.value.slice(0,2).toLowerCase()===ae})),ie=[].concat([{value:"telegram",label:"Telegram"},{value:"tutorsms",label:"TutorSMS"}],Object(s.a)(oe)),se=Object(R.a)(C.S,{client:V}),ue=Object(u.a)(se,1)[0],me=Object(R.b)(C.t,{client:V,onError:function(e){return Object(w.q)(e)}}),de=Object(u.a)(me,1)[0],be=function(){var e={types:[],componentRestrictions:{country:te.country}};(M=new google.maps.places.Autocomplete(document.getElementById("location"),e)).addListener("place_changed",pe)},pe=function(){var e=M.getPlace();e.address_components&&(T({location:e.formatted_address}),O(e.formatted_address))},ge=function(e){return U((function(t){return[].concat(Object(s.a)(t),[{userPvid:Number(e.id)}])}))};return Object(m.useEffect)((function(){te.country!==N.d&&(X(!0),o.a.error(d.a.createElement("span",null,t._({id:"You can only post an assignment in"})," ",G.b[ae].name,d.a.createElement(b.e,{onClick:function(){return Object(N.f)(te.country)}},t._({id:"Switch to {0}?",values:{0:G.b[ae].name}}))),0)),localStorage.getItem("token")||Z.push("/".concat(ae,"/login"))}),[Z.push]),d.a.createElement(b.n,null,d.a.createElement(b.u,{paddingHorizontal:0},d.a.createElement(l.a,{type:"flex",justify:"center"},d.a.createElement(c.a,{lg:14},d.a.createElement(l.a,{className:"pt2em mb2em"},d.a.createElement(c.a,{lg:2},d.a.createElement(H.a,{type:"icon-task",size:34})),d.a.createElement(c.a,{lg:20},d.a.createElement(b.l,{bold:!0,content:d.a.createElement(A.Trans,{id:"Post an assignment"}),subheader:d.a.createElement(A.Trans,{id:"Need to get tutors fast for your needs? Post an assignment, and they'll notice"}),marginBottom:"2em",level:4}))),d.a.createElement(_.b,{onSubmit:function(e,t){var a=t.setSubmitting,n=e,r=n.isJoin,l=n.priceRange,c=n.broadcast,o=[{startPrice:l[0],endPrice:l[1]}];e=Object(i.a)({},e,{location:j.trim(),joinStudent:D,isJoin:r?1:0,priceRange:o,notes:e.notes||"-",broadcast:c.map((function(e){return{remark:e}})),isActive:1}),de({variables:Object(i.a)({},e)}).then((function(){ue(),Z.push("/".concat(ae,"/assignments"))})).finally((function(){return a(!1)}))},initialValues:{priceRange:[ce[0],ce[1]],broadcast:["telegram"],tutorGender:1},validationSchema:q},(function(e){var a,l=e.handleSubmit,c=e.values,o=e.isValid,i=e.touched;return d.a.createElement(n.a,Object.assign({},z,{onSubmit:l}),d.a.createElement(x.a,{name:"title",placeholder:t._({id:"E.g. Urgently need a mathematic tutor of Primary 4"}),label:d.a.createElement(A.Trans,{id:"Title of the assignment"})}),d.a.createElement(p.a,{name:"curriculumPvid",label:d.a.createElement(A.Trans,{id:"Select curriculum"}),placeholder:t._({id:"Select curriculum"}),options:$.levels}),d.a.createElement(p.a,{name:"subjectPvid",label:d.a.createElement(A.Trans,{id:"Select subject"}),placeholder:t._({id:"Select subject"}),options:$.subjects}),d.a.createElement(B.a,{range:!0,name:"priceRange",label:d.a.createElement(A.Trans,{id:"Preferred price"}),extra:d.a.createElement("div",{className:"mb2em"},d.a.createElement(A.Trans,{id:"Suggestion price to set"}),":"," ",d.a.createElement("strong",null,ne," ",Object(w.m)(ce[0])," ")," ","-"," ",d.a.createElement("strong",null,ne," ",Object(w.m)(ce[1])," ")),marks:(a={},Object(r.a)(a,ce[0],ne+ce[0]),Object(r.a)(a,ce[1],ne+ce[1]),a),tipFormatter:function(e){return"".concat(ne).concat(Object(w.m)(e))},step:G.b[ae].pricePerHourRange.step,min:le,max:re}),d.a.createElement(v.a,{group:!0,name:"tutorGender",label:d.a.createElement(A.Trans,{id:"Preferred gender"}),options:[{value:1,label:d.a.createElement(A.Trans,{id:"Male"})},{value:0,label:d.a.createElement(A.Trans,{id:"Female"})}]}),d.a.createElement(v.a,{group:!0,name:"tutorExperience",label:d.a.createElement(A.Trans,{id:"Tutor's experience"}),options:ee}),d.a.createElement(E.a,{url:w.g,onLoad:be}),d.a.createElement(x.a,{special:!0,allowClear:!0,id:"location",name:"address",placeholder:t._({id:"Choose your preferred location..."}),label:d.a.createElement(A.Trans,{id:"Preferred location"}),value:j,error:!j&&i.address&&d.a.createElement(A.Trans,{id:"You have to tell your preferred location"}),onChange:function(e){return O(e.target.value)}}),d.a.createElement(P,{name:"isJoin",label:d.a.createElement(A.Trans,{id:"Allow others to join"})},d.a.createElement(A.Trans,{id:"Allow heheh"})),d.a.createElement(y,{independent:!0,name:"joinStudent",label:" ",placeholder:t._({id:"Enter your friends' name"}),disabled:!c.isJoin,onSelect:ge,options:h.g.map((function(e){var t=e.name;return{id:e.id,value:t,label:t}}))}),d.a.createElement(J.a,{group:!0,name:"broadcast",label:d.a.createElement(A.Trans,{id:"Post this assignment to"}),options:ie}),d.a.createElement(x.a,{textarea:!0,rows:4,name:"notes",placeholder:t._({id:"Some special notes regarding this assignment"}),label:d.a.createElement(A.Trans,{id:"Additional notes"})}),d.a.createElement(n.a.Item,F,d.a.createElement(I.a,{type:"primary",disabled:!o||!j||W},d.a.createElement(A.Trans,{id:"Post the assignment now"}))))}))))))}))}}]);
//# sourceMappingURL=40.fc66b724.chunk.js.map