{"version":3,"sources":["assets/images/decorating.png","pages/OnboardingStudents/index.jsx"],"names":["module","exports","Name","React","lazy","Basic","Curriculum","BackgroundSection","styled","Section","decorating","baseStyles","primaryColorRgba","StyledCard","Card","initialValues","firstName","lastName","dob","Date","now","nric","phone","gender","race","address","description","programmeClient","newClient","withI18n","i18n","useState","activeStep","setActiveStep","userData","setUserData","history","useHistory","pathname","useLocation","split","useQuery","queryFetchLevels","client","variables","country","data","levelData","useMutation","mutateUserProfile","onCompleted","getProfile","fetchUser","mutateUpdateProfile","updateProfile","loading","handleUpdateProfile","values","section","then","handleNext","toLowerCase","push","handlePrev","steps","stepsArray","useEffect","localStorage","getItem","width","mobile","style","margin","marginTop","content","subheader","marginBottom","textAlign","noHover","autoHeight","gutter","type","lg","xs","noPadding","className","progressDot","current","src","height","position","top","fallback","exact","from","to","path","render","handlers","onUpdateProfile","onData","getProgrammeLevelList","centered","onClick","confirm","title","_","onOk"],"mappings":"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","file":"static/js/43.67961e5c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/decorating.794e4ad9.png\";","import React, { useState, useEffect, Suspense } from \"react\"\nimport { Row, Col, Icon, Modal } from \"antd\"\nimport { Section, Heading, Card, Steps, ButtonLink, Loading } from \"components\"\nimport { Switch, Route, Redirect, useHistory, useLocation } from \"react-router\"\nimport styled from \"styled-components\"\n\n// import Name from \"./Name\"\n// import Basic from \"./Basic\"\n// import Curriculum from \"./Curriculum\"\nimport decorating from \"assets/images/decorating.png\"\n// import useQueryData from \"helpers/hooks/useQueryData\"\nimport { queryFetchLevels } from \"queries/data\"\nimport { mobile, newClient } from \"helpers\"\nimport { useMutation, useQuery } from \"react-apollo\"\nimport { mutateUserProfile, mutateUpdateProfile } from \"queries/profile\"\nimport { Trans, t } from \"@lingui/macro\"\nimport { country } from \"App\"\nimport { withI18n } from \"@lingui/react\"\nimport { baseStyles } from \"styles/base\"\nimport GifPlayer from \"components/GifPlayer\"\n\nconst Name = React.lazy(() => import(\"./Name\"))\nconst Basic = React.lazy(() => import(\"./Basic\"))\nconst Curriculum = React.lazy(() => import(\"./Curriculum\"))\n\nconst BackgroundSection = styled(Section)`\n\theight: 100%;\n\tposition: relative;\n\t/* background: url(${decorating}) no-repeat; */\n\tbackground-size: cover;\n\tbackground-blend-mode: darken;\n\tborder-radius: 10px 0 0 10px;\n\t&:before {\n\t\tcontent: \"\";\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tposition: absolute;\n\t\tbackground-color: ${baseStyles.primaryColorRgba};\n\t\tz-index: 0;\n\t}\n\t&& {\n\t\t.steps {\n\t\t\tpadding-left: 4em;\n\t\t\tpadding-top: 3em;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tcolor: #fff;\n\t\t\t.ant-steps-item-title {\n\t\t\t\tcolor: #fff;\n\t\t\t}\n\t\t}\n\t}\n`\n\nconst StyledCard = styled(Card)`\n\t&& {\n\t\t.ant-card-body {\n\t\t\tpadding: 0;\n\t\t}\n\t}\n`\n\nconst stepsArray = pathname => {\n\tswitch (pathname) {\n\t\tcase \"name\":\n\t\t\treturn 0\n\t\tcase \"basic\":\n\t\t\treturn 1\n\t\tcase \"curriculum\":\n\t\t\treturn 2\n\t\tcase \"done\":\n\t\t\treturn 3\n\t\tdefault:\n\t\t\treturn -1\n\t}\n}\n\nexport const initialValues = {\n\tfirstName: \"\",\n\tlastName: \"\",\n\tdob: Date.now(),\n\tnric: \"\",\n\tphone: \"\",\n\tgender: \"\",\n\trace: \"\",\n\taddress: \"\",\n\tdescription: \"\"\n}\n\nconst programmeClient = newClient(\"programme\")\n\nfunction OnboardingStudents({ i18n }) {\n\tconst [activeStep, setActiveStep] = useState(\"name\")\n\tconst [userData, setUserData] = useState({})\n\tconst history = useHistory()\n\tconst location = useLocation()\n\tconst pathname = (location.pathname || \"\").split(\"/\")[4]\n\n\tconst { data: levelData = {} } = useQuery(queryFetchLevels, {\n\t\tclient: programmeClient,\n\t\tvariables: { country }\n\t})\n\tconst [fetchUser] = useMutation(mutateUserProfile, {\n\t\tclient: newClient(\"profile\"),\n\t\tonCompleted: data => {\n\t\t\tdata = data.getProfile || {}\n\t\t\tsetUserData(data)\n\t\t}\n\t})\n\n\tconst [updateProfile, { loading }] = useMutation(mutateUpdateProfile, {\n\t\tclient: newClient(\"account\"),\n\t\tonCompleted: data => {\n\t\t\tsetUserData(data)\n\t\t\tfetchUser()\n\t\t}\n\t})\n\n\tconst handleUpdateProfile = (values, section) => {\n\t\tupdateProfile({ variables: { ...values } }).then(() => handleNext(section))\n\t}\n\n\tconst handleNext = section => {\n\t\tsection = section.toLowerCase()\n\t\tsetActiveStep(activeStep => activeStep + 1)\n\t\thistory.push(`/${country}/profile/onboarding_students/${section}`)\n\t}\n\n\tconst handlePrev = section => {\n\t\tsection = section.toLowerCase()\n\t\tsetActiveStep(activeStep => activeStep - 1)\n\t\thistory.push(`/${country}/profile/onboarding_students/${section}`)\n\t}\n\n\tconst handleSkipSteps = () => {\n\t\tModal.confirm({\n\t\t\ttitle: i18n._(t`Skip this?`),\n\t\t\tcontent: i18n._(t`Are you sure want to skip this at the moment?`),\n\t\t\tcentered: true,\n\t\t\tonOk() {\n\t\t\t\thistory.push(`/${country}`)\n\t\t\t}\n\t\t})\n\t}\n\n\tconst steps = stepsArray(pathname)\n\n\tuseEffect(() => {\n\t\tif (!localStorage.getItem(\"token\") || localStorage.getItem(\"firstTime\") !== \"true\") {\n\t\t\thistory.push(`/${country}/404`)\n\t\t}\n\n\t\tfetchUser()\n\t\tsetActiveStep(steps)\n\t}, [fetchUser, history])\n\n\treturn (\n\t\t<Section width={mobile ? \"100%\" : \"75%\"} style={{ margin: \"0 auto\", marginTop: \"3em\" }}>\n\t\t\t<Heading\n\t\t\t\tcontent={<Trans>You are almost done!</Trans>}\n\t\t\t\tsubheader={<Trans>It's time to complete your profile so other people could recognize you better</Trans>}\n\t\t\t\tmarginBottom=\"3em\"\n\t\t\t\tstyle={{ textAlign: \"center\" }}\n\t\t\t/>\n\t\t\t<StyledCard noHover autoHeight>\n\t\t\t\t<Row gutter={32} type=\"flex\">\n\t\t\t\t\t{!mobile && (\n\t\t\t\t\t\t<Col lg={8} xs={24}>\n\t\t\t\t\t\t\t<BackgroundSection noPadding>\n\t\t\t\t\t\t\t\t<div className=\"steps\">\n\t\t\t\t\t\t\t\t\t<Steps progressDot current={activeStep} steps={[\"Name\", \"Basic\", \"Curriculum\", \"Done\"]} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<GifPlayer\n\t\t\t\t\t\t\t\t\t\tsrc=\"https://assets1.lottiefiles.com/packages/lf20_IJauXS.json\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\", height: \"80%\", position: \"relative\", top: 70 }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</BackgroundSection>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t)}\n\t\t\t\t\t<Suspense fallback={<Loading />}>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Redirect\n\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\tfrom={`/:country/profile/onboarding_students`}\n\t\t\t\t\t\t\t\tto={`/:country/profile/onboarding_students/name`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/:country/profile/onboarding_students/name\"\n\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t<Name\n\t\t\t\t\t\t\t\t\t\thandlers={{ handleNext, handlePrev, onUpdateProfile: handleUpdateProfile }}\n\t\t\t\t\t\t\t\t\t\tfetchUser={fetchUser}\n\t\t\t\t\t\t\t\t\t\tonData={{ userData, setUserData }}\n\t\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/:country/profile/onboarding_students/basic\"\n\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t<Basic\n\t\t\t\t\t\t\t\t\t\thandlers={{ handleNext, handlePrev, onUpdateProfile: handleUpdateProfile }}\n\t\t\t\t\t\t\t\t\t\tonData={{ userData, setUserData }}\n\t\t\t\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/:country/profile/onboarding_students/curriculum\"\n\t\t\t\t\t\t\t\trender={() => (\n\t\t\t\t\t\t\t\t\t<Curriculum\n\t\t\t\t\t\t\t\t\t\thandlers={{ handleNext, handlePrev }}\n\t\t\t\t\t\t\t\t\t\tlevelData={levelData.getProgrammeLevelList}\n\t\t\t\t\t\t\t\t\t\tonData={{ userData, setUserData }}\n\t\t\t\t\t\t\t\t\t\tfetchUser={fetchUser}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</Row>\n\t\t\t</StyledCard>\n\t\t\t<Section centered>\n\t\t\t\t<ButtonLink onClick={handleSkipSteps}>\n\t\t\t\t\t<Trans>\n\t\t\t\t\t\tLet me fill out everything later <Icon type=\"right\" />{\" \"}\n\t\t\t\t\t</Trans>\n\t\t\t\t</ButtonLink>\n\t\t\t</Section>\n\t\t</Section>\n\t)\n}\n\nexport default withI18n()(OnboardingStudents)\n"],"sourceRoot":""}